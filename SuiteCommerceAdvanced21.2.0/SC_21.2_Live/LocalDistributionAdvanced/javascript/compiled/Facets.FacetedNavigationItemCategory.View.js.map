{"version":3,"sources":["Facets.FacetedNavigationItemCategory.View.ts"],"names":[],"mappings":"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","file":"Facets.FacetedNavigationItemCategory.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Facets.FacetedNavigationItemCategory.View\"/>\n\nimport * as _ from 'underscore';\nimport * as facets_faceted_navigation_item_category_tpl from 'facets_faceted_navigation_item_category.tpl';\nimport { getAdditionalFields } from '../../Categories/JavaScript/Categories.Utils';\nimport { Configuration } from '../../Utilities/JavaScript/Configuration';\n\n\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\n\n// @module Facets\nexport = BackboneView.extend({\n    template: facets_faceted_navigation_item_category_tpl,\n\n    events: {\n        'click [data-action=\"see-more\"]': 'toggleSeeMoreLess'\n    },\n\n    initialize() {\n        this.categories =\n            (this.model && (this.model.get('siblings') || this.model.get('categories'))) || [];\n        this.categoryUrl = this.options.categoryUrl;\n\n        this.on('afterViewRender', this.renderCategories, this);\n    },\n\n    // @method renderCategories\n    renderCategories() {\n        this.$('[data-collapsed=\"true\"]').hide();\n    },\n\n    toggleSeeMoreLess(event) {\n        const target = this.$(event.currentTarget);\n        const target_see_more = target.find('[data-type=\"see-more\"]');\n        const target_see_less = target.find('[data-type=\"see-less\"]');\n        const target_was_expanded = !!target.data('collapsed');\n\n        if (target_was_expanded) {\n            target_see_more.show();\n            target_see_less.hide();\n        } else {\n            target_see_more.hide();\n            target_see_less.show();\n        }\n\n        target.data('collapsed', !target_was_expanded);\n    },\n\n    // @method getContext @return {Facets.FacetedNavigationItemCategory.View.Context}\n    getContext() {\n        const showFacet = this.categories.length;\n        const values = [];\n        const self = this;\n        const showMax = Configuration.get('categories.sideMenu.showMax');\n        const uncollapsible = Configuration.get('categories.sideMenu.uncollapsible');\n        const collapsed = Configuration.get('categories.sideMenu.collapsed');\n\n        _.each(this.categories, function(category: any) {\n            values.push({\n                displayName: category.name,\n                label: category.name,\n                link: category.fullurl,\n                isActive: category.fullurl === self.categoryUrl,\n                additionalFields: getAdditionalFields(\n                    category,\n                    'categories.sideMenu.additionalFields'\n                )\n            });\n        });\n\n        const max = showMax || values.length;\n        const displayValues = _.first(values, max);\n        const extraValues = _.rest(values, max);\n\n        const breadcrumb = this.model && (this.model.get('breadcrumb') || []);\n        let parentName = '';\n\n        if (breadcrumb && breadcrumb.length) {\n            const index = breadcrumb.length > 1 ? breadcrumb.length - 2 : breadcrumb.length - 1;\n            parentName = breadcrumb[index].name;\n        }\n\n        // @class Facets.FacetedNavigationItemCategory.View.Context\n        return {\n            // @property {String} htmlId\n            htmlId: _.uniqueId('commercecategory_'),\n            // @property {String} facetId\n            facetId: 'commercecategory',\n            // @property {Boolean} showFacet\n            showFacet: !!showFacet,\n            // @property {Array<Object>} values\n            values,\n            // @property {Array<Object>} displayValues\n            displayValues,\n            // @property {Array<Object>} extraValues\n            extraValues,\n            // @property {Boolean} showExtraValues\n            showExtraValues: !!extraValues.length,\n            // @property {Boolean} isUncollapsible\n            isUncollapsible: !!uncollapsible,\n            // @property {Boolean} isCollapsed\n            isCollapsed: !uncollapsible && collapsed,\n            // @property {String} parentName\n            parentName\n            // @class Facets.FacetedNavigationItemCategory.View\n        };\n    }\n});\n"]}
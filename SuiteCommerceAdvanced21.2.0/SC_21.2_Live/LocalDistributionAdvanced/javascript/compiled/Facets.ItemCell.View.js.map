{"version":3,"sources":["Facets.ItemCell.View.ts"],"names":[],"mappings":"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","file":"Facets.ItemCell.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Facets.ItemCell.View\"/>\n\nimport * as _ from 'underscore';\nimport * as Utils from '../../Utilities/JavaScript/Utils';\nimport { Configuration } from '../../Utilities/JavaScript/Configuration';\n\nimport ProductLineStockView = require('../../../Commons/ProductLine/JavaScript/ProductLine.Stock.View');\nimport ProductModel = require('../../../Commons/Product/JavaScript/Product.Model');\nimport GlobalViewsStarRating = require('../../../Commons/GlobalViews/JavaScript/GlobalViews.StarRating.View');\nimport CartQuickAddToCartView = require('../../../Commons/Cart/JavaScript/Cart.QuickAddToCart.View');\nimport ProductViewsOptionView = require('../../../Commons/ProductViews/JavaScript/ProductViews.Option.View');\nimport ProductLineStockDescriptionView = require('../../../Commons/ProductLine/JavaScript/ProductLine.StockDescription.View');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\nimport BackboneCollectionView = require('../../../Commons/Backbone.CollectionView/JavaScript/Backbone.CollectionView');\nimport { Application } from '../../ApplicationSkeleton/JavaScript/Application';\n\ninterface FacetsItemCellViewOptions {\n    template?: unknown;\n    application: Application;\n    model: any;\n}\nexport = BackboneView.extend({\n    attributes: {},\n\n    initialize: function(options: FacetsItemCellViewOptions) {\n        if (options.template) {\n            this.template = options.template;\n        }\n    },\n\n    contextData: {\n        item: function() {\n            return Utils.deepCopy(this.model);\n        }\n    },\n\n    childViews: {\n        'ItemViews.Stock': function() {\n            return new ProductLineStockView({\n                model: this.model\n            });\n        },\n\n        'GlobalViews.StarRating': function() {\n            const view = new GlobalViewsStarRating({\n                model: this.model,\n                showRatingCount: false,\n                queryOptions: Utils.parseUrlOptions(location.href)\n            });\n\n            return this.options.showStarRating === false ? null : view;\n        },\n\n        'ItemDetails.Options': function() {\n            const options_configuration = Configuration.get('ItemOptions.optionsConfiguration', []);\n\n            return new BackboneCollectionView({\n                collection: _.filter(this.model.get('options').sortBy('index'), function(\n                    option: any\n                ) {\n                    const option_configuration: any = _.findWhere(options_configuration, {\n                        cartOptionId: option.get('cartOptionId')\n                    });\n                    return option_configuration && option_configuration.showSelectorInList;\n                }),\n                childView: ProductViewsOptionView,\n                viewsPerRow: 1,\n                childViewOptions: {\n                    item: this.model,\n                    templateName: 'facetCell',\n                    showLink: true,\n                    hideLabel: true,\n                    showSmall: true\n                }\n            });\n        },\n\n        'Cart.QuickAddToCart': function() {\n            const product = new ProductModel({\n                item: this.model,\n                quantity: this.model.get('_minimumQuantity', true)\n            });\n\n            return new CartQuickAddToCartView({\n                model: product,\n                application: this.options.application\n            });\n        },\n\n        StockDescription: function() {\n            return new ProductLineStockDescriptionView({\n                model: this.model\n            });\n        }\n    },\n\n    getContext: function() {\n        return {\n            // @property {String} itemId\n            itemId: this.model.get('_id'),\n            // @property {String} name\n            name: this.model.get('_name'),\n            // @property {String} url\n            url: this.model.get('_url'),\n            // @property {String} sku\n            sku: this.model.getSku(),\n            // @property {Boolean} isEnvironmentBrowser\n            isEnvironmentBrowser:\n                SC.ENVIRONMENT.jsEnvironment === 'browser' && !SC.ENVIRONMENT.isTouchEnabled,\n            // @property {ImageContainer} thumbnail\n            thumbnail: this.model.getThumbnail(),\n            // @property {Boolean} itemIsNavigable\n            itemIsNavigable: !_.isUndefined(this.options.itemIsNavigable)\n                ? !!this.options.itemIsNavigable\n                : true,\n            // @property {Boolean} showRating\n            showRating: SC.ENVIRONMENT.REVIEWS_CONFIG && SC.ENVIRONMENT.REVIEWS_CONFIG.enabled,\n            // @property {Number} rating\n            rating: this.model.get('_rating'),\n            // @property {String} track_productlist_list\n            track_productlist_list: this.model.get('track_productlist_list'),\n            // @property {String} track_productlist_position\n            track_productlist_position: this.model.get('track_productlist_position'),\n            // @property {String} track_productlist_category\n            track_productlist_category: this.model.get('track_productlist_category')\n        };\n    }\n});\n"]}
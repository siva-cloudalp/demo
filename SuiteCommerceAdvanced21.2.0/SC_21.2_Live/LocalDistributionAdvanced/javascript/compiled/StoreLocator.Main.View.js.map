{"version":3,"sources":["StoreLocator.Main.View.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;IAiBF,IAAM,oBAAoB,GAAQ,YAAY,CAAC,MAAM,CAAC;QAClD,QAAQ,EAAE,sBAAsB;QAEhC,gCAAgC;QAChC,UAAU,EAAE;YACR,EAAE,EAAE,kBAAkB;YACtB,KAAK,EAAE,kBAAkB;SAC5B;QAED,MAAM,EAAE;YACJ,qCAAqC,EAAE,cAAc;SACxD;QAED,qBAAqB;QACrB,iBAAiB;QACjB,UAAU,EAAE,SAAS,UAAU,CAAC,OAAO;YACnC,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;YACvC,IAAI,CAAC,aAAa,GAAG,IAAI,YAAY,EAAE,CAAC;YACxC,IAAI,CAAC,YAAY,GAAG,4BAAY,CAAC,WAAW,EAAE,CAAC;YAC/C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;YACtD,IAAI,CAAC,UAAU,GAAG,IAAI,sBAAsB,EAAE,CAAC;YAC/C,IAAI,CAAC,aAAa,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACpD,CAAC;QAED,kBAAkB;QAClB,OAAO,EAAE,SAAS,OAAO;YACrB,sBAAsB;YACtB,IAAI,QAAQ,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE;gBAC5D,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,0BAA0B,CAAC,CAAC;aACvD;YAED,IAAI,CAAC,QAAQ,EAAE,CAAC;QACpB,CAAC;QAED,gCAAgC;QAChC,UAAU,EAAE;YACR,eAAe,EAAE;gBACb,OAAO,IAAI,mBAAmB,CAAC;oBAC3B,UAAU,EAAE,IAAI,CAAC,UAAU;oBAC3B,WAAW,EAAE,IAAI,CAAC,WAAW;oBAC7B,aAAa,EAAE,IAAI,CAAC,aAAa;iBACpC,CAAC,CAAC;YACP,CAAC;YAED,mBAAmB,EAAE;gBACjB,OAAO,IAAI,uBAAuB,CAAC;oBAC/B,UAAU,EAAE,IAAI,CAAC,UAAU;oBAC3B,WAAW,EAAE,IAAI,CAAC,WAAW;oBAC7B,aAAa,EAAE,IAAI,CAAC,aAAa;oBACjC,YAAY,EAAE,IAAI,CAAC,YAAY;iBAClC,CAAC,CAAC;YACP,CAAC;YAED,kBAAkB,EAAE;gBAChB,OAAO,IAAI,sBAAsB,CAAC;oBAC9B,UAAU,EAAE,IAAI,CAAC,UAAU;oBAC3B,WAAW,EAAE,IAAI,CAAC,WAAW;oBAC7B,aAAa,EAAE,IAAI,CAAC,aAAa;oBACjC,YAAY,EAAE,IAAI,CAAC,YAAY;oBAC/B,cAAc,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,KAAK,QAAQ;iBACxD,CAAC,CAAC;YACP,CAAC;SACJ;QAED,qBAAqB;QACrB,0CAA0C;QAC1C,UAAU,EAAE,SAAS,UAAU;YAC3B,wCAAwC;YACxC,OAAO;gBACH,2BAA2B;gBAC3B,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,KAAK,EAAE;gBAC/C,gCAAgC;gBAChC,UAAU,EAAE,6BAAa,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,cAAc;aAC3F,CAAC;QACN,CAAC;KACJ,CAAC,CAAC;IAEH,OAAS,oBAAoB,CAAC","file":"StoreLocator.Main.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"StoreLocator.Main.View\"/>\n// @module StoreLocator.Main.View\n\nimport * as store_locator_main_tpl from 'store_locator_main.tpl';\nimport { Configuration } from '../../SCA/JavaScript/Configuration';\nimport { ProfileModel } from '../../../Commons/Profile/JavaScript/Profile.Model';\n\nimport StoreLocatorMapView = require('./StoreLocator.Map.View');\nimport StoreLocatorSearchView = require('./StoreLocator.Search.View');\nimport StoreLocatorResultsView = require('./StoreLocator.Results.View');\nimport StoreLocatorCollection = require('./StoreLocator.Collection');\nimport ReferenceMap = require('../../StoreLocatorReferenceMapImplementation/JavaScript/ReferenceMap');\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\n\nconst StoreLocatorMainView: any = BackboneView.extend({\n    template: store_locator_main_tpl,\n\n    // @property {Object} attributes\n    attributes: {\n        id: 'StoreLocatorMain',\n        class: 'StoreLocatorMain'\n    },\n\n    events: {\n        'click [data-action=\"refine-search\"]': 'refineSearch'\n    },\n\n    // @method initialize\n    // @param options\n    initialize: function initialize(options) {\n        this.application = options.application;\n        this.reference_map = new ReferenceMap();\n        this.profileModel = ProfileModel.getInstance();\n        this.title = this.reference_map.configuration.title();\n        this.collection = new StoreLocatorCollection();\n        this.reference_map.collection = this.collection;\n    },\n\n    // @method destroy\n    destroy: function destroy() {\n        // clear profile model\n        if (Backbone.history.getFragment().split('/')[1] !== 'details') {\n            this.profileModel.unset('storeLocator_last_search');\n        }\n\n        this._destroy();\n    },\n\n    // @property {Object} childViews\n    childViews: {\n        StoreLocatorMap: function() {\n            return new StoreLocatorMapView({\n                collection: this.collection,\n                application: this.application,\n                reference_map: this.reference_map\n            });\n        },\n\n        StoreLocatorResults: function() {\n            return new StoreLocatorResultsView({\n                collection: this.collection,\n                application: this.application,\n                reference_map: this.reference_map,\n                profileModel: this.profileModel\n            });\n        },\n\n        StoreLocatorSearch: function() {\n            return new StoreLocatorSearchView({\n                collection: this.collection,\n                application: this.application,\n                reference_map: this.reference_map,\n                profileModel: this.profileModel,\n                useGeolocation: window.location.protocol === 'https:'\n            });\n        }\n    },\n\n    // @method getContext\n    // @returns StoreLocator.Main.View.Context\n    getContext: function getContext() {\n        // @class StoreLocator.Main.View.Context\n        return {\n            // @property {String} title\n            title: this.reference_map.configuration.title(),\n            // @property {String} touchpoint\n            touchpoint: Configuration.get('siteSettings.isHttpsSupported') ? 'home' : 'storelocator'\n        };\n    }\n});\n\nexport = StoreLocatorMainView;\n"]}
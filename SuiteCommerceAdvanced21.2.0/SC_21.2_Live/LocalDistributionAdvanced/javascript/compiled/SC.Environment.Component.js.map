{"version":3,"sources":["SC.Environment.Component.ts"],"names":[],"mappings":"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","file":"SC.Environment.Component.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"SC.Environment.Component\"/>\n/// <reference path=\"../../../Commons/Utilities/JavaScript/GlobalDeclarations.d.ts\" />\n\nimport * as _ from 'underscore';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport { Configuration } from '../../../Commons/Utilities/JavaScript/Configuration';\n\nimport { SCBaseComponent } from '../../../Commons/SC/JavaScript/SC.BaseComponent';\nimport { MasterOptionsHelper } from '../../../Commons/SC/JavaScript/MasterOptionsHelper';\n\nimport Tracker = require('../../../Commons/Tracker/JavaScript/Tracker');\n\n// Environment component. see APIdocs/JavaScript/EnvironmentComponent.js for documentation\nconst SCEnvironmentComponent: any = {\n    /** @param {ComponentContainer} container */\n    mountToApp: function(container) {\n        container.registerComponent(this.componentGenerator(container));\n    },\n\n    componentGenerator: function(container) {\n        return SCBaseComponent.extend({\n            componentName: 'Environment',\n\n            application: container,\n\n            getConfig: function getConfig(key) {\n                return Utils.deepCopy(Utils.getPathFromObject(Configuration, key));\n            },\n\n            isPageGenerator: function isPageGenerator() {\n                return typeof nsglobal !== 'undefined';\n            },\n\n            getSiteSetting: function getSiteSettings(key) {\n                return Utils.deepCopy(Utils.getPathFromObject(SC.ENVIRONMENT.siteSettings, key));\n            },\n\n            getSession: function getSession() {\n                if (this.isPageGenerator()) {\n                    return null;\n                }\n\n                const data = Utils.deepCopy(SC.SESSION);\n                delete data.touchpoints;\n                return data;\n            },\n\n            setTranslation: function setTranslation(locale, keys) {\n                const session = this.getSession();\n\n                if (session && session.language && session.language.locale === locale) {\n                    _.each(keys, function(entry: any) {\n                        SC.Translations[entry.key] = entry.value;\n                    });\n                }\n            },\n\n            addTracker: function addTracker(tracker) {\n                if (!_.isObject(tracker)) {\n                    this._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter \"tracker\". It must be a valid object'\n                    );\n                }\n                Tracker.getInstance().registerExtensibilityTracker(tracker);\n            },\n\n            triggerEvent: function triggerEvent(event, data) {\n                if (!event || !_.isString(event)) {\n                    this._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter \"event\". It must be a valid string'\n                    );\n                }\n\n                if (!_.isEmpty(data) && !_.isObject(data)) {\n                    this._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter \"data\". It must be a valid object'\n                    );\n                }\n                Tracker.getInstance().triggerCustomEventForExtensibilityTrackers(event, data);\n            },\n\n            defineSearchMasterOptions(searchApiMasterOption, searchApiMasterOptionModifier) {\n                try {\n                    MasterOptionsHelper.subscribeMasterOptionModifier(searchApiMasterOption, searchApiMasterOptionModifier);\n                } catch (e) {\n                    this._reportError(\n                        e.error,\n                        e.message\n                    );\n                }\n\n            }\n        });\n    }\n};\n\nexport = SCEnvironmentComponent;\n"]}
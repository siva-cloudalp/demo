{"version":3,"sources":["GlobalViews.StarRating.View.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;IAWF,4DAA4D;IAC5D,IAAM,yBAAyB,GAAQ,YAAY,CAAC,MAAM,CAAC;QACvD,QAAQ,EAAE,4BAA4B;QAEtC,UAAU,EAAE;YACR,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;gBACb,OAAO;aACV;YAED,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;YAE1E,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAChF,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YAChE,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;YACnD,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAC/C,CAAC;QAED,qBAAqB;QACrB,iDAAiD;QACjD,UAAU,EAAE;YACR,IAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YAC1D,IAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,IAAI,6BAAa,CAAC,GAAG,CAAC,wBAAwB,EAAE,CAAC,CAAC,CAAC;YAErF,6CAA6C;YAC7C,OAAO;gBACH,sCAAsC;gBACtC,eAAe,EAAE,IAAI,CAAC,OAAO,CAAC,eAAe,IAAI,KAAK;gBACtD,gCAAgC;gBAChC,SAAS,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK;gBAC/B,2BAA2B;gBAC3B,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,EAAE;gBAC/B,0BAA0B;gBAC1B,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,EAAE;gBAC7B,8BAA8B;gBAC9B,QAAQ,EAAE,SAAS;gBACnB,2BAA2B;gBAC3B,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK;gBACzB,+BAA+B;gBAC/B,SAAS,EAAE,UAAU;gBACrB,8BAA8B;gBAC9B,QAAQ,EAAE,CAAC,UAAU,GAAG,GAAG,CAAC,GAAG,SAAS;gBACxC,iCAAiC;gBACjC,UAAU,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU;gBACrC,oCAAoC;gBACpC,OAAO,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC;gBAC3B,gCAAgC;gBAChC,SAAS,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS;gBACnC,sCAAsC;gBACtC,eAAe,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe;gBAC/C,iCAAiC;gBACjC,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW;gBACrC,+BAA+B;gBAC/B,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE;gBACrE,8CAA8C;gBAC9C,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,CAAC;gBACrD,mCAAmC;gBACnC,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW,KAAK,CAAC;gBAC5C,mCAAmC;gBACnC,UAAU,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY;gBACtC,qCAAqC;gBACrC,YAAY,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY;gBACzC,0CAA0C;gBAC1C,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC;aACpF,CAAC;QACN,CAAC;KACJ,CAAC,CAAC;IAEH,OAAS,yBAAyB,CAAC","file":"GlobalViews.StarRating.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"GlobalViews.StarRating.View\"/>\n/// <reference path=\"../../../Commons/Utilities/JavaScript/UnderscoreExtended.d.ts\" />\n\nimport * as _ from 'underscore';\nimport * as global_views_star_rating_tpl from 'global_views_star_rating.tpl';\nimport { Configuration } from '../../Utilities/JavaScript/Configuration';\n\nimport BackboneView = require('../../BackboneExtras/JavaScript/Backbone.View');\n\n// @class GlobalViews.StarRating.View @extends Backbone.View\nconst GlobalViewsStarRatingView: any = BackboneView.extend({\n    template: global_views_star_rating_tpl,\n\n    initialize: function() {\n        if (!this.model) {\n            return;\n        }\n\n        this.model = this.model.get('item') ? this.model.get('item') : this.model;\n\n        this.options.value = this.model.get('_rating') || this.model.get('rating') || 0;\n        this.options.ratingCount = this.model.get('_ratingsCount') || 0;\n        this.options.label = this.model.get('label') || '';\n        this.options.name = this.model.get('name');\n    },\n\n    // @method getContext\n    // @returns {GlobalViews.StarRating.View.Context}\n    getContext: function() {\n        const fill_value = Math.round(this.options.value * 2) / 2;\n        const max_value = this.options.max || Configuration.get('productReviews.maxRate', 5);\n\n        // @class GlobalViews.StarRating.View.Context\n        return {\n            // @property {Boolean} showLabelRating\n            showLabelRating: this.options.showLabelRating || false,\n            // @property {Boolean} showLabel\n            showLabel: !!this.options.label,\n            // @property {String} label\n            label: this.options.label || '',\n            // @property {String} name\n            name: this.options.name || '',\n            // @property {Number} maxValue\n            maxValue: max_value,\n            // @property {Number} value\n            value: this.options.value,\n            // @property {Number} fillValue\n            fillValue: fill_value,\n            // @property {Number} filledBy\n            filledBy: (fill_value * 100) / max_value,\n            // @property {Boolean} isWritable\n            isWritable: !!this.options.isWritable,\n            // @property {Array<Number>} buttons\n            buttons: _.range(max_value),\n            // @property {Boolean} showValue\n            showValue: !!this.options.showValue,\n            // @property {Boolean} showRatingCount\n            showRatingCount: !!this.options.showRatingCount,\n            // @property {Number} ratingCount\n            ratingCount: this.options.ratingCount,\n            // @property {String} className\n            className: this.options.className ? '-' + this.options.className : '',\n            // @property {Boolean} ratingCountGreaterThan0\n            ratingCountGreaterThan0: this.options.ratingCount > 0,\n            // @property {Boolean} hasOneReview\n            hasOneReview: this.options.ratingCount === 1,\n            // @property {Boolean} isInViewMode\n            isViewMode: !this.options.isReviewMode,\n            // @property {Boolean} isInEditorMode\n            isReviewMode: !!this.options.isReviewMode,\n            // @property {Array<Number>} writableStars\n            ratedStars: this.options.value ? _.range(this.options.value) : _.range(max_value)\n        };\n    }\n});\n\nexport = GlobalViewsStarRatingView;\n"]}
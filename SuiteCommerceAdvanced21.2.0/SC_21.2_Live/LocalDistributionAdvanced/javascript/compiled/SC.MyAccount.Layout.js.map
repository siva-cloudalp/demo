{"version":3,"sources":["SC.MyAccount.Layout.ts"],"names":[],"mappings":"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","file":"SC.MyAccount.Layout.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"SC.MyAccount.Layout\"/>\n\nimport * as myaccount_layout_tpl from 'myaccount_layout.tpl';\nimport { MyAccountMenu } from '../../Header/JavaScript/MyAccountMenu';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport { ApplicationOnlineLayout } from '../../SCA/JavaScript/ApplicationOnlineLayout';\nimport { ChildViews } from '../../../Commons/Core/JavaScript/View';\nimport { MyAccount } from './SC.MyAccount';\n\nimport MenuTreeView = require('../../../Commons/MenuTree/JavaScript/MenuTree.View');\nimport HeaderView = require('../../Header/JavaScript/Header.View');\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\n\nexport class MyAccountLayout extends ApplicationOnlineLayout {\n    protected template = myaccount_layout_tpl;\n    protected className = 'layout-container';\n    protected breadcrumbPrefix = [\n        {\n            href: '#',\n            'data-touchpoint': 'home',\n            'data-hashtag': '#',\n            text: Utils.translate('Home')\n        },\n        {\n            href: '#',\n            'data-touchpoint': 'customercenter',\n            'data-hashtag': '#overview',\n            text: Utils.translate('My Account')\n        }\n    ];\n    private selectedMenu: string;\n\n    public constructor(application: MyAccount) {\n        super(application);\n\n        this.on('afterAppendView', (view): void => this.afterAppendView(view));\n    }\n\n    private afterAppendView(view): void {\n        const selected_menu = this.getSelectedMenu(view);\n        const menuTree = MenuTreeView.getInstance();\n        menuTree.updateSidebar(selected_menu);\n\n        this.updateLayoutSB(selected_menu);\n    }\n\n    protected updateOnReSize(): void {\n        super.updateOnReSize();\n        this.updateLayoutSB();\n    }\n\n    private updateLayoutSB(selectedMenu?: string): void {\n        this.selectedMenu = selectedMenu || this.selectedMenu;\n        const siteSettings = this.application.getConfig().siteSettings || {};\n        if (siteSettings.sitetype === 'STANDARD') {\n            if (Utils.isPhoneDevice() && this.selectedMenu === 'home') {\n                // show side nav hide content\n                this.$('.myaccount-layout-side-nav').removeClass('hide');\n                this.$('.myaccount-layout-main').hide();\n            } else if (!Utils.isPhoneDevice()) {\n                // show side nav and content\n                this.$('.myaccount-layout-side-nav').removeClass('hide');\n                this.$('.myaccount-layout-main').show();\n            } else {\n                // hide side nav show content\n                this.$('.myaccount-layout-side-nav').addClass('hide');\n                this.$('.myaccount-layout-main').show();\n            }\n        }\n    }\n\n    // @method showContent Extends the original show content and adds support\n    // to update the sidebar and the breadcrumb\n    public showContent(view, dontScroll): JQuery.Promise<any> {\n        const promise = super.showContent(view, dontScroll);\n        const selectedMenu = this.getSelectedMenu(view);\n\n        MenuTreeView.getInstance().updateSidebar(selectedMenu);\n\n        this.updateLayoutSB(selectedMenu);\n\n        return promise;\n    }\n\n    private getSelectedMenu(view): string {\n        const myAccountMenu = MyAccountMenu.getInstance();\n        let selected_menu = '';\n        if (view.getSelectedMenu) {\n            selected_menu = view.getSelectedMenu();\n        } else {\n            selected_menu = myAccountMenu.getMenuIdByUrl(Backbone.history.fragment);\n        }\n        return selected_menu;\n    }\n\n    // @propery {Object} childViews\n    public getChildViews(): ChildViews {\n        const childViews = super.getChildViews();\n        childViews.Header = (): any => {\n            return new HeaderView({\n                application: this.application\n            });\n        };\n\n        childViews.MenuTree = function(): any {\n            const menuTreeViewInstance = MenuTreeView.getInstance();\n            menuTreeViewInstance.addChildViewInstances(menuTreeViewInstance.getChildViews(), true);\n            return menuTreeViewInstance;\n        };\n\n        return childViews;\n    }\n\n    public getContext(): {} {\n        return {\n            // @property {Boolean} isStandalone\n            isStandalone: this.application.isStandalone()\n        };\n    }\n}\n"]}
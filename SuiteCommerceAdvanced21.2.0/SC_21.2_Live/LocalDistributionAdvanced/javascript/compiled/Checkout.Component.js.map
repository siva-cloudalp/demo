{"version":3,"sources":["Checkout.Component.ts"],"names":[],"mappings":"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","file":"Checkout.Component.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Checkout.Component\"/>\n\nimport * as _ from 'underscore';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\n\nimport SCVisualComponent = require('../../../Commons/SC/JavaScript/SC.VisualComponent');\nimport OrderWizardModel = require('./OrderWizard.Model');\n\nconst is_wizard_router_ready = jQuery.Deferred();\nconst order_wizard_model = OrderWizardModel.getInstance();\n// @function format formats An entity data grouping both commons attributes\n// (SCIS and SCA) and non-commons. The last goes into the 'extras' key\n// @private\n// @param {Object} entity Data object to format\n// @param {Array<String>} commonAttrs Array with a string of all the common\n// attributes that are at the first level of the returned formatted object\n// @return {Object} A Formatted object structured with all the unique properties\n// inside the extra object\nconst format = function format(entity, commonAttrs) {\n    const formatted = { extras: {} };\n\n    _.keys(entity).forEach(function(attr) {\n        if (_.contains(commonAttrs, attr)) {\n            formatted[attr] = entity[attr];\n        } else {\n            formatted.extras[attr] = entity[attr];\n        }\n    });\n\n    return formatted;\n};\n\nexport const CheckoutComponent: any = function CheckoutComponentGenerator(application) {\n    // @class Checkout.Component This is the concrete front-end Checkout implementation of SuiteCommerce Advanced / SuiteCommerce Standard.\n    // See @?class Base.Component\n    // @extends Base.Component\n    // @public @extlayer\n    const api_methods = {\n        application: application,\n\n        componentName: 'Checkout',\n\n        DEFAULT_VIEW: 'Wizard.View',\n\n        WIZARD_VIEW: 'Wizard.View',\n\n        _WIZARD_VIEW_ID: 'checkout',\n\n        _isViewFromComponent: function _isViewFromComponent(view) {\n            view = view || this.viewToBeRendered || this.application.getLayout().getCurrentView();\n\n            const view_identifier = this._getViewIdentifier(view);\n            const view_prototype_id = view && this._getViewIdentifier(view.prototype);\n\n            return (\n                view &&\n                (view_identifier === this._WIZARD_VIEW_ID ||\n                    view_prototype_id === this._WIZARD_VIEW_ID)\n            );\n        },\n\n        _getComponentIdentifiers: function _getComponentIdentifiers(): string[] {\n            return [this.WIZARD_VIEW];\n        },\n\n        _setOrderWizardRouter: function _setOrderWizardRouter(order_wizard_router) {\n            this.order_wizard_router = order_wizard_router;\n            const init_promise = order_wizard_router && order_wizard_router.init_promise;\n            if (init_promise) {\n                init_promise.then(is_wizard_router_ready.resolve, is_wizard_router_ready.reject);\n            }\n        },\n\n        _normalizeStepUrl: function _normalizeStepUrl(inner_step_url) {\n            return inner_step_url.replace(/\\?.*/, '');\n        },\n\n        _normalizeModule: function _normalizeModule(module) {\n            const options = Utils.deepCopy(module.module[1]);\n\n            const { module_id } = options;\n            const { module_index } = options;\n\n            if (options.module_id) {\n                delete options.module_id;\n            }\n\n            if (options.module_index) {\n                delete options.module_index;\n            }\n\n            return {\n                step_url: module.step_url,\n                module: {\n                    classname: _.isString(module.module[0]) ? module.module[0] : undefined,\n                    id: module_id,\n                    index: module_index,\n                    options: options\n                }\n            };\n        },\n\n        _normalizeModuleInstance: function _normalizeModuleInstance(inner_module_instance, index) {\n            return {\n                id: inner_module_instance.module_id,\n                is_active: !!inner_module_instance.isActive(),\n                is_ready: !!inner_module_instance.isReady,\n                index: index\n            };\n        },\n\n        _normalizeStep: function _normalizeStep(inner_step) {\n            const step = inner_step\n                ? {\n                      name: inner_step.getName(),\n                      url: inner_step.url,\n                      show_step: !!inner_step.showStep(),\n                      state: inner_step.state,\n                      step_group_name: inner_step.stepGroup.name,\n                      modules: _.map(inner_step.moduleInstances, this._normalizeModuleInstance)\n                  }\n                : undefined;\n\n            return step;\n        },\n\n        _normalizeStepGroup: function _normalizeStepGroup(inner_step_group) {\n            const self = this;\n            const step_group = Utils.deepCopy({\n                index: inner_step_group.index,\n                name: inner_step_group.name,\n                url: inner_step_group.url,\n                show_group: inner_step_group.showStepGroup(),\n                state: inner_step_group.state\n            });\n            const commonStepGroupAttrs = ['index', 'name', 'url', 'show_group', 'state', 'steps'];\n\n            step_group.steps = _.map(inner_step_group.steps, function(step, index) {\n                return self._normalizeStep(step, index);\n            });\n\n            return format(step_group, commonStepGroupAttrs);\n        },\n\n        // @method getCurrentStep Returns the current checkout's step info\n        // @public @extlayer\n        // @return {Deferred<CheckoutStep>} Return a Deferred that is resolved in case the operation was done successfully.\n        // or the promise is rejected with an error message.\n        getCurrentStep: function getCurrentStep() {\n            const self = this;\n            const deferred = jQuery.Deferred();\n\n            try {\n                const current_step = self.order_wizard_router.getCurrentStep();\n                deferred.resolve(self._normalizeStep(current_step));\n            } catch (error) {\n                deferred.reject(error);\n            }\n            return deferred;\n        },\n\n        setCurrentStep: function setCurrentStep(data) {\n            const self = this;\n            const deferred = jQuery.Deferred();\n\n            try {\n                if (!_.isObject(data) || !data.step_url) {\n                    this._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter. Must specify a step_url'\n                    );\n                }\n\n                const { stepsOrder } = self.order_wizard_router;\n                const { steps } = self.order_wizard_router;\n                const current_step_url = self.order_wizard_router.currentStep;\n                const current_step_index = _.indexOf(stepsOrder, current_step_url);\n                const target_step_index = _.indexOf(stepsOrder, data.step_url);\n\n                if (_.isEmpty(current_step_url)) {\n                    this._reportError(\n                        'INVALID_STATE',\n                        'Invalid state. There is no current step yet'\n                    );\n                }\n\n                if (target_step_index < 0) {\n                    this._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter. step_url must a valid step url'\n                    );\n                }\n\n                self.cancelableTrigger('beforeSetCurrentStep', data.step_url)\n                    .done(function() {\n                        let promise: any = jQuery.Deferred().resolve();\n                        let step_url;\n                        let step;\n\n                        function queue_submits(step) {\n                            promise = promise.pipe(function() {\n                                return step._submit();\n                            });\n                        }\n\n                        function queue_previous(step) {\n                            promise = promise.pipe(function() {\n                                return step._previousStep();\n                            });\n                        }\n\n                        if (current_step_index < target_step_index) {\n                            for (let i = current_step_index; i < target_step_index; i++) {\n                                step_url = stepsOrder[i];\n                                step = steps[step_url];\n\n                                if (!step.showStep()) {\n                                    continue;\n                                }\n\n                                queue_submits(step);\n                            }\n                        } else if (current_step_index > target_step_index) {\n                            for (let j = current_step_index; j > target_step_index; j--) {\n                                step_url = stepsOrder[j];\n                                step = steps[step_url];\n\n                                if (!step.showStep()) {\n                                    continue;\n                                }\n\n                                queue_previous(step);\n                            }\n                        }\n\n                        promise\n                            .done(function() {\n                                self.order_wizard_router.navigate(data.step_url, {\n                                    trigger: false\n                                });\n                                self.order_wizard_router._runStep();\n                                deferred.resolve(data);\n                            })\n                            .fail(function(result) {\n                                self.order_wizard_router.navigate(result.step_url, {\n                                    trigger: false\n                                });\n                                self.order_wizard_router._runStep();\n                                deferred.reject(result);\n                            });\n                    })\n                    .fail(deferred.reject);\n            } catch (error) {\n                deferred.reject(error);\n            }\n            return deferred;\n        },\n\n        // @method getStepGroupsInfo Returns the step groups of the checkout flow\n        // @public @extlayer\n        // @return {Deferred<Array<CheckoutStepGroup>>} Return a Deferred that is\n        // resolved in case the operation was done successfully.\n        // or the promise is rejected with an error message.\n        getStepGroupsInfo: function getStepGroupsInfo() {\n            const self = this;\n            const deferred = jQuery.Deferred();\n\n            try {\n                const steps = self.order_wizard_router.stepGroups;\n\n                deferred.resolve(\n                    _.map(steps, function(step) {\n                        return self._normalizeStepGroup(step);\n                    })\n                );\n            } catch (error) {\n                deferred.reject(error);\n            }\n            return deferred;\n        },\n\n        // @method getStepsInfo Returns the steps of the checkout flow\n        // @public @extlayer\n        // @return {Deferred<Array<CheckoutStep>>} Return a Deferred that is resolved\n        // in case the operation was done successfully.\n        // or the promise is rejected with an error message.\n        getStepsInfo: function getStepsInfo() {\n            const self = this;\n            const deferred = jQuery.Deferred();\n\n            try {\n                const { steps } = self.order_wizard_router;\n                const steps_order = self.order_wizard_router.stepsOrder;\n\n                deferred.resolve(\n                    _.map(steps_order, function(step_url: any) {\n                        const step = steps[step_url];\n                        return self._normalizeStep(step);\n                    })\n                );\n            } catch (error) {\n                deferred.reject(error);\n            }\n            return deferred;\n        },\n\n        // @method getCheckoutFlow Return the name of the configured checkout flow\n        // @public @extlayer\n        // @return {String}\n        getCheckoutFlow: function getCheckoutFlow() {\n            const deferred = jQuery.Deferred();\n\n            try {\n                const { checkoutApp } = this.application.getConfig();\n                deferred.resolve(checkoutApp.checkoutSteps);\n            } catch (error) {\n                deferred.reject(error);\n            }\n            return deferred;\n        },\n\n        _getStep: function _getStep(step_url) {\n            if (!step_url) {\n                this._reportError('INVALID_PARAM', 'Invalid parameter. Must specify a step_url');\n            }\n\n            const step = this.order_wizard_router.steps[step_url];\n\n            if (!step) {\n                this._reportError(\n                    'INVALID_PARAM',\n                    'Invalid parameter. No step group found for ' + step_url\n                );\n            }\n\n            return step;\n        },\n\n        // @method addModuleToStep Adds a new module to a step\n        // @public @extlayer\n        // @param {AddModuleData} data\n        // @return {Deferred} Return a Deferred that is resolved in case the operation was done successfully.\n        // or the promise is rejected with an error message.\n        addModuleToStep: function addModuleToStep(data) {\n            const self = this;\n            const deferred = jQuery.Deferred();\n\n            try {\n                if (\n                    !_.isObject(data) ||\n                    !_.isObject(data.module) ||\n                    !_.isNumber(data.module.index) ||\n                    !_.isString(data.module.classname) ||\n                    !_.isString(data.module.id)\n                ) {\n                    self._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter. It must be a valid object'\n                    );\n                }\n\n                const step = self._getStep(data.step_url);\n\n                const { module } = data;\n                module.options = module.options || {};\n                module.options.module_id = module.id;\n                module.options.module_index = module.index;\n\n                step.addModule([module.classname, module.options])\n                    .done(function() {\n                        const current_view = self.application.getLayout().getCurrentView();\n                        current_view && current_view.render();\n\n                        deferred.resolve();\n                    })\n                    .fail(deferred.reject);\n            } catch (error) {\n                deferred.reject(error);\n            }\n            return deferred;\n        },\n\n        // @method removeModuleFromStep Removes a module from a step\n        // @public @extlayer\n        // @param {RemoveModuleData} data\n        // @return {Deferred} Return a Deferred that is resolved in case the operation was done successfully.\n        // or the promise is rejected with an error message.\n        removeModuleFromStep: function removeModuleFromStep(data) {\n            const self = this;\n            const deferred = jQuery.Deferred();\n\n            try {\n                if (!_.isObject(data) || !_.isString(data.module_id)) {\n                    this._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter. It must be a valid object'\n                    );\n                }\n\n                const step = this._getStep(data.step_url);\n\n                const module: any = _.findWhere(step.moduleInstances, {\n                    module_id: data.module_id\n                });\n                const module_index = _.indexOf(step.moduleInstances, module);\n\n                self.cancelableTrigger('beforeRemoveModuleFromStep', data)\n                    .done(function() {\n                        step.moduleInstances.splice(module_index, 1);\n                        module.destroy();\n\n                        const current_view = self.application.getLayout().getCurrentView();\n                        current_view && current_view.render();\n\n                        self.cancelableTrigger('afterRemoveModuleFromStep', data);\n                        deferred.resolve();\n                    })\n                    .fail(deferred.reject);\n            } catch (error) {\n                deferred.reject(error);\n            }\n            return deferred;\n        },\n\n        // @method addStepsGroup Adds a new steps group\n        // @public @extlayer\n        // @param {AddStepGroupData} data\n        // @return {Deferred<CheckoutStepGroup>} Return a Deferred that is resolved in case the operation was done successfully.\n        // or the promise is rejected with an error message.\n        addStepsGroup: function addStepsGroup(data) {\n            const self = this;\n            const deferred = jQuery.Deferred();\n\n            try {\n                if (\n                    !_.isObject(data) ||\n                    !_.isObject(data.group) ||\n                    !_.isString(data.group.name) ||\n                    !_.isString(data.group.url) ||\n                    !_.isNumber(data.group.index)\n                ) {\n                    self._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter. It must be a valid object'\n                    );\n                }\n\n                const { stepGroups } = self.order_wizard_router;\n\n                if (stepGroups[data.group.name]) {\n                    self._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter. Already exists a step group: ' + data.group.name\n                    );\n                }\n\n                data.group.steps = [{ url: data.group.url }];\n\n                self.order_wizard_router\n                    ._compileStepGroup(data.group, data.group.index)\n                    .then(function(step_group) {\n                        const current_view = self.application.getLayout().getCurrentView();\n                        current_view && current_view.render();\n\n                        deferred.resolve(self._normalizeStepGroup(step_group));\n                    }, deferred.reject);\n            } catch (error) {\n                deferred.reject(error);\n            }\n            return deferred;\n        },\n\n        // @method removeStepsGroup Removes a steps group\n        // @public @extlayer\n        // @param {RemoveStepGroupData} data\n        // @return {Deferred} Return a Deferred that is resolved in case the operation was done successfully.\n        // or the promise is rejected with an error message.\n        removeStepsGroup: function removeStepsGroup(data) {\n            const self = this;\n            const deferred = jQuery.Deferred();\n\n            try {\n                if (!_.isObject(data) || !_.isString(data.group_name)) {\n                    this._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter. It must be a valid object'\n                    );\n                }\n\n                const steps_groups = self.order_wizard_router.stepGroups;\n                const steps_group = steps_groups[data.group_name];\n\n                if (!steps_group) {\n                    self._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter. Does not exists a step group: ' + data.group_name\n                    );\n                }\n\n                if (steps_group.steps.length) {\n                    self._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter. The step group (' +\n                            data.group_name +\n                            ') cannot be removed because it has steps'\n                    );\n                }\n\n                self.cancelableTrigger('beforeRemoveStepsGroup', data)\n                    .done(function() {\n                        delete steps_groups[data.group_name];\n\n                        const groups = _.values(steps_groups);\n                        _.each(groups, function(group, group_index) {\n                            group.index = group_index;\n                        });\n                        self.order_wizard_router.stepGroups = _.indexBy(groups, 'name');\n\n                        const current_view = self.application.getLayout().getCurrentView();\n                        current_view && current_view.render();\n\n                        self.cancelableTrigger('afterRemoveStepsGroup', data);\n                        deferred.resolve();\n                    })\n                    .fail(deferred.reject);\n            } catch (error) {\n                deferred.reject(error);\n            }\n            return deferred;\n        },\n\n        // @method addStep Adds a new step to a step_group\n        // @public @extlayer\n        // @param {AddStepData} data\n        // @return {Deferred<CheckoutStep>} Return a Deferred that is resolved in case the operation was done successfully.\n        // or the promise is rejected with an error message.\n        addStep: function addStep(data) {\n            const self = this;\n            const deferred = jQuery.Deferred();\n\n            try {\n                if (\n                    !_.isObject(data) ||\n                    !_.isObject(data.step) ||\n                    !_.isString(data.step.name) ||\n                    !_.isString(data.step.group_name) ||\n                    !_.isString(data.step.url) ||\n                    !_.isFunction(data.step.isActive)\n                ) {\n                    self._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter. It must be a valid object'\n                    );\n                }\n\n                const { steps } = self.order_wizard_router;\n                const { stepGroups } = self.order_wizard_router;\n\n                if (steps[data.step.url]) {\n                    self._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter. Already exists a step: ' + data.step.url\n                    );\n                }\n\n                const step_group = stepGroups[data.step.group_name];\n\n                if (!step_group) {\n                    self._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter. Does not exists a step group: ' + data.step.group_name\n                    );\n                }\n\n                data.step.step_index = data.step.index;\n                delete data.step.index;\n                delete data.step.group_name;\n\n                self.order_wizard_router\n                    ._compileStep(data.step, step_group)\n                    .then(function(new_step) {\n                        const current_view = self.application.getLayout().getCurrentView();\n                        current_view && current_view.render();\n\n                        deferred.resolve(self._normalizeStep(new_step));\n                    }, deferred.reject);\n            } catch (error) {\n                deferred.reject(error);\n            }\n            return deferred;\n        },\n\n        // @method removeStep Removes a step from a step_group\n        // @public @extlayer\n        // @param {String} step_url\n        // @return {Deferred} Return a Deferred that is resolved in case the operation was done successfully.\n        // or the promise is rejected with an error message.\n        removeStep: function removeStep(data) {\n            const self = this;\n            const deferred = jQuery.Deferred();\n\n            try {\n                if (!_.isObject(data) || !_.isString(data.step_url)) {\n                    this._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter. It must be a valid object'\n                    );\n                }\n\n                const { steps } = self.order_wizard_router;\n                const step = steps[data.step_url];\n\n                if (!step) {\n                    self._reportError(\n                        'INVALID_PARAM',\n                        'Invalid parameter. Does not exists a step for the url: ' + data.step_url\n                    );\n                }\n\n                self.cancelableTrigger('beforeRemoveStep', data)\n                    .done(function() {\n                        self.order_wizard_router.stepsOrder = _.reject(\n                            self.order_wizard_router.stepsOrder,\n                            function(step_url) {\n                                return step_url === data.step_url;\n                            }\n                        );\n\n                        step.stepGroup.steps = _.reject(step.stepGroup.steps, function(\n                            step_group_step\n                        ) {\n                            return step_group_step === step;\n                        });\n\n                        delete steps[data.step_url];\n                        self.order_wizard_router.route(data.step_url, jQuery.noop);\n                        self.order_wizard_router.route(data.step_url + '?:options', jQuery.noop);\n\n                        const current_view = self.application.getLayout().getCurrentView();\n                        current_view && current_view.render();\n\n                        self.cancelableTrigger('afterRemoveStep', data);\n                        deferred.resolve();\n                    })\n                    .fail(deferred.reject);\n            } catch (error) {\n                deferred.reject(error);\n            }\n            return deferred;\n        }\n    };\n\n    // Wrap public methods to load the checkout wizard before its execution\n    _.each(api_methods, function(method, name) {\n        if (name.indexOf('_') !== 0 && _.isFunction(method)) {\n            api_methods[name] = _.wrap(method, function(fn) {\n                const self = this;\n                const args = _.toArray(arguments).slice(1);\n\n                return is_wizard_router_ready.then(function() {\n                    try {\n                        return fn.apply(self, args);\n                    } catch (error) {\n                        return jQuery.Deferred().reject(error);\n                    }\n                });\n            });\n        }\n    });\n\n    // @class Checkout.Component @extend Base.Component\n    const checkout_component = SCVisualComponent.extend(api_methods);\n\n    const innerToOuterMap = [\n        {\n            inner: 'before:OrderWizardStep.addModule',\n            outer: 'beforeAddModuleToStep',\n            normalize: checkout_component._normalizeModule\n        },\n        {\n            inner: 'after:OrderWizardStep.addModule',\n            outer: 'afterAddModuleToStep',\n            normalize: checkout_component._normalizeModule\n        },\n        {\n            inner: 'before:OrderWizardStep.submit',\n            outer: 'beforeSetCurrentStep',\n            normalize: checkout_component._normalizeStepUrl\n        },\n        {\n            inner: 'before:OrderWizardStep.previousStep',\n            outer: 'beforeSetCurrentStep',\n            normalize: checkout_component._normalizeStepUrl\n        },\n        {\n            inner: 'before:OrderWizardRouter.runStep',\n            outer: 'beforeSetCurrentStep',\n            normalize: checkout_component._normalizeStepUrl\n        },\n        {\n            inner: 'after:OrderWizardRouter.runStep',\n            outer: 'afterSetCurrentStep',\n            normalize: checkout_component._normalizeStepUrl\n        },\n\n        { inner: 'before:OrderWizardRouter.compileStep', outer: 'beforeAddStep', normalize: null },\n        { inner: 'after:OrderWizardRouter.compileStep', outer: 'afterAddStep', normalize: null },\n        {\n            inner: 'before:OrderWizardRouter.compileStepGroup',\n            outer: 'beforeAddStepsGroup',\n            normalize: null\n        },\n        {\n            inner: 'after:OrderWizardRouter.compileStepGroup',\n            outer: 'afterAddStepsGroup',\n            normalize: null\n        }\n    ];\n\n    checkout_component._suscribeToInnerEvents(innerToOuterMap, order_wizard_model);\n\n    return checkout_component;\n};\n\n// jsdoc description for data:\n\n// @class RemoveStepGroupData\n// @property {String} group_name\n\n// @class AddStepData\n// @property {String} name\n// @property {String} url\n// @property {Function} isActive\n// @property {String} group_name\n// @property {Number} index\n\n// @class AddStepGroupData\n// @property {String} name\n// @property {String} url\n// @property {Number} index\n\n// @class AddModuleData\n// @property {String} step_url\n// @property {ModuleData} module\n\n// @class ModuleData\n// @property {String} id\n// @property {String} classname\n// @property {ModuleOptions} options\n\n// @class RemoveModuleData\n// @property {String} step_url\n// @property {String} module_id\n\n// @class CheckoutStepGroup\n// @property {Number} index\n// @property {String} name\n// @property {String} url\n// @property {Boolean} show_group\n// @property {String} state\n// @property {Array<CheckoutStep>} steps\n\n// @class CheckoutStep\n// @property {String} url It is the step identifier\n// @property {String} name\n// @property {Boolean} show_step\n// @property {String} state\n// @property {String} step_group_name\n// @property {Array<CheckoutStepModule>} modules\n\n// @class CheckoutStepModule\n// @property {String} id\n// @property {Boolean} is_active\n// @property {Boolean} is_ready\n// @property {Number} index\n"]}
{"version":3,"sources":["ProductDetails.AddToProductList.View.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;IAYF,IAAM,kCAAkC,GAAQ,YAAY,CAAC,MAAM,CAC/D;QACI,QAAQ,EAAE,uCAAuC;QAEjD,UAAU,EAAE;YACR,YAAY,CAAC,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;YACzD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;YAE5C,IAAI,CAAC,KAAK;gBACN,IAAI,CAAC,WAAW,CAAC,iBAAiB,IAAI,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,KAAK,CAAC;YAEnF,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;YAExB,IAAM,IAAI,GAAG,IAAI,CAAC;YAElB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAE9B,4BAAY,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC;gBAC3B,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;gBACjC,IAAI,CAAC,MAAM,EAAE,CAAC;YAClB,CAAC,CAAC,CAAC;QACP,CAAC;QAED,UAAU,EAAE;YACR,kBAAkB,EAAE;gBAChB,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,EAAE;oBAC3B,OAAO,IAAI,4BAA4B,CAAC;wBACpC,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE;wBACxC,OAAO,EAAE,IAAI,CAAC,KAAK;wBACnB,WAAW,EAAE,IAAI,CAAC,WAAW;qBAChC,CAAC,CAAC;iBACN;gBACD,OAAO,IAAI,sBAAsB,CAAC;oBAC9B,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE;oBACxC,OAAO,EAAE,IAAI,CAAC,KAAK;oBACnB,WAAW,EAAE,IAAI,CAAC,WAAW;oBAC7B,aAAa,EAAE,IAAI,CAAC,aAAa;iBACpC,CAAC,CAAC;YACP,CAAC;SACJ;QACD,MAAM,EAAE;YACJ,IAAI,IAAI,CAAC,oBAAoB,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,oBAAoB,EAAE,EAAE;gBAC9E,IAAI,IAAI,CAAC,iBAAiB,EAAE;oBACxB,IAAI,CAAC,KAAK,CAAC,sBAAsB,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;oBACpE,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;oBAC/B,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;iBAC3B;aACJ;iBAAM;gBACH,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;aAC3B;YAED,IAAI,CAAC,OAAO,EAAE,CAAC;QACnB,CAAC;QAED,qBAAqB;QACrB,yDAAyD;QACzD,UAAU,EAAE;YACR,sDAAsD;YACtD,OAAO;gBACH,gCAAgC;gBAChC,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,sBAAsB,EAAE,CAAC,KAAK,EAAE,KAAK,SAAS;aACvE,CAAC;YACF,8CAA8C;QAClD,CAAC;KACJ,EACD;QACI,oBAAoB,EAAE,CAAC,SAAS,EAAE,UAAU,CAAC;KAChD,CACJ,CAAC;IAEF,OAAS,kCAAkC,CAAC","file":"ProductDetails.AddToProductList.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"ProductDetails.AddToProductList.View\"/>\n\nimport * as _ from 'underscore';\nimport * as product_details_add_to_product_list_tpl from 'product_details_add_to_product_list.tpl';\nimport { ProfileModel } from '../../../Commons/Profile/JavaScript/Profile.Model';\n\nimport ProductListControlView = require('../../../Commons/ProductList/JavaScript/ProductList.Control.View');\nimport ProductListControlSingleView = require('../../ProductListOnline/JavaScript/ProductList.ControlSingle.View');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\n\nconst ProductDetailsAddToProductListView: any = BackboneView.extend(\n    {\n        template: product_details_add_to_product_list_tpl,\n\n        initialize: function() {\n            BackboneView.prototype.initialize.apply(this, arguments);\n            this.application = this.options.application;\n\n            this.utils =\n                this.application.ProductListModule && this.application.ProductListModule.Utils;\n\n            this.countedClicks = {};\n\n            const self = this;\n\n            this.first_time_render = true;\n\n            ProfileModel.getPromise().done(function() {\n                self.loaded_site_settings = true;\n                self.render();\n            });\n        },\n\n        childViews: {\n            ProductListControl: function() {\n                if (this.utils.isSingleList()) {\n                    return new ProductListControlSingleView({\n                        collection: this.utils.getProductLists(),\n                        product: this.model,\n                        application: this.application\n                    });\n                }\n                return new ProductListControlView({\n                    collection: this.utils.getProductLists(),\n                    product: this.model,\n                    application: this.application,\n                    countedClicks: this.countedClicks\n                });\n            }\n        },\n        render: function() {\n            if (this.loaded_site_settings && this.utils && this.utils.isProductListEnabled()) {\n                if (this.first_time_render) {\n                    this.utils.getProductListsPromise().done(_.bind(this.render, this));\n                    this.first_time_render = false;\n                    return this.$el.empty();\n                }\n            } else {\n                return this.$el.empty();\n            }\n\n            this._render();\n        },\n\n        // @method getContext\n        // @return {ProductDetails.AddToProductList.View.Context}\n        getContext: function() {\n            // @class ProductDetails.AddToProductList.View.Context\n            return {\n                // @property {Boolean} isLoading\n                isLoading: this.utils.getProductListsPromise().state() === 'pending'\n            };\n            // @class ProductDetails.AddToProductList.View\n        }\n    },\n    {\n        attributesToValidate: ['options', 'quantity']\n    }\n);\n\nexport = ProductDetailsAddToProductListView;\n"]}
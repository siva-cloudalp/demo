{"version":3,"sources":["ProductList.Edit.View.ts"],"names":[],"mappings":"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","file":"ProductList.Edit.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"ProductList.Edit.View\"/>\n\nimport * as _ from 'underscore';\nimport * as product_list_new_tpl from 'product_list_new.tpl';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\n\n\nimport ProductListItemCollection = require('../../../Commons/ProductList/JavaScript/ProductList.Item.Collection');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\nimport BackboneFormView = require('../../../Commons/Backbone.FormView/JavaScript/Backbone.FormView');\n\n// @class ProductList.Edit.View View to handle Product Lists creation @extends Backbone.View\nexport = BackboneView.extend({\n    template: product_list_new_tpl,\n\n    attributes: { class: 'product-list-new-wrapper' },\n\n    events: {\n        'submit form': 'saveForm',\n        '[data-action=\"prevent-enter\"]': 'preventEnter'\n    },\n\n    bindings: {\n        '[name=\"name\"]': 'name'\n    },\n\n    initialize: function(options) {\n        this.application = options.application;\n        this.parentView = options.parentView;\n        this.model = options.model;\n        this.isEdit = this.model.get('internalid');\n        this.page_header = this.getTitle();\n        this.inModal = options.inModal;\n\n        BackboneFormView.add(this);\n\n        this.model.once('saveCompleted', _.bind(this.onSaveComplete, this));\n    },\n\n    // @method preventEnter Prevents not desired behavior when hitting enter\n    preventEnter: function(event) {\n        if (event.keyCode === 13) {\n            event.preventDefault();\n        }\n    },\n\n    // Sets focus on the name field and returns the correct title text\n    getTitle: function() {\n        this.$('[name=\"name\"]').focus();\n\n        const editLabel = Utils.translate('Edit your list');\n        const newLabel = Utils.translate('Edit your list');\n\n        return this.isEdit ? editLabel : newLabel;\n    },\n\n    // Handles the form submit on save\n    onSaveComplete: function() {\n        const self = this;\n\n        if (_.isArray(self.model.get('items'))) {\n            self.model.set('items', new ProductListItemCollection(self.model.get('items')));\n        }\n\n        self.$containerModal &&\n            self.$containerModal\n                .removeClass('fade')\n                .modal('hide')\n                .data('bs.modal', null);\n\n        if (self.isEdit) {\n            self.application.ProductListModule.Utils.getProductLists().add(self.model, {\n                merge: true\n            });\n            self.parentView.render();\n\n            if (self.parentView.$el.hasClass('ProductListDetailsView')) {\n                self.parentView.showConfirmationMessage(\n                    Utils.translate('Good! The list was successfully updated. ')\n                );\n            } else {\n                self.parentView.showConfirmationMessage(\n                    Utils.translate(\n                        'Good! Your <a href=\"/wishlist/$(0)\">$(1)</a> list was successfully updated. ',\n                        self.model.get('internalid'),\n                        self.model.get('name')\n                    )\n                );\n            }\n        } else {\n            self.application.ProductListModule.Utils.getProductLists().add(self.model);\n            self.parentView.render();\n            self.parentView.showConfirmationMessage(\n                Utils.translate(\n                    'Good! Your <a href=\"/wishlist/$(0)\">$(1)</a> list was successfully created. ',\n                    self.model.get('internalid'),\n                    self.model.get('name')\n                )\n            );\n        }\n        self.parentView.highlightList &&\n            self.parentView.highlightList(self.model.get('internalid'));\n    },\n\n    // @method getName Get new list name\n    getName: function() {\n        return this.$('.product-list-new-name-input input').val();\n    },\n\n    // @method getNotes Get new list notes\n    getNotes: function() {\n        return this.$('.product-list-new-notes-input textarea').val();\n    },\n\n    // @method getContext @return {ProductList.Edit.View.Context}\n    getContext: function() {\n        const { model } = this;\n        // @class ProductList.Edit.View.Context\n        return {\n            // @property {Boolean} inModal\n            inModal: !!this.inModal,\n            // @property {Boolean} isEdit\n            isEdit: !!this.isEdit,\n            // @property {String} name\n            name: model.get('name'),\n            // @property {String} description\n            description: model.get('description')\n        };\n    }\n});\n"]}
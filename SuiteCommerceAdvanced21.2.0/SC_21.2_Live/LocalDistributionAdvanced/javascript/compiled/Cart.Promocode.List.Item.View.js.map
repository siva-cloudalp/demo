{"version":3,"sources":["Cart.Promocode.List.Item.View.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;IAYF,OAAS,YAAY,CAAC,MAAM,CAAC;QACzB,gCAAgC;QAChC,QAAQ,EAAE,4BAA4B;QAEtC,qBAAqB;QACrB,kDAAkD;QAClD,UAAU,EAAE,SAAS,UAAU;YAC3B,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YAClC,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;YAC9C,IAAM,oBAAoB,GAAG,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;gBACxE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,qBAAqB,CAAC,KAAK,sBAAsB;oBAChE,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,eAAe,CAAC;wBAC5B,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,qBAAqB,CAAC,KAAK,aAAa,CAAC;gBAC9D,CAAC,CAAC,KAAK,CAAC;YACZ,IAAI,QAAQ,GAAG,EAAE,CAAC;YAElB,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,cAAc,EAAE;gBACxC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;gBAC9C,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;aAC/C;YAED,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;gBAC5B,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;aACzC;iBAAM,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,qBAAqB,CAAC,KAAK,qBAAqB,EAAE;gBACxE,QAAQ,GAAG,KAAK,CAAC,SAAS,CACtB,sEAAsE,CACzE,CAAC;aACL;YAED,+CAA+C;YAC/C,OAAO;gBACH,gCAAgC;gBAChC,SAAS,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,oBAAoB;gBAC1C,0BAA0B;gBAC1B,IAAI,EAAE,IAAI;gBACV,gCAAgC;gBAChC,UAAU,EAAE,UAAU;gBACtB,iCAAiC;gBACjC,UAAU,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,eAAe,CAAC,KAAK,KAAK;gBACjF,uCAAuC;gBACvC,gBAAgB,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,wBAAwB,CAAC;gBAC5D,kCAAkC;gBAClC,YAAY,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,wBAAwB,CAAC;gBACtD,kCAAkC;gBAClC,WAAW,EACP,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,KAAK;oBACnC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,qBAAqB,CAAC,KAAK,aAAa;gBAC3D,kCAAkC;gBAClC,YAAY,EAAE,QAAQ;aACzB,CAAC;YACF,uCAAuC;QAC3C,CAAC;KACJ,CAAC,CAAC;;AAEH,0DAA0D;AAC1D,oEAAoE;AACpE,kCAAkC","file":"Cart.Promocode.List.Item.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Cart.Promocode.List.Item.View\"/>\n\nimport * as _ from 'underscore';\nimport * as Utils from '../../Utilities/JavaScript/Utils';\n\nimport * as cart_promocode_list_item_tpl from 'cart_promocode_list_item.tpl';\n\nimport BackboneView = require('../../BackboneExtras/JavaScript/Backbone.View');\n\n// @class Cart.Promocode.List.Item.View @extend Backbone.View\nexport = BackboneView.extend({\n    // @property {Function} template\n    template: cart_promocode_list_item_tpl,\n\n    // @method getContext\n    // @return {Cart.Promocode.List.Item.View.Context}\n    getContext: function getContext() {\n        let code = this.model.get('code');\n        let internalid = this.model.get('internalid');\n        const hide_autoapply_promo = !_.isUndefined(this.model.get('isautoapplied'))\n            ? this.model.get('applicabilityreason') === 'DISCARDED_BEST_OFFER' ||\n              (this.model.get('isautoapplied') &&\n                  this.model.get('applicabilitystatus') === 'NOT_APPLIED')\n            : false;\n        let errormsg = '';\n\n        if (this.options.source === 'item_summary') {\n            code = this.model.get('promotion_couponcode');\n            internalid = this.model.get('promotion_id');\n        }\n\n        if (this.model.get('errormsg')) {\n            errormsg = this.model.get('errormsg');\n        } else if (this.model.get('applicabilityreason') === 'NO_FREE_GIFTS_ADDED') {\n            errormsg = Utils.translate(\n                \"Sorry, something went wrong. We couldn't add your gift to the order.\"\n            );\n        }\n\n        // @class Cart.Promocode.List.Item.View.Context\n        return {\n            // @property {Boolean} showPromo\n            showPromo: !!code && !hide_autoapply_promo,\n            // @property {String} code\n            code: code,\n            // @property {String} internalid\n            internalid: internalid,\n            // @property {Boolean} isEditable\n            isEditable: !this.options.isReadOnly && this.model.get('isautoapplied') === false,\n            // @property {Boolean} showDiscountRate\n            showDiscountRate: !!this.model.get('discountrate_formatted'),\n            // @property {String} discountRate\n            discountRate: this.model.get('discountrate_formatted'),\n            // @property {Boolean} showWarning\n            showWarning:\n                this.model.get('isvalid') === false ||\n                this.model.get('applicabilitystatus') === 'NOT_APPLIED',\n            // @property {String} errorMessage\n            errorMessage: errormsg\n        };\n        // @class Cart.Promocode.List.Item.View\n    }\n});\n\n// @class Cart.Promocode.List.Item.View.Initialize.Options\n// @property {Backbone.Model<{code:String,internalid:String}>} model\n// @property {Boolean?} isReadOnly\n"]}
{"version":3,"sources":["Header.Menu.View.ts"],"names":[],"mappings":"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","file":"Header.Menu.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Header.Menu.View\"/>\n/// <reference path=\"../../../Commons/Utilities/JavaScript/GlobalDeclarations.d.ts\" />\n\nimport './jQuery.sidebarMenu';\nimport * as header_menu from 'header_menu.tpl';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { Configuration } from '../../../Commons/Utilities/JavaScript/Configuration';\nimport { ProfileModel } from '../../../Commons/Profile/JavaScript/Profile.Model';\n\nimport HeaderProfileView = require('./Header.Profile.View');\nimport HeaderMenuMyAccountView = require('./Header.Menu.MyAccount.View');\nimport GlobalViewsHostSelectorView = require('../../../Commons/GlobalViews/JavaScript/GlobalViews.HostSelector.View');\nimport GlobalViewsCurrencySelectorView = require('../../../Commons/GlobalViews/JavaScript/GlobalViews.CurrencySelector.View');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\n\n// @module Header\n\n// @class Header.Menu.View @extends BackboneView\nexport = BackboneView.extend({\n    template: header_menu,\n\n    events: {\n        'mouseenter [data-toggle=\"categories-menu\"]': 'menuOpen',\n        'mouseleave [data-toggle=\"categories-menu\"]': 'menuClose',\n        'click [data-toggle=\"categories-menu\"]': 'menuClose'\n    },\n\n    menuOpen: function(e) {\n        jQuery(e.currentTarget).addClass('open');\n    },\n\n    menuClose: function(e) {\n        jQuery(e.currentTarget).removeClass('open');\n    },\n\n    initialize: function() {\n        const self = this;\n\n        this.application = this.options.application;\n        this.application.on('Configuration.navigationData', () => this.render());\n\n        ProfileModel.getPromise().done(function() {\n            self.render();\n        });\n    },\n\n    childViews: {\n        'Header.Profile': function() {\n            return new HeaderProfileView({\n                showMyAccountMenu: false,\n                application: this.application\n            });\n        },\n        'Header.Menu.MyAccount': function() {\n            return new HeaderMenuMyAccountView(this.options);\n        },\n        'Global.HostSelector': function() {\n            return new GlobalViewsHostSelectorView();\n        },\n        'Global.CurrencySelector': function() {\n            return new GlobalViewsCurrencySelectorView();\n        }\n    },\n\n    render: function() {\n        BackboneView.prototype.render.apply(this, arguments);\n        this.$('[data-type=\"header-sidebar-menu\"]').sidebarMenu();\n    },\n\n    // @method getContext\n    // @return {Header.Sidebar.View.Context}\n    getContext: function() {\n        const profile = ProfileModel.getInstance();\n        const is_loading =\n            !Configuration.get('performance.waitForUserProfile', true) &&\n            ProfileModel.getPromise().state() !== 'resolved';\n        const is_loged_in = profile.get('isLoggedIn') === 'T' && profile.get('isGuest') === 'F';\n        const environment = SC.ENVIRONMENT;\n        const show_languages = environment.availableHosts && environment.availableHosts.length > 1;\n        const show_currencies =\n            environment.availableCurrencies &&\n            environment.availableCurrencies.length > 1 &&\n            !Configuration.get('header.notShowCurrencySelector');\n\n        // @class Header.Sidebar.View.Context\n        return {\n            isStandalone: this.application.isStandalone(),\n            // @property {Array<NavigationData>} navigationItems\n            categories: Configuration.navigationData || [],\n            // @property {Boolean} showExtendedMenu\n            showExtendedMenu: !is_loading && is_loged_in,\n            // @property {Boolean} showLanguages\n            showLanguages: show_languages,\n            // @property {Boolean} showCurrencies\n            showCurrencies: show_currencies\n        };\n    }\n});\n"]}
{"version":3,"sources":["jQuery.ajaxTransport.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;;IAMF,MAAM,CAAC,aAAa,CAAC,SAAS,EAAE,UAAS,CAAC;QACtC,uDAAuD;QACvD,IAAI,CAAC,CAAC,WAAW,EAAE;YACf,IAAI,QAAM,CAAC;YACX,IAAM,MAAI,GAAG,QAAQ,CAAC,IAAI,IAAI,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,eAAe,CAAC;YAE5E,OAAO;gBACH,IAAI,EAAE,UAAS,CAAC,EAAE,QAAQ;oBACtB,IAAM,GAAG,GAAQ,MAAM,CAAC;oBACxB,IAAM,gBAAgB,GAAG,GAAG,CAAM,CAAC,CAAC,aAAa,CAAC,CAAC;oBACnD,IAAM,QAAQ,GAAG,EAAE,CAAC;oBACpB,GAAG,CAAM,CAAC,CAAC,aAAa,CAAC,GAAG,UAAS,IAAI;wBACrC,IAAI,IAAI,CAAC,eAAe,EAAE;4BAChB,QAAS,CAAC,eAAe,GAAG,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;yBACpE;wBACD,gBAAgB,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;oBAC5C,CAAC,CAAC;oBAEF,QAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;oBAE1C,QAAM,CAAC,KAAK,GAAG,IAAI,CAAC;oBAEpB,IAAI,CAAC,CAAC,aAAa,EAAE;wBACjB,QAAM,CAAC,OAAO,GAAG,CAAC,CAAC,aAAa,CAAC;qBACpC;oBAED,QAAM,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;oBAEnB,SAAS,KAAK;wBACV,2BAA2B;wBAC3B,QAAM,CAAC,MAAM,GAAG,QAAM,CAAC,kBAAkB,GAAG,IAAI,CAAC;wBAEjD,oBAAoB;wBACpB,IAAI,QAAM,CAAC,UAAU,EAAE;4BACnB,QAAM,CAAC,UAAU,CAAC,WAAW,CAAC,QAAM,CAAC,CAAC;yBACzC;wBAED,yBAAyB;wBACzB,QAAM,GAAG,IAAI,CAAC;oBAClB,CAAC;oBAED,mCAAmC;oBACnC,QAAM,CAAC,MAAM,GAAG,QAAM,CAAC,kBAAkB,GAAG,UAAS,CAAC,EAAE,OAAO;wBAC3D,IACI,OAAO;4BACP,CAAC,QAAM,CAAC,UAAU;4BAClB,iBAAiB,CAAC,IAAI,CAAC,QAAM,CAAC,UAAU,CAAC,EAC3C;4BACE,KAAK,EAAE,CAAC;4BAER,wBAAwB;4BACxB,IAAI,CAAC,OAAO,EAAE;gCACV,IAAU,QAAS,CAAC,eAAe,EAAE;oCACjC,QAAQ,CAAO,QAAS,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;iCACtD;qCAAM;oCACH,QAAQ,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;iCAC5B;6BACJ;yBACJ;oBACL,CAAC,CAAC;oBACF,QAAM,CAAC,OAAO,GAAG;wBACb,KAAK,EAAE,CAAC;wBACR,QAAQ,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;oBAC3B,CAAC,CAAC;oBAEF,yEAAyE;oBACzE,kEAAkE;oBAClE,MAAI,CAAC,YAAY,CAAC,QAAM,EAAE,MAAI,CAAC,UAAU,CAAC,CAAC;gBAC/C,CAAC;gBACD,KAAK,EAAE;oBACH,IAAI,QAAM,EAAE;wBACR,QAAM,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;qBAClC;gBACL,CAAC;aACJ,CAAC;SACL;IACL,CAAC,CAAC,CAAC","file":"jQuery.ajaxTransport.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"jQuery.ajaxTransport\"/>\n\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\n\njQuery.ajaxTransport('+script', function(s) {\n    // This transport only deals with cross domain requests\n    if (s.crossDomain) {\n        let script;\n        const head = document.head || jQuery('head')[0] || document.documentElement;\n\n        return {\n            send: function(_, callback) {\n                const win: any = window;\n                const originalCallback = win[<any>s.jsonpCallback];\n                const response = {};\n                win[<any>s.jsonpCallback] = function(data) {\n                    if (data.errorStatusCode) {\n                        (<any>response).errorStatusCode = parseInt(data.errorStatusCode);\n                    }\n                    originalCallback.apply(this, arguments);\n                };\n\n                script = document.createElement('script');\n\n                script.async = true;\n\n                if (s.scriptCharset) {\n                    script.charset = s.scriptCharset;\n                }\n\n                script.src = s.url;\n\n                function clean() {\n                    // Handle memory leak in IE\n                    script.onload = script.onreadystatechange = null;\n\n                    // Remove the script\n                    if (script.parentNode) {\n                        script.parentNode.removeChild(script);\n                    }\n\n                    // Dereference the script\n                    script = null;\n                }\n\n                // Attach handlers for all browsers\n                script.onload = script.onreadystatechange = function(_, isAbort) {\n                    if (\n                        isAbort ||\n                        !script.readyState ||\n                        /loaded|complete/.test(script.readyState)\n                    ) {\n                        clean();\n\n                        // Callback if not abort\n                        if (!isAbort) {\n                            if ((<any>response).errorStatusCode) {\n                                callback((<any>response).errorStatusCode, 'error');\n                            } else {\n                                callback(200, 'success');\n                            }\n                        }\n                    }\n                };\n                script.onerror = function() {\n                    clean();\n                    callback(404, 'error');\n                };\n\n                // Circumvent IE6 bugs with base elements (#2709 and #4378) by prepending\n                // Use native DOM manipulation to avoid our domManip AJAX trickery\n                head.insertBefore(script, head.firstChild);\n            },\n            abort: function() {\n                if (script) {\n                    script.onload(undefined, true);\n                }\n            }\n        };\n    }\n});\n"]}
{"version":3,"sources":["Profile.Component.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;IAQF,IAAM,UAAU,GAAG,UAAS,KAAK;QAC7B,QAAQ,KAAK,EAAE;YACX,KAAK,GAAG;gBACJ,OAAO,IAAI,CAAC;YAChB,KAAK,GAAG;gBACJ,OAAO,KAAK,CAAC;YACjB;gBACI,OAAO,KAAK,CAAC;SACpB;IACL,CAAC,CAAC;IAEF,IAAI,MAAM,GAAG,UAAS,QAAQ,EAAE,SAAS;QACrC,IAAI,UAAU,GAAQ,EAAE,CAAC;QACzB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACvC,IAAM,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YAC1B,IAAI,QAAQ,YAAY,KAAK,EAAE;gBAC3B,UAAU,GAAG,EAAE,CAAC;gBAChB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBACtC,IAAM,GAAG,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;oBACxB,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC,CAAC;iBAC3C;aACJ;iBAAM,IAAI,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;gBAC3B,IAAI,IAAI,CAAC,MAAM,EAAE;oBACb,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK;wBAChC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;wBAChD,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;iBACxC;qBAAM;oBACH,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK;wBAC7E,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;wBAChD,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;iBACxC;aACJ;SACJ;QACD,OAAO,UAAU,CAAC;IACtB,CAAC,CAAC;IAEF,IAAM,SAAS,GAAG,UAAS,QAAQ;QAC/B,IAAM,SAAS,GAAG;YACd,EAAE,GAAG,EAAE,aAAa,EAAE;YACtB;gBACI,GAAG,EAAE,WAAW;gBAChB,KAAK,EAAE;oBACH,EAAE,GAAG,EAAE,OAAO,EAAE;oBAChB,EAAE,GAAG,EAAE,OAAO,EAAE;oBAChB,EAAE,GAAG,EAAE,OAAO,EAAE;oBAChB,EAAE,GAAG,EAAE,MAAM,EAAE;oBACf,EAAE,GAAG,EAAE,SAAS,EAAE;oBAClB,EAAE,GAAG,EAAE,SAAS,EAAE;oBAClB,EAAE,GAAG,EAAE,gBAAgB,EAAE;oBACzB,EAAE,GAAG,EAAE,iBAAiB,EAAE;oBAC1B,EAAE,GAAG,EAAE,UAAU,EAAE;oBACnB,EAAE,GAAG,EAAE,YAAY,EAAE;oBACrB,EAAE,GAAG,EAAE,eAAe,EAAE;oBACxB,EAAE,GAAG,EAAE,SAAS,EAAE;oBAClB,EAAE,GAAG,EAAE,OAAO,EAAE;oBAChB,EAAE,GAAG,EAAE,OAAO,EAAE;oBAChB,EAAE,GAAG,EAAE,KAAK,EAAE;iBACjB;aACJ;YACD,EAAE,GAAG,EAAE,SAAS,EAAE;YAClB;gBACI,GAAG,EAAE,uBAAuB;gBAC5B,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,YAAY,EAAE,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,EAAE,EAAE,GAAG,EAAE,aAAa,EAAE,CAAC;aAC1E;YACD,EAAE,GAAG,EAAE,aAAa,EAAE;YACtB,EAAE,GAAG,EAAE,oBAAoB,EAAE;YAC7B,EAAE,GAAG,EAAE,aAAa,EAAE;YACtB,EAAE,GAAG,EAAE,cAAc,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,OAAO,EAAE,CAAC,EAAE;YACjF,EAAE,GAAG,EAAE,OAAO,EAAE;YAChB,EAAE,GAAG,EAAE,gBAAgB,EAAE;YACzB,EAAE,GAAG,EAAE,WAAW,EAAE;YACpB,EAAE,GAAG,EAAE,YAAY,EAAE;YACrB,EAAE,GAAG,EAAE,SAAS,EAAE;YAClB,EAAE,GAAG,EAAE,YAAY,EAAE;YACrB,EAAE,GAAG,EAAE,cAAc,EAAE;YACvB,EAAE,GAAG,EAAE,UAAU,EAAE;YACnB,EAAE,GAAG,EAAE,UAAU,EAAE;YACnB,EAAE,GAAG,EAAE,YAAY,EAAE;YACrB,EAAE,GAAG,EAAE,MAAM,EAAE;YACf;gBACI,GAAG,EAAE,cAAc;gBACnB,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,YAAY,EAAE,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC;aAClD;YACD;gBACI,GAAG,EAAE,WAAW;gBAChB,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,UAAU,EAAE,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE,GAAG,EAAE,OAAO,EAAE,CAAC;aACjE;YACD,EAAE,GAAG,EAAE,YAAY,EAAE;YACrB,EAAE,GAAG,EAAE,YAAY,EAAE;YACrB,EAAE,GAAG,EAAE,MAAM,EAAE;SAClB,CAAC;QAEF,IAAI,QAAQ,CAAC,qBAAqB,EAAE;YAChC,IAAM,YAAY,GAAG,EAAE,CAAC;YACxB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,qBAAqB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC5D,IAAM,QAAQ,GAAG,QAAQ,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;gBACnD,IAAI,QAAQ,CAAC,UAAU,EAAE;oBACrB,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC/B;aACJ;YACD,QAAQ,CAAC,qBAAqB,GAAG,YAAY,CAAC;SACjD;QAED,OAAO,MAAM,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;IACvC,CAAC,CAAC;IAsBF,IAAM,mBAAmB,GAAG,UAAS,IAAI;QACrC,OAAO;YACH,kEAAkE;YAClE,cAAc,EAAE,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC;YAC1E,8DAA8D;YAC9D,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC;YAC9D,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC;YACxB,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,QAAQ;YAC1C,eAAe,EAAE,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,UAAU;YACrD,iBAAiB,EAAE,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,IAAI;YACjD,gBAAgB,EAAE,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,GAAG;SAClD,CAAC;IACN,CAAC,CAAC;IAEF,IAAM,wBAAwB,GAAG,UAAS,EAAU;YAAT,EAAE,QAAA,EAAE,IAAI,UAAA;QAC/C,OAAO;YACH,EAAE,IAAA;YACF,IAAI,MAAA;SACP,CAAC;IACN,CAAC,CAAC;IAEF,IAAM,oBAAoB,GAAG,UAAS,aAA4B;QAC9D,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG;YACnC,IAAI,OAAO,aAAa,CAAC,GAAG,CAAC,KAAK,SAAS,EAAE;gBACzC,OAAO,GAAG,KAAK,CAAC;aACnB;YAAA,CAAC;QACN,CAAC,CAAC,CAAC;QACH,OAAO,OAAO,CAAC;IACnB,CAAC,CAAA;IAED,IAAM,gBAAgB,GAAQ;QAC1B,UAAU,EAAE,UAAS,SAAS;YAC1B,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC,CAAC;QACpE,CAAC;QAED,kBAAkB,EAAE,UAAS,SAAS;YAClC,OAAO,kCAAe,CAAC,MAAM,CAAC;gBAC1B,aAAa,EAAE,aAAa;gBAE5B,WAAW,EAAE,SAAS;gBAEtB,gBAAgB,EAAE;oBACd,SAAS,EAAE,CAAC,CAAC;oBACb,eAAe,EAAE,CAAC,CAAC;oBACnB,8BAA8B,EAAE,CAAC,CAAC;iBACrC;gBAED,cAAc,EAAE;oBACZ,IAAM,OAAO,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;oBAClC,4BAAY,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,UAAS,OAAO;wBAC3C,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oBACxD,CAAC,CAAC,CAAC;oBACH,OAAO,OAAO,CAAC;gBACnB,CAAC;gBAED,cAAc,EAAE;oBACZ,IAAI;wBACA,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE,EAAE;4BAC3B,IAAI,CAAC,YAAY,CACb,kBAAkB,EAClB,8DAA8D,CACjE,CAAC;yBACL;wBACD,IAAM,cAAc,GAAG,4BAAY,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;wBACxE,IAAM,WAAW,GAAiB,cAAc;6BAC3C,MAAM,CACH,UAAA,aAAa,IAAI,OAAA,aAAa,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,UAAU,KAAK,GAAG,EAArD,CAAqD,CACzE;6BACA,GAAG,CAAC,UAAA,IAAI,IAAI,OAAA,mBAAmB,CAAC,IAAI,CAAC,EAAzB,CAAyB,CAAC,CAAC;wBAC5C,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;qBACjE;oBAAC,OAAO,KAAK,EAAE;wBACZ,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;qBAC1C;gBACL,CAAC;gBAED,mBAAmB,EAAE;oBACjB,IAAI;wBACA,IAAI,gBAAgB,GAAG,4BAAY,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;wBAClE,gBAAgB,GAAG,gBAAgB,CAAC,GAAG,CAAC,UAAA,eAAe,IAAI,OAAA,wBAAwB,CAAC,eAAe,CAAC,EAAzC,CAAyC,CAAC,CAAC;wBACtG,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAAC;qBACtE;oBAAC,OAAO,KAAK,EAAE;wBACZ,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;qBAC1C;gBACL,CAAC;gBAED,gBAAgB,EAAE;oBACd,IAAI;wBACA,IAAM,oBAAoB,GAAG,4BAAY,CAAC,WAAW,EAAE,CAAC;wBACxD,IAAI,aAAa,GAAG,oBAAoB,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;wBAC9D,IAAI,aAAa,EAAE;4BACf,aAAa,CAAC,iBAAiB,GAAG,oBAAoB,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;yBACnF;wBACD,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC;qBACnE;oBAAC,OAAO,KAAK,EAAE;wBACZ,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;qBAC1C;gBACL,CAAC;gBAED,gBAAgB,EAAE,UAAU,aAAa;oBACrC,IAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;oBACnC,IAAI;wBACA,IAAI,YAAY,GAAG,4BAAY,CAAC,WAAW,EAAE,CAAC;wBAC9C,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE,IAAI,YAAY,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,GAAG,EAAE;4BACrE,IAAI,CAAC,YAAY,CACb,kBAAkB,EAClB,+DAA+D,CAClE,CAAC;yBACL;wBACD,IAAI,CAAC,oBAAoB,CAAC,aAAa,CAAC,EAAE;4BACtC,IAAI,CAAC,YAAY,CACb,eAAe,EACf,8EAA8E,CACjF,CAAC;yBACL;wBACD,YAAY,CAAC,GAAG,CAAC,EAAC,iBAAiB,EAAE,IAAI,CAAC,GAAG,EAAE,EAAC,CAAC,CAAC;wBAClD,YAAY,CAAC,GAAG,CAAC,EAAC,aAAa,EAAE,aAAa,EAAC,CAAC,CAAC;wBACjD,YAAY,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,EAAE;4BACxB,QAAQ,CAAC,OAAO,EAAE,CAAC;wBACvB,CAAC,CAAC,CAAC;qBACN;oBAAC,OAAO,KAAK,EAAE;wBACZ,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;qBAC1B;oBACD,OAAO,QAAQ,CAAC;gBACpB,CAAC;aACJ,CAAC,CAAC;QACP,CAAC;KACJ,CAAC;IAEF,OAAS,gBAAgB,CAAC","file":"Profile.Component.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Profile.Component\"/>\nimport * as Utils from '../../Utilities/JavaScript/Utils';\nimport * as jQuery from '../../Core/JavaScript/jQuery';\nimport { ProfileModel } from './Profile.Model';\nimport { SCBaseComponent } from '../../SC/JavaScript/SC.BaseComponent';\n\nconst parseValue = function(value) {\n    switch (value) {\n        case 'T':\n            return true;\n        case 'F':\n            return false;\n        default:\n            return value;\n    }\n};\n\nvar filter = function(original, whitelist) {\n    let normalized: any = {};\n    for (let i = 0; i < whitelist.length; i++) {\n        const item = whitelist[i];\n        if (original instanceof Array) {\n            normalized = [];\n            for (let j = 0; j < original.length; j++) {\n                const obj = original[j];\n                normalized.push(filter(obj, whitelist));\n            }\n        } else if (original[item.att]) {\n            if (item.rename) {\n                normalized[item.rename] = item.inner\n                    ? filter(original[item.att], whitelist[i].inner)\n                    : parseValue(original[item.att]);\n            } else {\n                normalized[item.att.replace(new RegExp('_', 'g'), '').toLowerCase()] = item.inner\n                    ? filter(original[item.att], whitelist[i].inner)\n                    : parseValue(original[item.att]);\n            }\n        }\n    }\n    return normalized;\n};\n\nconst normalize = function(original) {\n    const whitelist = [\n        { att: 'addressbook' },\n        {\n            att: 'addresses',\n            inner: [\n                { att: 'addr1' },\n                { att: 'addr2' },\n                { att: 'addr3' },\n                { att: 'city' },\n                { att: 'company' },\n                { att: 'country' },\n                { att: 'defaultbilling' },\n                { att: 'defaultshipping' },\n                { att: 'fullname' },\n                { att: 'internalid' },\n                { att: 'isresidential' },\n                { att: 'isvalid' },\n                { att: 'phone' },\n                { att: 'state' },\n                { att: 'zip' }\n            ]\n        },\n        { att: 'balance' },\n        {\n            att: 'campaignsubscriptions',\n            inner: [{ att: 'internalid' }, { att: 'name' }, { att: 'description' }]\n        },\n        { att: 'companyname' },\n        { att: 'creditholdoverride' },\n        { att: 'creditlimit' },\n        { att: 'customfields', inner: [{ att: 'name', rename: 'id' }, { att: 'value' }] },\n        { att: 'email' },\n        { att: 'emailsubscribe' },\n        { att: 'firstname' },\n        { att: 'internalid' },\n        { att: 'isGuest' },\n        { att: 'isLoggedIn' },\n        { att: 'isRecognized' },\n        { att: 'language' },\n        { att: 'lastname' },\n        { att: 'middlename' },\n        { att: 'name' },\n        {\n            att: 'paymentterms',\n            inner: [{ att: 'internalid' }, { att: 'name' }]\n        },\n        {\n            att: 'phoneinfo',\n            inner: [{ att: 'altphone' }, { att: 'fax' }, { att: 'phone' }]\n        },\n        { att: 'priceLevel' },\n        { att: 'subsidiary' },\n        { att: 'type' }\n    ];\n\n    if (original.campaignsubscriptions) {\n        const subscribedTo = [];\n        for (let i = 0; i < original.campaignsubscriptions.length; i++) {\n            const campaign = original.campaignsubscriptions[i];\n            if (campaign.subscribed) {\n                subscribedTo.push(campaign);\n            }\n        }\n        original.campaignsubscriptions = subscribedTo;\n    }\n\n    return filter(original, whitelist);\n};\n\ninterface CreditCard {\n    expirationDate: string;\n    number: string;\n    name: string;\n    images: string[];\n    paymentMethodId: string;\n    paymentMethodName: string;\n    paymentMethodKey: string;\n}\n\ninterface CustomerSegment {\n    id: number;\n    name: string;\n}\n\ninterface CookieOptions {\n    [index: string]: string;\n    consentLastUpdate?: string;\n}\n\nconst normalizeCreditCard = function(card): CreditCard {\n    return {\n        // if payment instruments is enabled ccexpiredate is not available\n        expirationDate: card.get('ccexpiredate') || card.get('cardexpirationdate'),\n        // if payment instruments is enabled ccnumber is not available\n        number: card.get('ccnumber') || card.get('cardlastfourdigits'),\n        name: card.get('ccname'),\n        images: card.get('paymentmethod').imagesrc,\n        paymentMethodId: card.get('paymentmethod').internalid,\n        paymentMethodName: card.get('paymentmethod').name,\n        paymentMethodKey: card.get('paymentmethod').key\n    };\n};\n\nconst normalizeCustomerSegment = function({id, name}): CustomerSegment {\n    return {\n        id,\n        name,\n    };\n};\n\nconst isCookieOptionsValid = function(cookieOptions: CookieOptions): boolean {\n    let isValid = true;\n    Object.keys(cookieOptions).forEach((key) => {\n        if (typeof cookieOptions[key] !== 'boolean') {\n            isValid = false;\n        };\n    });\n    return isValid;\n}\n\nconst ProfileComponent: any = {\n    mountToApp: function(container) {\n        container.registerComponent(this.componentGenerator(container));\n    },\n\n    componentGenerator: function(container) {\n        return SCBaseComponent.extend({\n            componentName: 'UserProfile',\n\n            application: container,\n\n            DEFAULT_SEGMENTS: {\n                ALL_USERS: -1,\n                ANONYMOUS_USERS: -2,\n                RECOGNIZED_AND_LOGGED_IN_USERS: -3,\n            },\n\n            getUserProfile: function() {\n                const promise = jQuery.Deferred();\n                ProfileModel.getPromise().done(function(profile) {\n                    promise.resolve(normalize(Utils.deepCopy(profile)));\n                });\n                return promise;\n            },\n\n            getCreditCards: function(): JQuery.Deferred<CreditCard[]> {\n                try {\n                    if (!Utils.isCheckoutDomain()) {\n                        this._reportError(\n                            'UNSECURE_SESSION',\n                            'Unsecure session: Must be under a secure domain or logged in'\n                        );\n                    }\n                    const paymentMethods = ProfileModel.getInstance().get('paymentmethods');\n                    const creditCards: CreditCard[] = paymentMethods\n                        .filter(\n                            paymentMethod => paymentMethod.get('paymentmethod').creditcard === 'T'\n                        )\n                        .map(card => normalizeCreditCard(card));\n                    return jQuery.Deferred().resolve(Utils.deepCopy(creditCards));\n                } catch (error) {\n                    return jQuery.Deferred().reject(error);\n                }\n            },\n\n            getCustomerSegments: function(): JQuery.Deferred<CustomerSegment[]> {\n                try {\n                    let customerSegments = ProfileModel.getInstance().get('segments');\n                    customerSegments = customerSegments.map(customerSegment => normalizeCustomerSegment(customerSegment));\n                    return jQuery.Deferred().resolve(Utils.deepCopy(customerSegments));\n                } catch (error) {\n                    return jQuery.Deferred().reject(error);\n                }\n            },\n\n            getCookieOptions: function(): JQuery.Deferred<CookieOptions[]> {\n                try {\n                    const profileModelInstance = ProfileModel.getInstance();\n                    let cookieOptions = profileModelInstance.get('cookieoptions');\n                    if (cookieOptions) {\n                        cookieOptions.consentLastUpdate = profileModelInstance.get('consentlastupdate');\n                    }\n                    return jQuery.Deferred().resolve(Utils.deepCopy(cookieOptions));\n                } catch (error) {\n                    return jQuery.Deferred().reject(error);\n                }\n            },\n\n            setCookieOptions: function (cookieOptions): JQuery.Deferred<string> {\n                const deferred = jQuery.Deferred();\n                try {\n                    let profileModel = ProfileModel.getInstance();\n                    if (!Utils.isCheckoutDomain() || profileModel.get('isLoggedIn') === 'F') {\n                        this._reportError(\n                            'UNSECURE_SESSION',\n                            'Unsecure session: Must be under a secure domain and logged in'\n                        );\n                    }\n                    if (!isCookieOptionsValid(cookieOptions)) {\n                        this._reportError(\n                            'INVALID_PARAM',\n                            'Invalid parameter: CookieOptions must be an object conformed by name:boolean'\n                        );\n                    }\n                    profileModel.set({consentlastupdate: Date.now()});\n                    profileModel.set({cookieoptions: cookieOptions});\n                    profileModel.save().done((cb) => {\n                        deferred.resolve();\n                    });\n                } catch (error) {\n                    deferred.reject(error);\n                }\n                return deferred;\n            }\n        });\n    }\n};\n\nexport = ProfileComponent;\n"]}
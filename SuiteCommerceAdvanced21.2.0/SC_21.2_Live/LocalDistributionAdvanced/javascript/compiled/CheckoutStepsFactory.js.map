{"version":3,"sources":["CheckoutStepsFactory.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;;;IAuCF;QAUI;YAPQ,uBAAkB,GAA2C;gBACjE,QAAQ,EAAE,mDAAQ;gBAClB,UAAU,EAAE,yCAAG;gBACf,eAAe,EAAE,2DAAY;aAChC,CAAC;YAIE,IAAM,WAAW,GAAG,yBAAW,CAAC,cAAc,EAAE,CAAC;YACzC,IAAA,WAAW,GAAK,WAAW,CAAC,SAAS,EAAE,YAA5B,CAA6B;YAChD,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC,aAAa,CAAC;QAClD,CAAC;QAEM,+CAAgB,GAAvB;YACI,OAAO,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACtD,CAAC;QAEM,gDAAiB,GAAxB;YAAA,iBAcC;YAbG,IAAM,OAAO,GAAG,wBAAM,CAAC,QAAQ,EAAE,CAAC;YAClC,IAAM,cAAc,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC/C,IAAI,cAAc,EAAE;gBAChB,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;aACnC;iBAAM;gBACH,sBAAc,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;aACxE;YAED,OAAO,OAAO,CAAC,IAAI,CACf,UAAC,aAAa;gBACV,KAAI,CAAC,kBAAkB,CAAC,KAAI,CAAC,YAAY,CAAC,GAAG,aAAa,CAAC;YAC/D,CAAC,CACJ,CAAC;QACN,CAAC;QAEa,gCAAW,GAAzB;YACI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,IAAI,IAAI,oBAAoB,EAAE,CAAC;YAC5D,OAAO,IAAI,CAAC,QAAQ,CAAC;QACzB,CAAC;QACL,2BAAC;IAAD,CAxCA,AAwCC,IAAA;IAxCY,oDAAoB","file":"CheckoutStepsFactory.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"CheckoutStepsFactory\"/>\n\nimport { requireModules } from '../../../Commons/Utilities/JavaScript/Utils';\nimport { jQuery } from '../../jQuerySCAExtras/JavaScript/jQuerySCAExtras';\nimport { Environment } from '../../../Commons/Core/JavaScript/Environment';\nimport { Standard } from './SC.Checkout.Configuration.Steps.Standard';\nimport { OPC } from './SC.Checkout.Configuration.Steps.OPC';\nimport { BillingFirst } from './SC.Checkout.Configuration.Steps.BillingFirst';\nimport { View } from '../../../Commons/Core/JavaScript/View';\nimport { WizardStepModule } from '../../Wizard/JavaScript/Wizard.StepModule';\n\nexport interface CheckoutStepGroup {\n    name: string;\n    steps: CheckoutStep[];\n}\n\ninterface CheckoutModule {\n    0: WizardStepModule;\n    1?: { [key: string]: any };\n}\n\ninterface CheckoutStep {\n    name?: string;\n    url: string;\n    isActive?: () => boolean;\n    modules: CheckoutModule[];\n    bottomMessage?: string | (() => string);\n    past?: () => Promise<void>;\n    continueButtonLabel?: string | (() => string);\n    save?: () => Promise<void>;\n    hideContinueButton?: boolean;\n    hideBackButton?: boolean;\n    hideBreadcrumb?: boolean;\n    hideSecondContinueButtonOnPhone?: boolean;\n    headerView?: View<{}>;\n}\n\nexport class CheckoutStepsFactory {\n    private static instance: CheckoutStepsFactory;\n\n    private implementationsMap: { [key: string]: CheckoutStepGroup[] } = {\n        Standard: Standard,\n        'One Page': OPC,\n        'Billing First': BillingFirst\n    };\n    private checkoutName: string;\n\n    private constructor() {\n        const Application = Environment.getApplication();\n        const { checkoutApp } = Application.getConfig();\n        this.checkoutName = checkoutApp.checkoutSteps;\n    }\n\n    public getCheckoutSteps(): CheckoutStepGroup[] {\n        return this.implementationsMap[this.checkoutName];\n    }\n\n    public loadCheckoutSteps(): Promise<void> {\n        const promise = jQuery.Deferred();\n        const implementation = this.getCheckoutSteps();\n        if (implementation) {\n            promise.resolve(implementation);\n        } else {\n            requireModules([this.checkoutName], promise.resolve, promise.reject);\n        }\n\n        return promise.then(\n            (checkoutSteps): void => {\n                this.implementationsMap[this.checkoutName] = checkoutSteps;\n            }\n        );\n    }\n\n    public static getInstance(): CheckoutStepsFactory {\n        this.instance = this.instance || new CheckoutStepsFactory();\n        return this.instance;\n    }\n}\n"]}
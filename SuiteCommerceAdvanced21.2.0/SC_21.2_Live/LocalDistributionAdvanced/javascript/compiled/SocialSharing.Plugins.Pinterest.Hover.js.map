{"version":3,"sources":["SocialSharing.Plugins.Pinterest.Hover.ts"],"names":[],"mappings":"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","file":"SocialSharing.Plugins.Pinterest.Hover.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"SocialSharing.Plugins.Pinterest.Hover\"/>\n\nimport * as _ from 'underscore';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { Configuration } from '../../../Commons/Utilities/JavaScript/Configuration';\n\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\n\n// @class SocialSharing.Pinterest.Hover @extends ApplicationModule\nconst pinterestPluginHover: any = {\n    excludeFromMyAccount: true,\n    // @method shareInPinterest\n    // opens a new window to share the page in Pinterest\n    // based on some configuration options\n    shareInPinterest: function(url, image, description, popup_options) {\n        const popup_options_string = this.getPopupOptionsStringFromObject(\n            popup_options || Configuration.get('pinterest.popupOptions')\n        );\n        const target_url =\n            'http://pinterest.com/pin/create/button/?url=' +\n            encodeURIComponent(url) +\n            '&media=' +\n            encodeURIComponent(image) +\n            '&description=' +\n            encodeURIComponent(description);\n\n        window.open(target_url, _.uniqueId('window'), popup_options_string);\n    },\n\n    // @method shareInPinterestHoverEventListener\n    // calls shareInPinterestHoverEventListener method passing the configuration options\n    shareInPinterestHoverEventListener: function(e) {\n        e.preventDefault();\n\n        const image_size = Configuration.get('pinterest.imageSize');\n        const metaTagMappingOg = Configuration.get('metaTagMappingOg');\n        const url = metaTagMappingOg['og:url'](this);\n        let image =\n            jQuery('a.bx-pager-link.active')\n                .find('img')\n                .attr('src') ||\n            jQuery('a.bx-pager-link')\n                .eq(0)\n                .find('img')\n                .attr('src'); // selected image\n        const title = metaTagMappingOg['og:title'](this);\n\n        if (!image) {\n            image = jQuery('.product-details-image-gallery-detailed-image')\n                .find('img')\n                .attr('src');\n        }\n\n        image = this.getApplication().resizeImage(image.split('?')[0], image_size);\n\n        this.shareInPinterest(url, image, title);\n    },\n\n    mountToApp: function(application) {\n        if (Configuration.get('pinterest.enableHover')) {\n            const layout = application.getLayout();\n\n            // This are mostly related to the dom, or to events, so we add them in the layout\n            _.extend(layout, {\n                shareInPinterest: this.shareInPinterest\n            });\n\n            // extend Layout and add event listeners\n            _.extend(layout.events, {\n                'click [data-action=\"share-in-pinterest-hover\"]': this\n                    .shareInPinterestHoverEventListener\n            });\n\n            // @class SocialSharing.Pinterest.Plugin @extends Plugin\n            BackboneView.postRender.install({\n                name: 'pinterestPluginHover',\n                priority: 10,\n                execute: function($el) {\n                    if (!$el.find('[data-action=\"share-in-pinterest-hover\"]').length) {\n                        $el.find('[data-type=\"social-share-icons-hover\"]').append(\n                            '<a href=\"#\" class=\"social-sharing-flyout-content-social-pinterest\" data-action=\"share-in-pinterest-hover\"><i class=\"social-sharing-flyout-content-social-pinterest-icon\"></i> Pinit</a>'\n                        );\n                    }\n                }\n            });\n        }\n    }\n};\n\nexport = pinterestPluginHover;\n"]}
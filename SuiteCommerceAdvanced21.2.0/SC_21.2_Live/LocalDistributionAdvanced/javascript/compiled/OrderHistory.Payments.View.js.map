{"version":3,"sources":["OrderHistory.Payments.View.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;IAWF,0DAA0D;IAC1D,IAAM,wBAAwB,GAAQ,YAAY,CAAC,MAAM,CAAC;QACtD,gCAAgC;QAChC,QAAQ,EAAE,sBAAsB;QAEhC,UAAU,EAAE,UAAS,OAAO;YACxB,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;YACvC,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;YAC3B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;YACjC,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;QACzC,CAAC;QAED,UAAU,EAAE;YACR,mBAAmB,EAAE;gBACjB,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE;oBACjC,OAAO,IAAI,kCAAkC,CAAC;wBAC1C,KAAK,EAAE,IAAI,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;qBAC7D,CAAC,CAAC;iBACN;YACL,CAAC;SACJ;QAED,8CAA8C;QAC9C,UAAU,EAAE;YACR,IAAM,UAAU,GAAG,IAAI,CAAC,UAAU,KAAK,UAAU,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,CAAC;YACnF,IAAI,SAAS,GAAQ,EAAE,CAAC;YACxB,IAAI,IAAI,GAAG,EAAE,CAAC;YACd,IAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;YAEhD,QAAQ,UAAU,EAAE;gBAChB,KAAK,UAAU;oBACX,SAAS,GAAG,IAAI,CAAC,QAAQ,IAAI,UAAU,CAAC;oBACxC,IAAI,GAAG,UAAU;wBACb,CAAC,CAAC,IAAI,CAAC,QAAQ;4BACX,CAAC,CAAC,SAAS;4BACX,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC;wBAChD,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ;4BACjB,CAAC,CAAC,SAAS;4BACX,CAAC,CAAC,wBAAwB,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC;oBACrE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,EAAE,UAAU,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;oBACjF,IAAI,CAAC,KAAK,CAAC,GAAG,CACV,cAAc,EACd,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,CACvE,CAAC;oBACF,MAAM;gBACV,KAAK,iBAAiB;oBAClB,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;oBAC1B,IAAI,GAAG,IAAI,CAAC,QAAQ;wBAChB,CAAC,CAAC,SAAS;wBACX,CAAC,CAAC,sBAAsB,GAAG,UAAU,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;oBAC/E,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,cAAc,EAAE,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC;oBAC3D,MAAM;aACb;YAED,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,kCAAkC,CAAC;gBAC9C,CAAC,CAAC,KAAK;gBACP,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CACV,kCAAkC,EAClC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,kBAAkB,CAAC,CACrC,CAAC;YACR,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,CAAC;YACvC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAE7B,OAAO,IAAI,CAAC,KAAK,CAAC;QACtB,CAAC;QAED,wDAAwD;QACxD,UAAU,EAAE;YACR,4CAA4C;YAC5C,OAAO;gBACH,KAAK,EAAE,IAAI,CAAC,UAAU,EAAE;gBAExB,MAAM,EAAE,IAAI,CAAC,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,KAAK,CAAC;gBAEhD,UAAU,EAAE,IAAI,CAAC,KAAK,KAAK,CAAC;aAC/B,CAAC;QACN,CAAC;KACJ,CAAC,CAAC;IAEH,OAAS,wBAAwB,CAAC","file":"OrderHistory.Payments.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"OrderHistory.Payments.View\"/>\n\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as order_history_payments from 'order_history_payments.tpl';\n\nimport GlobalViewsFormatPaymentMethodView = require('../../../Commons/GlobalViews/JavaScript/GlobalViews.FormatPaymentMethod.View');\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\n\n// @class OrderHistory.Payments.View @extend Backbone.View\nconst OrderHistoryPaymentsView: any = BackboneView.extend({\n    // @property {Function} template\n    template: order_history_payments,\n\n    initialize: function(options) {\n        this.application = options.application;\n        this.index = options.index;\n        this.is_basic = options.is_basic;\n        this.recordtype = options.recordtype;\n    },\n\n    childViews: {\n        FormatPaymentMethod: function() {\n            if (this.model.get('paymentmethod')) {\n                return new GlobalViewsFormatPaymentMethodView({\n                    model: new Backbone.Model(this.model.get('paymentmethod'))\n                });\n            }\n        }\n    },\n\n    // @method formatData @return TransactionModel\n    formatData: function() {\n        const is_invoice = this.recordtype === 'CustInvc' || this.recordtype === 'invoice';\n        let hide_link: any = '';\n        let link = '';\n        const recordtype = this.model.get('recordtype');\n\n        switch (recordtype) {\n            case 'cashsale':\n                hide_link = this.is_basic && is_invoice;\n                link = is_invoice\n                    ? this.is_basic\n                        ? undefined\n                        : 'invoices/' + this.model.get('internalid')\n                    : (link = this.is_basic\n                          ? undefined\n                          : '/receiptshistory/view/' + this.model.get('internalid'));\n                this.model.set('dataType', is_invoice && !this.is_basic ? 'invoice' : 'receipt');\n                this.model.set(\n                    'paymentLabel',\n                    is_invoice ? Utils.translate('Invoice') : Utils.translate('Receipt')\n                );\n                break;\n            case 'customerpayment':\n                hide_link = this.is_basic;\n                link = this.is_basic\n                    ? undefined\n                    : '/transactionhistory/' + recordtype + '/' + this.model.get('internalid');\n                this.model.set('paymentLabel', Utils.translate('Payment'));\n                break;\n        }\n\n        this.model.get('appliedtoforeignamount_formatted')\n            ? false\n            : this.model.set(\n                  'appliedtoforeignamount_formatted',\n                  this.model.get('amount_formatted')\n              );\n        this.model.set('showLink', !hide_link);\n        this.model.set('link', link);\n\n        return this.model;\n    },\n\n    // @method getContext @return OrderHistory.Payments.View\n    getContext: function() {\n        // @class OrderHistory.Payments.View.Context\n        return {\n            model: this.formatData(),\n\n            isPair: this.index === 0 || this.index % 2 === 0,\n\n            firstChild: this.index === 0\n        };\n    }\n});\n\nexport = OrderHistoryPaymentsView;\n"]}
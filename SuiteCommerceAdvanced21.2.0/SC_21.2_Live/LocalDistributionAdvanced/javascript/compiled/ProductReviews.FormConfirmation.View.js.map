{"version":3,"sources":["ProductReviews.FormConfirmation.View.ts"],"names":[],"mappings":"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","file":"ProductReviews.FormConfirmation.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"ProductReviews.FormConfirmation.View\"/>\n\nimport * as _ from 'underscore';\nimport * as product_reviews_form_confirmation from 'product_reviews_form_confirmation.tpl';\nimport * as Utils from '../../Utilities/JavaScript/Utils';\n\nimport FacetsItemCellView = require('../../Facets/JavaScript/Facets.ItemCell.View');\nimport GlobalViewsStarRatingView = require('../../GlobalViews/JavaScript/GlobalViews.StarRating.View');\nimport Backbone = require('../../Utilities/JavaScript/backbone.custom');\nimport BackboneView = require('../../BackboneExtras/JavaScript/Backbone.View');\nimport BackboneCollectionView = require('../../Backbone.CollectionView/JavaScript/Backbone.CollectionView');\n\n// @class ProductReviews.FormConfirmation.View @extends Backbone.View\nexport = BackboneView.extend({\n    template: product_reviews_form_confirmation,\n\n    attributes: {\n        id: 'product-review-form-confirmation',\n        class: 'product-review-form-confirmation'\n    },\n\n    title: Utils.translate('Confirmation'),\n\n    confirmation_message: Utils.translate(\n        '<h2>Thank You!</h2><p>Your review has been submitted.</p>'\n    ),\n\n    initialize: function(options) {\n        this.product = options.product;\n        this.item = this.product.get('item');\n    },\n\n    // @method getBreadcrumb\n    getBreadcrumb: function() {\n        const result = this.item.get('_breadcrumb').slice(0);\n\n        // we add the new element to the breadcrumb array\n        result.push({\n            href: this.item.get('_url') + '/reviews',\n            text: Utils.translate('Reviews')\n        });\n\n        result.push({\n            href: this.item.get('_url') + '/reviews/new',\n            text: Utils.translate('Thank you')\n        });\n\n        return result;\n    },\n\n    childViews: {\n        'Global.StarRating': function() {\n            return new GlobalViewsStarRatingView({\n                model: this.model,\n                showRatingCount: false,\n                showLabelRating: true,\n                isReviewMode: true\n            });\n        },\n        'Global.StarRatingAttribute': function() {\n            const collection = new Backbone.Collection(\n                _.map(this.model.get('rating_per_attribute'), function(value, key) {\n                    return {\n                        label: key,\n                        rating: value\n                    };\n                })\n            );\n\n            return new BackboneCollectionView({\n                collection: collection,\n                childView: GlobalViewsStarRatingView,\n                childViewOptions: {\n                    showRatingCount: false,\n                    className: 'pegs text-center'\n                },\n                viewsPerRow: 1\n            });\n        },\n        'Facets.ItemCell': function() {\n            return new FacetsItemCellView({\n                model: this.product,\n                itemIsNavigable: false\n            });\n        }\n    },\n\n    // @method getContext\n    // @returns {ProductReviews.FormConfirmation.View.Context}\n    getContext: function() {\n        // @class ProductReviews.FormConfirmation.View.Context\n        return {\n            // @property {String} header\n            header: this.title,\n            // @property {String} confirmationMessage\n            confirmationMessage: this.confirmation_message,\n            // @property {String} productTitle\n            productTitle: this.item.get('_name'),\n            // @property {String} itemUrl\n            itemUrl: this.item.get('_url'),\n            // @property {String} reviewCreatedOn\n            reviewCreatedOn: this.model.get('created_on') || new Date().toDateString(),\n            // @property {String} reviewTitle\n            reviewTitle: this.model.get('title'),\n            // @property {String} reviewAuthor\n            reviewAuthor: this.model.get('writer').name || Utils.translate('anonymous'),\n            // @property {Boolean} isReviewVerified\n            isReviewVerified: !!this.model.get('isVerified'),\n            // @property {String} reviewText\n            reviewText: this.model.get('text')\n        };\n        // @class ProductReviews.FormConfirmation.View\n    }\n});\n"]}
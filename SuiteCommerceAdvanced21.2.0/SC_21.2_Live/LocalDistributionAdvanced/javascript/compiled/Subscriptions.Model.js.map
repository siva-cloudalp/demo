{"version":3,"sources":["Subscriptions.Model.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;;;IAeW,QAAA,kBAAkB,GAAQ,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC;QAC/D,6BAA6B;QAC7B,OAAO,EAAE,KAAK,CAAC,cAAc,CAAC,2BAA2B,EAAE,IAAI,CAAC;QAEhE,mCAAmC;QACnC,iEAAiE;QACjE,YAAY,EAAE,IAAI;QAElB,UAAU,EAAE;YACR,IAAI,CAAC,EAAE,CAAC,mCAAmC,EAAE,UAAS,KAAK,EAAE,KAAK;gBAC9D,IAAI,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE;oBAChB,KAAK,CAAC,GAAG,CAAC,4BAA4B,EAAE,IAAI,0BAA0B,CAAC,KAAK,CAAC,EAAE;wBAC3E,MAAM,EAAE,IAAI;qBACf,CAAC,CAAC;iBACN;YACL,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,EAAE,CAAC,kCAAkC,EAAE,UAAS,KAAK,EAAE,KAAK;gBAC7D,IAAI,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE;oBAChB,KAAK,CAAC,GAAG,CAAC,2BAA2B,EAAE,IAAI,0BAA0B,CAAC,KAAK,CAAC,EAAE;wBAC1E,MAAM,EAAE,IAAI;qBACf,CAAC,CAAC;iBACN;YACL,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,EAAE,CAAC,kCAAkC,EAAE,UAAS,KAAK,EAAE,KAAK;gBAC7D,IAAI,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE;oBAChB,KAAK,CAAC,GAAG,CAAC,2BAA2B,EAAE,IAAI,0BAA0B,CAAC,KAAK,CAAC,EAAE;wBAC1E,MAAM,EAAE,IAAI;qBACf,CAAC,CAAC;iBACN;YACL,CAAC,CAAC,CAAC;QACP,CAAC;QAED,UAAU,EAAE;YACR,IAAM,eAAe,GAAG,eAAe,CAAC;YAExC,OAAO,eAAe,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QAC1D,CAAC;QAED,cAAc,EAAE;YACZ,IAAI,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,oBAAoB,EAAE;gBACzE,OAAO,YAAY,CAAC;aACvB;iBAAM;gBACH,OAAO,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;aAC7B;QACL,CAAC;QAED,2BAA2B,EAAE,SAAS,2BAA2B,CAAC,UAAkB;YAChF,IAAM,mBAAmB,GAAG,EAAE,CAAC;YAC/B,mBAAmB,CAAC,IAAI,OAAxB,mBAAmB,EAAS,IAAI,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC,MAAM,EAAE;YAC3E,mBAAmB,CAAC,IAAI,OAAxB,mBAAmB,EAAS,IAAI,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC,MAAM,EAAE;YAC1E,mBAAmB,CAAC,IAAI,OAAxB,mBAAmB,EAAS,IAAI,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC,MAAM,EAAE;YAE1E,OAAO,CAAC,CAAC,IAAI,CAAC,mBAAmB,EAAE,UAAS,IAAI;gBAC5C,OAAO,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,UAAU,CAAC;YACjD,CAAC,CAAC,CAAC;QACP,CAAC;QAED,oBAAoB,EAApB,UAAqB,UAAkB;YACnC,OAAO,CAAC,CAAC,CAAC,WAAW,CACjB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC,MAAM,EAAE,UAAC,IAAS;gBAC3D,OAAO,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,UAAU,CAAC;YACjD,CAAC,CAAC,CACL,CAAC;QACN,CAAC;KACJ,CAAC,CAAC","file":"Subscriptions.Model.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Subscriptions.Model\"/>\n/// <reference path=\"../../../Commons/Utilities/JavaScript/GlobalDeclarations.d.ts\" />\n\nimport * as _ from 'underscore';\n\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\n\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\nimport SubscriptionLineCollection = require('./Subscriptions.Line.Collection');\n\n// @class Subscriptions.Model\n// Model for showing information about past orders @extend Transaction.Model\nexport type SubscriptionsModel = any;\nexport const SubscriptionsModel: any = Backbone.CachedModel.extend({\n    // @property {String} urlRoot\n    urlRoot: Utils.getAbsoluteUrl('services/Subscriptions.ss', true),\n\n    // @property {Boolean} cacheSupport\n    // enable or disable the support for cache (Backbone.CachedModel)\n    cacheSupport: true,\n\n    initialize: function() {\n        this.on('change:nonIncludedLinesCollection', function(model, lines) {\n            if (!!lines.length) {\n                model.set('nonIncludedLinesCollection', new SubscriptionLineCollection(lines), {\n                    silent: true\n                });\n            }\n        });\n\n        this.on('change:optionalSubscriptionLines', function(model, lines) {\n            if (!!lines.length) {\n                model.set('optionalSubscriptionLines', new SubscriptionLineCollection(lines), {\n                    silent: true\n                });\n            }\n        });\n\n        this.on('change:requiredSubscriptionLines', function(model, lines) {\n            if (!!lines.length) {\n                model.set('requiredSubscriptionLines', new SubscriptionLineCollection(lines), {\n                    silent: true\n                });\n            }\n        });\n    },\n\n    getTypeUrl: function() {\n        const record_root_url = '/subscription';\n\n        return record_root_url + '/' + this.get('internalId');\n    },\n\n    getStatusLabel: function() {\n        if (this.get('isProcessing') || this.get('status') === 'PENDING_ACTIVATION') {\n            return 'PROCESSING';\n        } else {\n            return this.get('status');\n        }\n    },\n\n    findLineInUnifiedCollection: function findLineInUnifiedCollection(internalId: number) {\n        const ALLCOLLECTIONSINONE = [];\n        ALLCOLLECTIONSINONE.push(...this.get('nonIncludedLinesCollection').models);\n        ALLCOLLECTIONSINONE.push(...this.get('optionalSubscriptionLines').models);\n        ALLCOLLECTIONSINONE.push(...this.get('requiredSubscriptionLines').models);\n\n        return _.find(ALLCOLLECTIONSINONE, function(item) {\n            return item.get('internalId') === internalId;\n        });\n    },\n\n    hasAddOnByLineNumber(lineNumber: number): boolean {\n        return !_.isUndefined(\n            _.find(this.get('optionalSubscriptionLines').models, (item: any) => {\n                return item.get('lineNumber') === lineNumber;\n            })\n        );\n    }\n});\n"]}
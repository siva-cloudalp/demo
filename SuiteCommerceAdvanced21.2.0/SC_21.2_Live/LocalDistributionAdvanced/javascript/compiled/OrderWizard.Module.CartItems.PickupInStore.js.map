{"version":3,"sources":["OrderWizard.Module.CartItems.PickupInStore.ts"],"names":[],"mappings":"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","file":"OrderWizard.Module.CartItems.PickupInStore.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"OrderWizard.Module.CartItems.PickupInStore\"/>\n\nimport '../../../Commons/Transaction.Line.Views/JavaScript/Transaction.Line.Views.Cell.Navigable.View';\nimport * as _ from 'underscore';\nimport '../../../Commons/Utilities/JavaScript/Utils';\nimport * as order_wizard_cartitems_module_pickup_in_store_tpl from 'order_wizard_cartitems_module_pickup_in_store.tpl';\nimport { Configuration } from '../../SCA/JavaScript/Configuration';\nimport { WizardStepModule } from '../../Wizard/JavaScript/Wizard.StepModule';\n\nimport BackboneCollectionView = require('../../../Commons/Backbone.CollectionView/JavaScript/Backbone.CollectionView');\nimport OrderWizardModuleCartItemsPickupInStorePackageView = require('./OrderWizard.Module.CartItems.PickupInStore.Package.View');\n\n// @class OrderWizard.Module.CartItems.PickupInStore @extends Wizard.Module\nexport = WizardStepModule.extend({\n    // @property {Function} template\n    template: order_wizard_cartitems_module_pickup_in_store_tpl,\n\n    initialize: function() {\n        const self = this;\n\n        WizardStepModule.prototype.initialize.apply(this, arguments);\n        this.wizard.model.on('ismultishiptoUpdated', function() {\n            self.render();\n        });\n\n        this.wizard.model.on('promocodeUpdated', function() {\n            self.render();\n        });\n\n        this.wizard.model.on('change:lines', function() {\n            self.lines = self.wizard.model.getPickupInStoreLines();\n            self.render();\n        });\n\n        this.lines = this.model.getPickupInStoreLines();\n\n        this.options = this.options || {};\n\n        this.options.exclude_on_skip_step = true;\n    },\n\n    isActive: function isActive() {\n        return Configuration.get('siteSettings.isPickupInStoreEnabled') && this.lines.length;\n    },\n\n    // @property {Object} childViews\n    childViews: {\n        'Packages.Collection': function() {\n            const lines_for_pickup = this.model.getPickupInStoreLines();\n            let lines_by_location: any = _.groupBy(lines_for_pickup, function(line: any) {\n                return line.get('location');\n            });\n            lines_by_location = _.map(lines_by_location, function(lines, location_id) {\n                return {\n                    lines: lines,\n                    location: location_id\n                };\n            });\n\n            return new BackboneCollectionView({\n                collection: lines_by_location,\n                childView: OrderWizardModuleCartItemsPickupInStorePackageView,\n                viewsPerRow: 1,\n                childViewOptions: {\n                    hide_location: this.options.hide_location,\n                    show_opened_accordion: this.options.show_opened_accordion,\n                    show_edit_cart_button: this.options.show_edit_cart_button,\n                    show_headers: this.options.show_headers,\n                    show_mobile: this.options.show_mobile,\n                    application: this.wizard.application\n                }\n            });\n        }\n    },\n\n    // @method render\n    render: function() {\n        this.application = this.wizard.application;\n        this.profile = this.wizard.options.profile;\n        this.options.application = this.wizard.application;\n\n        if (this.isActive()) {\n            this._render();\n        }\n    }\n});\n"]}
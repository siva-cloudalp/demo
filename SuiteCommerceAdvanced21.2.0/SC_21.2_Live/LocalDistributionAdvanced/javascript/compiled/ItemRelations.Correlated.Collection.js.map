{"version":3,"sources":["ItemRelations.Correlated.Collection.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;IASF,sEAAsE;IACtE,IAAM,iCAAiC,GAAQ,cAAc,CAAC,MAAM,CAAC;QACjE,UAAU,EAAE,UAAS,OAAO;YACxB,IAAI,CAAC,sBAAsB,GAAG,yCAAmB,CAAC,wBAAwB,CAAC,iBAAiB,CAAC,CAAC;YAC9F,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC;gBACvC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,UAAS,EAAE;oBAClC,OAAO,EAAE,CAAC;gBACd,CAAC,CAAC;gBACJ,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAC7B,CAAC;QAED,+CAA+C;QAC/C,UAAU,EAAE;YACR,OAAO,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;QACjE,CAAC;QAED,qCAAqC;QACrC,KAAK,EAAE,UAAS,QAAQ;YACpB,IAAM,cAAc,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;YACvD,IAAM,IAAI,GAAG,IAAI,CAAC;YAClB,IAAM,KAAK,GAAG,EAAE,CAAC;YAEjB,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,cAAc,EAAE,wBAAwB,CAAC,EAAE,UAAS,gBAAqB;gBACpF,CAAC,CAAC,IAAI,CAAC,gBAAgB,EAAE,UAAS,eAAoB;oBAClD,IACI,IAAI;wBACJ,IAAI,CAAC,QAAQ;wBACb,eAAe;wBACf,KAAK;wBACL,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,eAAe,CAAC,UAAU,CAAC;wBACtD,CAAC,KAAK,CAAC,eAAe,CAAC,UAAU,CAAC,EACpC;wBACE,KAAK,CAAC,eAAe,CAAC,UAAU,CAAC,GAAG,eAAe,CAAC;qBACvD;gBACL,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;YAEH,OAAO,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC;KACJ,CAAC,CAAC;IAEH,OAAS,iCAAiC,CAAC","file":"ItemRelations.Correlated.Collection.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"ItemRelations.Correlated.Collection\"/>\n\nimport * as _ from 'underscore';\nimport { MasterOptionsHelper } from '../../SC/JavaScript/MasterOptionsHelper';\n\nimport ItemCollection = require('../../Item/JavaScript/Item.Collection');\n\n// @class ItemRelations.Correlated.Collection @extends Item.Collection\nconst ItemRelationsCorrelatedCollection: any = ItemCollection.extend({\n    initialize: function(options) {\n        this.searchApiMasterOptions = MasterOptionsHelper.getSearchAPIMasterOption('correlatedItems');\n        this.itemsIds = _.isArray(options.itemsIds)\n            ? _.sortBy(options.itemsIds, function(id) {\n                  return id;\n              })\n            : [options.itemsIds];\n    },\n\n    // @method fetchItems @return {jQuery.Deferred}\n    fetchItems: function() {\n        return this.fetch({ data: { id: this.itemsIds.join(',') } });\n    },\n\n    // http://backbonejs.org/#Model-parse\n    parse: function(response) {\n        const original_items = _.compact(response.items) || [];\n        const self = this;\n        const items = {};\n\n        _.each(_.pluck(original_items, 'correlateditems_detail'), function(correlated_items: any) {\n            _.each(correlated_items, function(correlated_item: any) {\n                if (\n                    self &&\n                    self.itemsIds &&\n                    correlated_item &&\n                    items &&\n                    !_.contains(self.itemsIds, correlated_item.internalid) &&\n                    !items[correlated_item.internalid]\n                ) {\n                    items[correlated_item.internalid] = correlated_item;\n                }\n            });\n        });\n\n        return _.toArray(items);\n    }\n});\n\nexport = ItemRelationsCorrelatedCollection;\n"]}
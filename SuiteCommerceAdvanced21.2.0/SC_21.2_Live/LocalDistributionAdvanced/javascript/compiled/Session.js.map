{"version":3,"sources":["Session.ts"],"names":[],"mappings":"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","file":"Session.js","sourcesContent":["/*\n\t© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Session\"/>\n// ! © 2015 NetSuite Inc.\n// Session.js\n// -------------\n//\n\nimport * as _ from 'underscore';\n\nimport * as Utils from '../../Utilities/JavaScript/Utils';\n\nconst Session: any = {\n    get: function(path, default_value) {\n        const session_info = (SC && SC.getSessionInfo && SC.getSessionInfo()) || {};\n        return Utils.getPathFromObject(session_info, path, default_value);\n    },\n\n    set: function(path, value) {\n        const session_info = (SC && SC.getSessionInfo && SC.getSessionInfo()) || {};\n        session_info[path] = value;\n    },\n\n    getSearchApiParams: function() {\n        const search_api_params: any = {};\n        const locale = this.get('language.locale', '');\n        let language = '';\n        let country = '';\n        const currency = this.get('currency.code', '')\n            ? this.get('currency.code', '')\n            : this.get('currency', '') || SC.ENVIRONMENT.currencyCodeSpecifiedOnUrl;\n\n        if (~locale.indexOf('_')) {\n            const locale_tokens = locale.split('_');\n            language = locale_tokens[0];\n            country = locale_tokens[1];\n        } else {\n            language = locale;\n        }\n\n        // SET API PARAMS\n        if (language) {\n            search_api_params.language = language;\n        }\n\n        if (country) {\n            search_api_params.country = country;\n        }\n\n        // Currency\n        if (currency) {\n            search_api_params.currency = currency;\n        }\n\n        // Price Level\n        search_api_params.pricelevel = this.get('priceLevel', '');\n\n        // No cache\n        if (Utils.parseUrlOptions(location.search).nocache === 'T') {\n            search_api_params.nocache = 'T';\n        }\n\n        // Use PCV\n        search_api_params.use_pcv =\n            SC &&\n            SC.ENVIRONMENT &&\n            SC.ENVIRONMENT.siteSettings &&\n            SC.ENVIRONMENT.siteSettings.isPersonalizedCatalogViewsEnabled\n                ? 'T'\n                : 'F';\n\n        if (SC && SC.ENVIRONMENT && SC.ENVIRONMENT.pcvGroups) {\n            search_api_params.pcv_groups = SC.ENVIRONMENT.pcvGroups;\n        }\n\n        if (SC && SC.ENVIRONMENT && SC.ENVIRONMENT.pcvAllItems) {\n            search_api_params.pcv_all_items = SC.ENVIRONMENT.pcvAllItems;\n        }\n\n        return search_api_params;\n    }\n};\n\nexport = Session;\n"]}
{"version":3,"sources":["GoogleMap.ts"],"names":[],"mappings":"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","file":"GoogleMap.js","sourcesContent":["/*\n\t© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"GoogleMap\"/>\n/// <reference path=\"../../../Commons/Utilities/JavaScript/GlobalDeclarations.d.ts\" />\n// @module StoreLocatorReferenceMapImplementation @class GoogleMap\n\nimport * as _ from 'underscore';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\n\nimport PromiseHandler = require('../../StoreLocatorReferenceMapImplementation/JavaScript/ReferenceMap.Promise.Handler');\nimport StoreLocatorTooltip = require('../../StoreLocator/JavaScript/StoreLocator.Tooltip.View');\nimport ReferenceMap = require('../../StoreLocatorReferenceMapImplementation/JavaScript/ReferenceMap');\n\nfunction getMapZoom(configuration, detailPoint) {\n    let { zoom } = configuration.mapOptions();\n    if (detailPoint) {\n        zoom = configuration.zoomInDetails();\n    }\n    return zoom;\n}\n\nReferenceMap.prototype.isInitialized = function isInitialized() {\n    return typeof google === 'object' && typeof google.maps === 'object';\n};\n\nReferenceMap.prototype.load = function load() {\n    const url = this.configuration.getUrl();\n    const handler = PromiseHandler;\n\n    if (!handler.getPromise() && !this.isInitialized()) {\n        const promise = jQuery.getScript(url).done(function() {\n            ReferenceMap.prototype.initialized = true;\n        });\n        this.load_promise = promise;\n        handler.setPromise(promise);\n    }\n\n    return handler.getPromise();\n};\n\nReferenceMap.prototype.showMap = function showMap(container) {\n    const map_configuration = this.configuration.mapOptions();\n    const map_options = {\n        center: new google.maps.LatLng(\n            map_configuration.centerPosition.latitude,\n            map_configuration.centerPosition.longitude\n        ),\n        zoom: map_configuration.zoom,\n        mapTypeControl: map_configuration.mapTypeControl,\n        streetViewControl: map_configuration.streetViewControl,\n        mapTypeId: google.maps.MapTypeId[map_configuration.mapTypeId],\n        disableDefaultUI: true\n    };\n\n    const map = new google.maps.Map(container, map_options);\n\n    const self = this;\n\n    google.maps.event.addListener(map, 'tilt_changed', () => {\n        google.maps.event.addListenerOnce(map, 'idle', () => {\n            map.setZoom(getMapZoom(this.configuration, this.detail_point));\n        });\n\n        if (this.points.length) {\n            this.fitBounds(map);\n        } else if (this.detail_point) {\n            this.fitBounds(map);\n\n            map.setCenter(map.getCenter());\n\n            map.setZoom(getMapZoom(this.configuration, this.detail_point));\n        } else {\n            this.centerMapToDefault(map);\n        }\n\n        google.maps.event.trigger(map, 'resize');\n    });\n\n    this.map = map;\n\n    return map;\n};\n\nReferenceMap.prototype.centerMapToDefault = function centerMapToDefault(map) {\n    map = this.map || map;\n\n    if (!map) {\n        return;\n    }\n\n    map.myPositionMarker && map.myPositionMarker.setMap(null);\n\n    const map_options = this.configuration.mapOptions();\n\n    map.setZoom(getMapZoom(this.configuration, this.detail_point));\n\n    map.setCenter(\n        new google.maps.LatLng(\n            parseFloat(map_options.centerPosition.latitude),\n            parseFloat(map_options.centerPosition.longitude)\n        )\n    );\n};\n\nReferenceMap.prototype.getInfoWindow = function getInfoWindow() {\n    if (!this.infowindow) {\n        this.infowindow = new google.maps.InfoWindow();\n    }\n\n    return this.infowindow;\n};\n\nReferenceMap.prototype.getTooltip = function getTooltip(model, index) {\n    if (!this.tooltip) {\n        this.tooltip = new StoreLocatorTooltip({\n            model: model,\n            index: index\n        });\n    } else {\n        this.tooltip.index = index;\n        this.tooltip.model = model;\n    }\n    return this.tooltip;\n};\n\nReferenceMap.prototype.showPoint = function showPoint(point, map) {\n    map = map || this.map;\n\n    if (!map) {\n        return;\n    }\n\n    const location = point.get('location');\n    const marker = new google.maps.Marker({\n        store_id: point.get('internalid'),\n        icon: this.configuration.iconOptions('stores'),\n        map: map\n    });\n\n    marker.setPosition(new google.maps.LatLng(location.latitude, location.longitude));\n    marker.setVisible(true);\n\n    marker.addListener(\n        'click',\n        _.bind(function() {\n            this.showInfoWindowOnClick(marker, map);\n        }, this)\n    );\n\n    return marker;\n};\n\nReferenceMap.prototype.showPointWithoutInfoWindow = function showPointWithoutInfoWindow(\n    point,\n    map\n) {\n    map = map || this.map;\n\n    if (!map) {\n        return;\n    }\n\n    const location = point.get('location');\n    const marker = new google.maps.Marker({\n        store_id: point.get('internalid'),\n        icon: this.configuration.iconOptions('stores'),\n        map: map\n    });\n\n    marker.setPosition(new google.maps.LatLng(location.latitude, location.longitude));\n\n    marker.setVisible(true);\n\n    this.detail_point = marker;\n\n    return marker;\n};\n\nReferenceMap.prototype.showInfoWindowOnClick = function showInfoWindowOnClick(marker, map) {\n    const point = this.collection.find({ internalid: marker.store_id });\n    const index = this.collection.indexOf(point) + 1;\n\n    this.showInfoWindow(marker, point, index, map);\n};\n\nReferenceMap.prototype.showInfoWindow = function showInfoWindow(marker, model, index, map) {\n    map = map || this.map;\n\n    if (!map) {\n        return;\n    }\n\n    const tooltip = this.getTooltip(model, index);\n    const info_window = this.getInfoWindow();\n\n    info_window.setContent(tooltip.template(tooltip.getContext()));\n\n    info_window.open(map, marker);\n};\n\nReferenceMap.prototype.showMyPosition = function showMyPosition(position, map) {\n    position = position || this.myposition;\n\n    map = map || this.map;\n\n    if (!position || !map) {\n        return;\n    }\n\n    if (map.myPositionMarker) {\n        map.myPositionMarker.setMap(null);\n    }\n\n    map.myPositionMarker = new google.maps.Marker({\n        icon: this.configuration.iconOptions('position'),\n        map: map\n    });\n\n    position.location =\n        position.location || new google.maps.LatLng(position.latitude, position.longitude);\n\n    map.myPositionMarker.setPosition(position.location);\n\n    map.myPositionMarker.setVisible(true);\n\n    google.maps.event.addListenerOnce(map, 'idle', () => {\n        map.setZoom(getMapZoom(this.configuration, this.detail_point));\n    });\n\n    if (position.viewport) {\n        map.fitBounds(position.viewport);\n    } else {\n        map.setCenter(position.location);\n        map.setZoom(getMapZoom(this.configuration, this.detail_point));\n    }\n\n    return map.myPositionMarker;\n};\n\nReferenceMap.prototype.removePoint = function removePoint(point) {\n    point.setMap(null);\n};\n\nReferenceMap.prototype.showAutoCompleteInput = function showAutoCompleteInput(input) {\n    const self = this;\n\n    if (input) {\n        this.autocomplete = new google.maps.places.SearchBox(input);\n\n        google.maps.event.addListener(this.autocomplete, 'places_changed', function() {\n            self.autocompleteChange();\n\n            self.trigger('change:places', self.autocomplete.getPlaces());\n        });\n    }\n\n    return this.autocomplete;\n};\n\nReferenceMap.prototype.autocompleteChange = function autocompleteChange() {\n    const place =\n        this.autocomplete && this.autocomplete.getPlaces() && this.autocomplete.getPlaces()[0];\n\n    if (!place || _.size(place) === 0) {\n        console.warn('Autocomplete returned place contains no geometry');\n        return;\n    }\n\n    if (!place.geometry) {\n        console.warn('Autocomplete returned place contains no geometry');\n        return;\n    }\n    // set autocomplete coordinates\n    if (place.geometry.location) {\n        this.setPosition({\n            latitude: place.geometry.location.lat(),\n            longitude: place.geometry.location.lng(),\n            address: place.formatted_address,\n            viewport: place.geometry.viewport,\n            location: place.geometry.location\n        });\n    }\n};\n\nReferenceMap.prototype.fitBounds = function fitBounds(map) {\n    map = map || this.map;\n\n    if (!map) {\n        return;\n    }\n\n    const bounds = new google.maps.LatLngBounds();\n\n    _.each(this.points, function(point: any) {\n        const location = point.getPosition();\n        bounds.extend(new google.maps.LatLng(location.lat(), location.lng()));\n    });\n\n    if (!_.isUndefined(this.myposition.latitude) && !_.isUndefined(this.myposition.longitude)) {\n        bounds.extend(new google.maps.LatLng(this.myposition.latitude, this.myposition.longitude));\n    }\n\n    if (this.detail_point) {\n        bounds.extend(\n            new google.maps.LatLng(\n                this.detail_point.position.lat(),\n                this.detail_point.position.lng()\n            )\n        );\n    }\n\n    map.fitBounds(bounds);\n};\n\nReferenceMap.prototype.getCityGeoCode = function getCityGeoCode() {\n    const promise = jQuery.Deferred();\n    const geoCoder = new google.maps.Geocoder();\n    const position = this.myposition;\n    const latlng = { lat: parseFloat(position.latitude), lng: parseFloat(position.longitude) };\n    const self = this;\n\n    geoCoder.geocode({ location: latlng }, function(results, status) {\n        if (status === google.maps.GeocoderStatus.OK) {\n            const city = _(results).find(function(result) {\n                return !_.indexOf(result.types, 'locality');\n            });\n\n            if (city) {\n                self.myposition.address = city.formatted_address;\n            } else {\n                self.myposition.address = results[0].formatted_address;\n            }\n\n            self.trigger('change:position', self.myposition);\n\n            promise.resolve();\n        } else {\n            (<any>promise).always();\n            console.warn(`Geocoder failed due to: ${status}`);\n        }\n    });\n\n    return promise;\n};\n\nReferenceMap.prototype.zoomToPoint = function zoomToPoint(marker, map) {\n    map = map || this.map;\n\n    if (!map) {\n        return;\n    }\n\n    map.setZoom(getMapZoom(this.configuration, this.detail_point));\n    map.panTo(marker.position);\n};\n\nReferenceMap.prototype.getDirectionsUrl = function getDirectionsUrl(source, destination) {\n    const source_parameter = source ? `${source.latitude},${source.longitude}` : 'Current+Location';\n    const destination_parameter = `${destination && destination.latitude},${destination &&\n        destination.longitude}`;\n\n    return `https://maps.google.com?saddr=${source_parameter}&daddr=${destination_parameter}`;\n};\n"]}
{"version":3,"sources":["SC.Shopping.Starter.ts"],"names":[],"mappings":"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","file":"SC.Shopping.Starter.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"SC.Shopping.Starter\"/>\n\n// ---------------MIXINS-----------------\nimport '../../../Commons/NativesExtras/JavaScript/String.format';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\n// ---------------END-----------------\nimport { Shopping } from './SC.Shopping';\nimport { Environment } from '../../../Commons/Core/JavaScript/Environment';\nimport { entryPointModules } from './SC.Shopping.Starter.Dependencies';\n\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\nimport extensionsPromise = require('../../../Commons/SC.Extensions/JavaScript/SC.Extensions');\n\nconst shoppingApp = Shopping.getInstance();\n\nlet allEntryPointModules = [];\nfunction startShopping(): void {\n    const SC = Environment.getSC();\n\n    // we don't want to start the application if it is served externally,\n    // like in google cached pages.\n    if (SC.isCrossOrigin()) {\n        // an user seeing the page in cache.google with js enabled won't\n        // see the images unless we unwrap it:\n        jQuery('noscript').each(function(): void {\n            jQuery(this)\n                .parent()\n                .append(jQuery(this).text());\n        });\n        return;\n    }\n\n    // The page generator needs to run in sync in order to work properly\n    if (SC.isPageGenerator()) {\n        jQuery.ajaxSetup({ async: false });\n    }\n\n    (<any>jQuery).fn.modal.Constructor.BACKDROP_TRANSITION_DURATION = 0; // This is in order to prevent Quick View redrawing issues\n\n    // When the document is ready we call the application.start,\n    // and once that's done we bootstrap and start backbone\n    shoppingApp.start(allEntryPointModules, function(): void {\n        // Checks for errors in the context\n        if (SC.ENVIRONMENT.contextError) {\n            // Hide the header and footer.\n            shoppingApp\n                .getLayout()\n                .$('#site-header')\n                .hide();\n            shoppingApp\n                .getLayout()\n                .$('#site-footer')\n                .hide();\n\n            // Shows the error.\n            shoppingApp\n                .getLayout()\n                .internalError(\n                    SC.ENVIRONMENT.contextError.errorMessage,\n                    `Error ${SC.ENVIRONMENT.contextError.errorStatusCode}: ${\n                        SC.ENVIRONMENT.contextError.errorCode\n                    }`\n                );\n        } else {\n            const { fragment } = Utils.parseUrlOptions(location.search);\n\n            if (fragment && !location.hash) {\n                location.hash = decodeURIComponent(fragment.toString());\n            }\n\n            if (shoppingApp.getUser) {\n                shoppingApp.getUser().done(function(): void {\n                    // Only do push state client side.\n                    Backbone.history.start({\n                        pushState: !SC.isDevelopment && SC.ENVIRONMENT.jsEnvironment === 'browser'\n                    });\n                });\n            } else {\n                // Only do push state client side.\n                Backbone.history.start({\n                    pushState: !SC.isDevelopment && SC.ENVIRONMENT.jsEnvironment === 'browser'\n                });\n            }\n        }\n\n        shoppingApp.getLayout().appendToDom();\n    });\n}\n\n// If the UA is google and main div is not empty (was pre-rendered) then avoid the starter execution\nif (\n    !navigator.userAgent.match(/googlebot/i) ||\n    !jQuery('#main') ||\n    !String(jQuery('#main').html()).trim()\n) {\n    jQuery(document).ready(function(): void {\n        extensionsPromise.then(function(...entryPointExtensionsModules): void {\n            // At starting time all the modules Array is initialized\n            allEntryPointModules = entryPointModules.concat(entryPointExtensionsModules);\n            startShopping();\n        });\n    });\n}\n"]}
{"version":3,"sources":["BrontoIntegration.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;;;IAQF;;;;;;;MAOE;IAEF,gCAAgC;IACnB,QAAA,UAAU,GAAG,EAAE,CAAC;IAC7B,gCAAgC;IACnB,QAAA,UAAU,GAAG,EAAE,CAAC;IAC7B,oCAAoC;IACpC,SAAgB,UAAU;QACtB,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,CACjB,MAAM,CACF,mBAAgB,IAAI,CAAC,UAAU,sCAC3B,IAAI,CAAC,UAAU,iBACN,CAChB,CACJ,CAAC;IACN,CAAC;IARD,gCAQC;IACD,oCAAoC;IACpC,SAAgB,UAAU,CAAC,WAAW;QAClC,IAAI,EAAE,CAAC,WAAW,CAAC,aAAa,KAAK,SAAS,EAAE;YAC5C,IAAM,aAAa,GAAG,6BAAa,CAAC,MAAM,CAAC;YAE3C,IAAI,aAAa,IAAI,aAAa,CAAC,SAAS,EAAE;gBAC1C,IAAI,CAAC,UAAU,GAAG,aAAa,CAAC,SAAS,CAAC;gBAC1C,IAAI,CAAC,UAAU,GAAG,aAAa,CAAC,UAAU,CAAC;gBAC3C,WAAW,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,iBAAiB,EAAE,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC,CAAC;aACrF;SACJ;IACL,CAAC;IAVD,gCAUC","file":"BrontoIntegration.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"BrontoIntegration\"/>\n/// <reference path=\"../../../Commons/Utilities/JavaScript/GlobalDeclarations.d.ts\" />\n\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { Configuration } from '../../SCA/JavaScript/Configuration';\n\n/*\n@class BrontoIntegration\n\nLoads Bronto Adapter script once on afterAppendView if it runs on the browser and the Bronto instanceId is set in the Configuration\n\nloadScript() appends the Bronto adapter script based on the configuration (instance id and adapter url). data-bronto-integrations attribute is set to the instance id\nmountToApp() runs only on the browser and if the Bronto account id is set, attaches the loadScript to once afterAppendView\n*/\n\n// @property {String} instanceId\nexport const instanceId = '';\n// @property {String} adapterUrl\nexport const adapterUrl = '';\n// @method loadScript @return {Void}\nexport function loadScript() {\n    jQuery('body').append(\n        jQuery(\n            `<script src=\"${this.adapterUrl}\" data-bronto-integrations=\"${\n                this.instanceId\n            }\"></script>`\n        )\n    );\n}\n// @method mountToApp @return {Void}\nexport function mountToApp(application) {\n    if (SC.ENVIRONMENT.jsEnvironment === 'browser') {\n        const bronto_config = Configuration.bronto;\n\n        if (bronto_config && bronto_config.accountId) {\n            this.instanceId = bronto_config.accountId;\n            this.adapterUrl = bronto_config.adapterUrl;\n            application.getLayout().once('afterAppendView', jQuery.proxy(this, 'loadScript'));\n        }\n    }\n}\n"]}
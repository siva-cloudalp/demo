{"version":3,"sources":["Facets.FacetsDisplay.View.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;IAWF,OAAS,YAAY,CAAC,MAAM,CAAC;QACzB,QAAQ,EAAE,yBAAyB;QAEnC,iEAAiE;QACjE,UAAU,EAAE;YACA,IAAA,MAAM,GAAK,IAAI,CAAC,OAAO,OAAjB,CAAkB;YACxB,IAAA,UAAU,GAAK,IAAI,CAAC,OAAO,WAAjB,CAAkB;YAEpC,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,UAAS,KAAU;gBAC9B,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACvE,CAAC,CAAC,CAAC;YAEH,IAAM,YAAY,GAAG,EAAE,CAAC;YAExB,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,UAAS,KAAU;gBACtB,IAAA,MAAM,GAAK,KAAK,CAAC,MAAM,OAAjB,CAAkB;gBAEhC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,UAAS,KAAU;oBACnC,IAAM,IAAI,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;oBACjD,IAAM,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;oBAE7C,IAAM,UAAU,GAAG;wBACf,kBAAkB,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC;wBACrC,IAAI,EAAE,IAAI,IAAI,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI;wBAC1C,EAAE,EAAE,EAAE,IAAI,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE;wBAClC,UAAU,EAAE,UAAU,CAAC,gBAAgB,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC;wBACxD,aAAa,EAAE,UAAU,CAAC,eAAe,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC,MAAM,EAAE;wBACnE,UAAU,EAAE,KAAK,CAAC,KAAK;qBAC1B,CAAC;oBAEF,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBAClC,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;YAEH,2CAA2C;YAC3C,OAAO;gBACH,gCAAgC;gBAChC,SAAS,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC;gBAE5B,wCAAwC;gBACxC,kBAAkB,EAAE,UAAU,CAAC,kBAAkB,EAAE,CAAC,MAAM,EAAE;gBAE5D,2BAA2B;gBAC3B,MAAM,EAAE,YAAY;aACvB,CAAC;YACF,mCAAmC;QACvC,CAAC;KACJ,CAAC,CAAC","file":"Facets.FacetsDisplay.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Facets.FacetsDisplay.View\"/>\n\nimport * as _ from 'underscore';\n\nimport * as facets_facets_display_tpl from 'facets_facets_display.tpl';\n\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\n\n// @module Facets\nexport = BackboneView.extend({\n    template: facets_facets_display_tpl,\n\n    // @method getContext @return {Facets.FacetsDisplay.View.Context}\n    getContext: function() {\n        const { facets } = this.options;\n        const { translator } = this.options;\n\n        _.each(facets, function(facet: any) {\n            facet.value = _.isArray(facet.value) ? facet.value : [facet.value];\n        });\n\n        const facet_values = [];\n\n        _.each(facets, function(facet: any) {\n            const { parser } = facet.config;\n\n            _.each(facet.value, function(value: any) {\n                const from = _.isObject(value) ? value.from : '';\n                const to = _.isObject(value) ? value.to : '';\n\n                const value_data = {\n                    facetValueIsObject: _.isObject(value),\n                    from: from && parser ? parser(from) : from,\n                    to: to && parser ? parser(to) : to,\n                    valueLabel: translator.getLabelForValue(facet.id, value),\n                    facetValueUrl: translator.cloneForFacetId(facet.id, value).getUrl(),\n                    facetValue: facet.value\n                };\n\n                facet_values.push(value_data);\n            });\n        });\n\n        // @class Facets.FacetsDisplay.View.Context\n        return {\n            // @property {Boolean} hasFacets\n            hasFacets: facets.length > 0,\n\n            // @property {String} clearAllFacetsLink\n            clearAllFacetsLink: translator.cloneWithoutFacets().getUrl(),\n\n            // @property {Array} values\n            values: facet_values\n        };\n        // @class Facets.FacetsDisplay.View\n    }\n});\n"]}
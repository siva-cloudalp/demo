{"version":3,"sources":["Subscriptions.AddOn.Quantity.Amount.View.ts"],"names":[],"mappings":"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","file":"Subscriptions.AddOn.Quantity.Amount.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Subscriptions.AddOn.Quantity.Amount.View\"/>\n// Subscriptions.AddOn.Quantity.Amount.View.js\n// -----------------------\n\nimport * as _ from 'underscore';\nimport * as template from 'subscriptions_addon_quantity_amount.tpl';\n\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\n\nconst SubscriptionsAddOnQuantityAmountView: any = BackboneView.extend({\n    template: template,\n\n    events: {\n        'click [data-action=\"plus\"]': 'addQuantity',\n        'click [data-action=\"minus\"]': 'subQuantity',\n        'change [data-type=\"quantity-input\"]': 'changeQuantity',\n        'keypress [data-type=\"quantity-input\"]': 'changeQuantity'\n    },\n\n    initialize: function() {\n        this.$('[data-type=\"quantity-input\"]').value = this.model.get('quantity');\n    },\n\n    // @method addQuantity Add 1 the current to quantity-input field\n    // @param {jQuery.Event} e\n    // @return {Void}\n    addQuantity: function(e) {\n        e.preventDefault();\n\n        const old_quantity = parseInt(this.$('[data-type=\"quantity-input\"]').val(), 10);\n        this.new_quantity = old_quantity + 1;\n\n        if (this.new_quantity !== old_quantity) {\n            const $element = this.$(e.target);\n            const quantity_input = $element.parent().find('input');\n\n            quantity_input.val(this.new_quantity);\n            quantity_input.change();\n\n            this.setQuantity();\n        }\n    },\n\n    // @method subQuantity Subtracts 1 from quantity-input field\n    // @param {jQuery.Event} e\n    // @return {Void}\n    subQuantity: function(e) {\n        e.preventDefault();\n\n        const old_quantity = parseInt(this.$('[data-type=\"quantity-input\"]').val(), 10);\n        this.new_quantity = old_quantity - 1;\n\n        if (this.new_quantity !== old_quantity && this.new_quantity >= 1) {\n            const $element = this.$(e.target);\n            const quantity_input = $element.parent().find('input');\n\n            quantity_input.val(this.new_quantity);\n            quantity_input.change();\n\n            this.setQuantity();\n        }\n    },\n\n    // @method changeQuantity Debounce callings to setQuantity function to prevent losing focus\n    // @param {jQuery.Event} e\n    // @return {Void}\n    changeQuantity: _.debounce(function() {\n        this.setQuantity();\n    }, 1000),\n\n    // @method setQuantity Updates the model quantity and the input field.\n    // @return {Void}\n    setQuantity: function() {\n        const str_quantity = this.$('[data-type=\"quantity-input\"]').val();\n\n        const quantity = Math.round(parseFloat(str_quantity));\n\n        if (!_.isNaN(quantity) && _.isNumber(quantity) && quantity > 0) {\n            this.isMinusButtonDisabled = quantity <= 1;\n            if (!this.model.has('initialQuantity')) {\n                this.model.set('initialQuantity', this.model.get('quantity'));\n            }\n            this.model.set('quantity', quantity);\n        }\n    },\n    // @method getContext @returns {Overview.Banner.View.Context}\n    getContext: function() {\n        // @class Overview.Banner.View.Context\n        return {\n            // @property {bool} isMinusButtonDisabled\n            isMinusButtonDisabled: this.isMinusButtonDisabled,\n            quantity: this.model.get('quantity'),\n            isReadOnly: this.model.isReadOnly()\n        };\n    }\n});\n\nexport = SubscriptionsAddOnQuantityAmountView;\n"]}
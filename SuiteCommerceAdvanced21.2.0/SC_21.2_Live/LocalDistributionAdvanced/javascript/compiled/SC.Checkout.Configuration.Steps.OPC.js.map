{"version":3,"sources":["SC.Checkout.Configuration.Steps.OPC.ts"],"names":[],"mappings":"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","file":"SC.Checkout.Configuration.Steps.OPC.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"SC.Checkout.Configuration.Steps.OPC\"/>\n\n// @class SC.Checkout.Configuration.Steps.OPC\n// The configuration steps so the Checkout wizard shows the One Page Checkout experience\nimport * as _ from 'underscore';\nimport '../../OrderWizard.Module.CartItems/JavaScript/OrderWizard.Module.CartItems';\n\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { CheckoutStepGroup } from './CheckoutStepsFactory';\n\nimport OrderWizardModuleMultiShipToEnableLink = require('../../OrderWizard.Module.MultiShipTo.EnableLink/JavaScript/OrderWizard.Module.MultiShipTo.EnableLink');\nimport OrderWizardModuleCartSummary = require('../../OrderWizard.Module.CartSummary/JavaScript/OrderWizard.Module.CartSummary');\nimport OrderWizardModuleAddressShipping = require('../../OrderWizard.Module.Address/JavaScript/OrderWizard.Module.Address.Shipping');\nimport OrderWizardModulePaymentMethodGiftCertificates = require('../../OrderWizard.Module.PaymentMethod/JavaScript/OrderWizard.Module.PaymentMethod.GiftCertificates');\nimport OrderWizardModulePaymentMethodSelector = require('../../OrderWizard.Module.PaymentMethod/JavaScript/OrderWizard.Module.PaymentMethod.Selector');\nimport OrderWizardModulePaymentMethodPurchaseNumber = require('../../OrderWizard.Module.PaymentMethod/JavaScript/OrderWizard.Module.PaymentMethod.PurchaseNumber');\nimport OrderWizardModuleAddressBilling = require('../../OrderWizard.Module.Address/JavaScript/OrderWizard.Module.Address.Billing');\nimport OrderWizardModuleRegisterEmail = require('../../OrderWizard.Module.Register/JavaScript/OrderWizard.Module.RegisterEmail');\nimport OrderWizardModuleShowPayments = require('../../OrderWizard.Module.PaymentMethod/JavaScript/OrderWizard.Module.ShowPayments');\nimport OrderWizardModuleSubmitButton = require('../../OrderWizard.Module.SubmitButton/JavaScript/OrderWizard.Module.SubmitButton');\nimport OrderWizardModuleTermsAndConditions = require('../../OrderWizard.Module.TermsAndConditions/JavaScript/OrderWizard.Module.TermsAndConditions');\nimport OrderWizardModuleConfirmation = require('../../OrderWizard.Module.Confirmation/JavaScript/OrderWizard.Module.Confirmation');\nimport OrderWizardModuleRegisterGuest = require('../../OrderWizard.Module.Register/JavaScript/OrderWizard.Module.RegisterGuest');\nimport OrderWizardModulePromocodeForm = require('../../OrderWizard.Module.PromocodeForm/JavaScript/OrderWizard.Module.PromocodeForm');\nimport OrderWizardModulePromocodeNotification = require('../../OrderWizard.Module.PromocodeNotifications/JavaScript/OrderWizard.Module.PromocodeNotifications');\n\nimport OrderWizardModuleTitle = require('../../OrderWizard.Module.Title/JavaScript/OrderWizard.Module.Title');\n\nimport OrderWizardModuleMultiShipToSelectAddressesShipping = require('../../OrderWizard.Module.Address/JavaScript/OrderWizard.Module.MultiShipTo.Select.Addresses.Shipping');\nimport OrderWizardModuleMultiShipToPackageCreation = require('../../OrderWizard.Module.Package/JavaScript/OrderWizard.Module.MultiShipTo.Package.Creation');\nimport OrderWizardModuleMultiShipToPackageList = require('../../OrderWizard.Module.Package/JavaScript/OrderWizard.Module.MultiShipTo.Package.List');\nimport OrderWizardModuleNonShippableItems = require('../../OrderWizard.Module.NonShippableItems/JavaScript/OrderWizard.Module.NonShippableItems');\nimport OrderWizardModuleMultiShipToShipmethod = require('../../OrderWizard.Module.Shipmethod/JavaScript/OrderWizard.Module.MultiShipTo.Shipmethod');\nimport OrderWizardModuleShipmethod = require('../../OrderWizard.Module.Shipmethod/JavaScript/OrderWizard.Module.Shipmethod');\nimport OrderWizardModuleShowShipments = require('../../OrderWizard.Module.Shipmethod/JavaScript/OrderWizard.Module.ShowShipments');\nimport OrderWizardModuleCartItemsPickupInStore = require('../../OrderWizard.Module.CartItems/JavaScript/OrderWizard.Module.CartItems.PickupInStore');\nimport OrderWizardModuleCartItemsShip = require('../../OrderWizard.Module.CartItems/JavaScript/OrderWizard.Module.CartItems.Ship');\nimport OrderWizardModuleCartItemsPickupInStoreList = require('../../OrderWizard.Module.CartItems/JavaScript/OrderWizard.Module.CartItems.PickupInStore.List');\nimport HeaderView = require('../../Header/JavaScript/Header.View');\n\nconst addressOpcOptions = {\n    title: Utils.translate('Enter Shipping Address'),\n    hide_title: true\n};\nconst deliveryMethodOpcOptions = {\n    is_read_only: false,\n    hide_title: true,\n    hide_items: true\n};\nconst mstDeliveryOptions = {\n    is_read_only: false,\n    show_edit_address_url: false,\n    hide_accordion: true,\n    collapse_items: true\n};\nconst showShipmentOptions = {\n    edit_url: '/opc',\n    show_edit_address_url: true,\n    hide_title: true,\n    is_read_only: false,\n    show_combo: true,\n    show_edit_button: true,\n    hide_item_link: true\n};\nconst showMstShipmentOptions = {\n    edit_url: '/opc',\n    show_edit_address_url: true,\n    hide_title: true,\n    edit_shipment_url: 'shipping/addressPackages',\n    edit_shipment_address_url: 'shipping/selectAddress',\n    is_read_only: false,\n    show_combo: true,\n    show_edit_button: true,\n    hide_item_link: true\n};\nconst cartSummaryOptions = {\n    exclude_on_skip_step: true,\n    show_promocode_form: true,\n    show_edit_cart: true,\n    allow_remove_promocode: true,\n    hide_continue_button: true,\n    hide_cart_terms: true,\n    container: '#wizard-step-content-right',\n    hideSummaryItems: function(): boolean {\n        return this.wizard.isMultiShipTo();\n    }\n};\nconst cartItemsOptionsRight = {\n    container: '#wizard-step-content-right',\n    hideHeaders: true,\n    showMobile: true,\n    showOpenedAccordion: Utils.isTabletDevice() || Utils.isDesktopDevice() || false\n};\nconst cartItemsNonShippableOptionsRight = _.extend(\n    {\n        title: Utils.translate('Other Items'),\n        show_mobile: true,\n        show_table_header: false,\n        show_edit_cart_button: true\n    },\n\n    cartItemsOptionsRight\n);\n\nconst OPC: CheckoutStepGroup[] = [\n    {\n        name: Utils.translate('Checkout Information'),\n        steps: [\n            {\n                url: 'opc',\n                continueButtonLabel: Utils.translate('Continue'),\n                isActive: function(): boolean {\n                    return !this.wizard.isMultiShipTo();\n                },\n                hideSecondContinueButtonOnPhone: false,\n                bottomMessage: Utils.translate(\n                    'You will have an opportunity to review your order on the next step.'\n                ),\n                //  Only want to validate if the step is active. I.e.: don't validate if using mst.\n                past: function() {\n                    if (this.isActive()) {\n                        return this.validate();\n                    }\n                    return jQuery.Deferred().resolve();\n                },\n                modules: [\n                    [OrderWizardModulePromocodeNotification, { exclude_on_skip_step: true }],\n                    [\n                        // Mobile Top\n                        OrderWizardModuleSubmitButton,\n                        {\n                            className: 'order-wizard-submitbutton-module-top'\n                        }\n                    ],\n                    [\n                        OrderWizardModuleTitle,\n                        {\n                            title: Utils.translate('Shipping Address'),\n                            exclude_on_skip_step: true,\n                            isActive: function(): boolean {\n                                return this.wizard.model.shippingAddressIsRequired();\n                            }\n                        }\n                    ],\n                    OrderWizardModuleMultiShipToEnableLink,\n                    [OrderWizardModuleAddressShipping, addressOpcOptions],\n\n                    [\n                        OrderWizardModuleTitle,\n                        {\n                            title: Utils.translate('Delivery Method'),\n                            exclude_on_skip_step: true,\n                            isActive: function(): boolean {\n                                return this.wizard.model.shippingAddressIsRequired();\n                            }\n                        }\n                    ],\n                    [OrderWizardModuleShipmethod, deliveryMethodOpcOptions],\n\n                    [OrderWizardModuleTitle, { title: Utils.translate('Payment') }],\n                    [\n                        OrderWizardModulePaymentMethodSelector,\n                        { record_type: 'salesorder', prevent_default: true }\n                    ],\n                    [OrderWizardModulePaymentMethodGiftCertificates],\n                    OrderWizardModulePaymentMethodPurchaseNumber,\n                    [\n                        OrderWizardModuleAddressBilling,\n                        {\n                            title: Utils.translate('Billing Address'),\n                            enable_same_as: function(): boolean {\n                                return (\n                                    !this.wizard.model.get('ismultishipto') &&\n                                    this.wizard.model.shippingAddressIsRequired()\n                                );\n                            }\n                        }\n                    ],\n                    OrderWizardModuleRegisterEmail,\n\n                    [OrderWizardModuleCartSummary, cartSummaryOptions],\n                    [\n                        OrderWizardModuleSubmitButton,\n                        {\n                            container: '#wizard-step-content-right',\n                            showWrapper: true,\n                            wrapperClass: 'order-wizard-submitbutton-container',\n                            is_below_summary: true\n                        }\n                    ],\n                    [OrderWizardModulePromocodeForm, cartItemsOptionsRight],\n                    [\n                        OrderWizardModuleCartItemsShip,\n                        _.extend(\n                            {\n                                show_opened_accordion: true,\n                                show_edit_cart_button: true,\n                                show_headers: false,\n                                show_mobile: true\n                            },\n                            cartItemsOptionsRight\n                        )\n                    ],\n                    [\n                        OrderWizardModuleCartItemsPickupInStore,\n                        _.extend(\n                            {\n                                show_opened_accordion: false,\n                                show_edit_cart_button: true,\n                                show_headers: false,\n                                show_mobile: true\n                            },\n                            cartItemsOptionsRight\n                        )\n                    ],\n                    [OrderWizardModuleNonShippableItems, cartItemsNonShippableOptionsRight]\n                ]\n            }\n        ]\n    },\n\n    {\n        name: Utils.translate('Shipping Address'),\n        steps: [\n            {\n                name: Utils.translate('Enter Shipping Address'),\n                url: 'shipping/selectAddress',\n                isActive: function(): boolean {\n                    return this.wizard.isMultiShipTo();\n                },\n                modules: [\n                    [OrderWizardModuleMultiShipToEnableLink, { exclude_on_skip_step: true }],\n                    [\n                        OrderWizardModuleMultiShipToSelectAddressesShipping,\n                        { edit_addresses_url: 'shipping/selectAddress' }\n                    ],\n                    [OrderWizardModuleCartSummary, cartSummaryOptions],\n                    [OrderWizardModulePromocodeForm, cartItemsOptionsRight]\n                ]\n            }\n        ]\n    },\n\n    {\n        name: Utils.translate('Set shipments'),\n        steps: [\n            {\n                name: Utils.translate('Set shipments'),\n                isActive: function(): boolean {\n                    return this.wizard.isMultiShipTo();\n                },\n                url: 'shipping/addressPackages',\n                modules: [\n                    OrderWizardModuleMultiShipToEnableLink,\n                    [\n                        OrderWizardModuleMultiShipToPackageCreation,\n                        { edit_addresses_url: 'shipping/selectAddress' }\n                    ],\n                    OrderWizardModuleMultiShipToPackageList,\n                    OrderWizardModuleNonShippableItems,\n                    [OrderWizardModuleCartSummary, cartSummaryOptions],\n                    [OrderWizardModulePromocodeForm, cartItemsOptionsRight]\n                ]\n            }\n        ]\n    },\n\n    {\n        name: Utils.translate('Delivery Method'),\n        steps: [\n            {\n                name: Utils.translate('Choose delivery method'),\n                url: 'shipping/packages',\n                isActive: function(): boolean {\n                    return this.wizard.isMultiShipTo();\n                },\n                modules: [\n                    [OrderWizardModuleMultiShipToShipmethod, mstDeliveryOptions],\n                    [OrderWizardModuleNonShippableItems, mstDeliveryOptions],\n                    [OrderWizardModuleCartSummary, cartSummaryOptions],\n                    [OrderWizardModulePromocodeForm, cartItemsOptionsRight]\n                ]\n            }\n        ]\n    },\n\n    {\n        name: Utils.translate('Payment'),\n        steps: [\n            {\n                name: Utils.translate('Choose Payment Method'),\n                url: 'billing',\n                bottomMessage: Utils.translate(\n                    'You will have an opportunity to review your order on the next step.'\n                ),\n                isActive: function(): boolean {\n                    return this.wizard.isMultiShipTo();\n                },\n                modules: [\n                    [\n                        OrderWizardModulePaymentMethodSelector,\n                        { record_type: 'salesorder', prevent_default: true }\n                    ],\n                    OrderWizardModulePaymentMethodGiftCertificates,\n                    OrderWizardModulePaymentMethodPurchaseNumber,\n                    [\n                        OrderWizardModuleAddressBilling,\n                        {\n                            enable_same_as: function(): boolean {\n                                return !this.wizard.isMultiShipTo();\n                            },\n                            title: Utils.translate('Enter Billing Address'),\n                            select_shipping_address_url: 'shipping/selectAddress'\n                        }\n                    ],\n                    OrderWizardModuleRegisterEmail,\n                    [OrderWizardModuleCartSummary, cartSummaryOptions],\n                    [OrderWizardModulePromocodeForm, cartItemsOptionsRight]\n                ]\n            }\n        ]\n    },\n\n    {\n        name: Utils.translate('Review'),\n        steps: [\n            {\n                name: Utils.translate('Review Your Order'),\n                url: 'review',\n                continueButtonLabel: function(): string {\n                    return this.wizard && this.wizard.isExternalCheckout()\n                        ? Utils.translate('Continue to External Payment')\n                        : Utils.translate('Place Order');\n                },\n                bottomMessage: function(): string {\n                    return this.wizard && this.wizard.isExternalCheckout()\n                        ? Utils.translate(\n                              'You will be redirected to a secure site to confirm your payment.'\n                          )\n                        : '';\n                },\n                modules: [\n                    [\n                        // Mobile Top\n                        OrderWizardModuleTermsAndConditions,\n                        {\n                            className: 'order-wizard-termsandconditions-module-top'\n                        }\n                    ],\n                    [\n                        // Mobile Top\n                        OrderWizardModuleSubmitButton,\n                        {\n                            className: 'order-wizard-submitbutton-module-top'\n                        }\n                    ],\n                    [OrderWizardModulePromocodeNotification, { exclude_on_skip_step: true }],\n                    [\n                        OrderWizardModuleCartItemsPickupInStoreList,\n                        {\n                            show_opened_accordion: true,\n                            is_accordion_primary: true,\n                            show_edit_cart_button: true,\n                            show_headers: false,\n                            show_mobile: true\n                        }\n                    ],\n                    [OrderWizardModuleShowShipments, showShipmentOptions],\n                    [OrderWizardModuleMultiShipToShipmethod, showMstShipmentOptions],\n                    [\n                        OrderWizardModuleNonShippableItems,\n                        {\n                            show_mobile: false,\n                            show_table_header: true,\n                            show_opened_accordion: true,\n                            show_edit_cart_button: true\n                        }\n                    ],\n\n                    [\n                        OrderWizardModuleShowPayments,\n                        {\n                            edit_url_billing: function(): string {\n                                if (this.wizard.isMultiShipTo()) {\n                                    return '/billing';\n                                }\n                                return '/opc';\n                            }\n                        }\n                    ],\n                    [\n                        OrderWizardModuleTermsAndConditions,\n                        { className: 'order-wizard-termsandconditions-module-default' }\n                    ],\n                    [\n                        OrderWizardModuleCartSummary,\n                        _.extend(_.clone(cartSummaryOptions), {\n                            hideSummaryItems: true,\n                            hide_continue_button: false,\n                            hide_cart_terms: false\n                        })\n                    ],\n                    [\n                        // Desktop Right\n                        OrderWizardModuleTermsAndConditions,\n                        {\n                            container: '#wizard-step-content-right',\n                            className: 'order-wizard-termsandconditions-module-top-summary'\n                        }\n                    ],\n                    [\n                        OrderWizardModuleSubmitButton,\n                        {\n                            container: '#wizard-step-content-right',\n                            showWrapper: true,\n                            wrapperClass: 'order-wizard-submitbutton-container',\n                            is_below_summary: true\n                        }\n                    ],\n                    [OrderWizardModulePromocodeForm, cartItemsOptionsRight],\n                    [\n                        // Mobile Right Bottom\n                        OrderWizardModuleTermsAndConditions,\n                        {\n                            className: 'order-wizard-termsandconditions-module-bottom',\n                            container: '#wizard-step-content-right'\n                        }\n                    ]\n                ],\n                save: function(): Promise<void> {\n                    if (SC.CONFIGURATION.isThreeDSecureEnabled) {\n                        const promise = this.wizard.model.submit();\n\n                        return this.wizard.start3DSecure(promise);\n                    }\n\n                    (<any>_.first(this.moduleInstances)).trigger(\n                        'change_label_continue',\n                        Utils.translate('Processing...')\n                    );\n\n                    const self = this;\n                    const submit_operation = this.wizard.model.submit();\n\n                    submit_operation.always(function(): void {\n                        (<any>_.first(self.moduleInstances)).trigger('change_label_continue');\n                    });\n\n                    return submit_operation;\n                }\n            },\n            {\n                url: 'confirmation',\n                hideContinueButton: true,\n                hideBackButton: true,\n                hideBreadcrumb: true,\n                headerView: HeaderView,\n                modules: [\n                    [\n                        OrderWizardModuleConfirmation,\n                        {\n                            additional_confirmation_message: Utils.translate(\n                                'You will receive an email with this confirmation in a few minutes.'\n                            )\n                        }\n                    ],\n                    [OrderWizardModuleRegisterGuest],\n                    [\n                        OrderWizardModuleCartSummary,\n                        _.extend(_.clone(cartSummaryOptions), {\n                            hideSummaryItems: true,\n                            show_promocode_form: false,\n                            allow_remove_promocode: false,\n                            isConfirmation: true\n                        })\n                    ]\n                ]\n            }\n        ]\n    }\n];\n\nexport { OPC };\n"]}
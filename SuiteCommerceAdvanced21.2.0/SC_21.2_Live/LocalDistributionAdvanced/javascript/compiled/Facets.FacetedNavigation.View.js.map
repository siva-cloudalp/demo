{"version":3,"sources":["Facets.FacetedNavigation.View.ts"],"names":[],"mappings":"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","file":"Facets.FacetedNavigation.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Facets.FacetedNavigation.View\"/>\n\nimport * as _ from 'underscore';\nimport * as facets_faceted_navigation_tpl from 'facets_faceted_navigation.tpl';\nimport { Configuration } from '../../Utilities/JavaScript/Configuration';\nimport { ProfileModel } from '../../Profile/JavaScript/Profile.Model';\n\nimport FacetsFacetedNavigationItemView = require('./Facets.FacetedNavigationItem.View');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\nimport BackboneCollectionView = require('../../../Commons/Backbone.CollectionView/JavaScript/Backbone.CollectionView');\n\n// @module Facets\nexport = BackboneView.extend({\n    template: facets_faceted_navigation_tpl,\n\n    initialize: function(options) {\n        this.categoryItemId = options.categoryItemId;\n        this.clearAllFacetsLink = options.clearAllFacetsLink;\n        this.hasCategories = options.hasCategories;\n        this.hasItems = options.hasItems;\n        this.hasFacets = options.hasFacets;\n        this.hasCategoriesAndFacets = options.hasCategoriesAndFacets;\n        this.appliedFacets = options.appliedFacets;\n        this.hasFacetsOrAppliedFacets = options.hasFacetsOrAppliedFacets;\n\n        this.keywords = options.keywords;\n        this.totalProducts = options.totalProducts;\n    },\n\n    childViews: {\n        'Facets.FacetedNavigationItems': function() {\n            const { translator } = this.options; // FacetsHelper.parseUrl(this.options.translatorUrl, this.options.translatorConfig, this.options.translator.categoryUrl)\n            let ordered_facets =\n                this.options.facets &&\n                this.options.facets.sort(function(a, b) {\n                    // Default Priority is 0\n                    return (\n                        (translator.getFacetConfig(b.url || b.id).priority || 0) -\n                        (translator.getFacetConfig(a.url || a.id).priority || 0)\n                    );\n                });\n\n            // if prices aren't to be shown we take out price related facet\n            const hidden_facet_names = Configuration.get('loginToSeePrices.hiddenFacetNames', []);\n\n            if (ProfileModel.getInstance().hidePrices()) {\n                ordered_facets = _.reject(ordered_facets, function(item: any) {\n                    return _.indexOf(hidden_facet_names, item.id) >= 0;\n                });\n            }\n\n            return new BackboneCollectionView({\n                childView: FacetsFacetedNavigationItemView,\n                viewsPerRow: 1,\n                collection: new Backbone.Collection(ordered_facets),\n                childViewOptions: {\n                    translator: translator\n                }\n            });\n        }\n    },\n\n    // @method getContext\n    // @returns {Facets.FacetedNavigation.View.Context}\n    getContext: function() {\n        // @class Facets.FacetedNavigation.View.Context\n        return {\n            // @property {Number} totalProducts\n            totalProducts: this.totalProducts,\n            // @property {Boolean} isTotalProductsOne\n            isTotalProductsOne: this.totalProducts === 1,\n            // @property {String} keywords\n            keywords: this.keywords,\n            // @property {String} categoryItemId\n            categoryItemId: this.categoryItemId,\n            // @property {String} clearAllFacetsLink\n            clearAllFacetsLink: this.clearAllFacetsLink,\n            // @property {Boolean} hasCategories\n            hasCategories: this.hasCategories,\n            // @property {Boolean} hasItems\n            hasItems: this.hasItems,\n            // @property {Boolean} hasFacets\n            hasFacets: this.hasFacets,\n            // @property {Boolean} hasCategoriesAndFacets\n            hasCategoriesAndFacets: this.hasCategoriesAndFacets,\n            // @property {Array} appliedFacets\n            appliedFacets: this.appliedFacets,\n            // @property {Boolean} hasAppliedFacets\n            hasAppliedFacets: this.appliedFacets && this.appliedFacets.length > 0,\n            // @property {Array} hasFacetsOrAppliedFacets\n            hasFacetsOrAppliedFacets: this.hasFacetsOrAppliedFacets\n        };\n        // @class Facets.FacetedNavigation.View\n    }\n});\n"]}
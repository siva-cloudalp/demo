{"version":3,"sources":["ProductList.Control.View.ts"],"names":[],"mappings":"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","file":"ProductList.Control.View.js","sourcesContent":["/*\n\t© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"ProductList.Control.View\"/>\n\nimport * as _ from 'underscore';\nimport * as product_list_control_tpl from 'product_list_control.tpl';\nimport * as Utils from '../../Utilities/JavaScript/Utils';\nimport * as jQuery from '../../Core/JavaScript/jQuery';\nimport { ProfileModel } from '../../Profile/JavaScript/Profile.Model';\n\nimport Backbone = require('../../Utilities/JavaScript/backbone.custom');\nimport BackboneView = require('../../BackboneExtras/JavaScript/Backbone.View');\nimport ProductListModel = require('./ProductList.Model');\nimport ProductListItemModel = require('./ProductList.Item.Model');\nimport ProductListItemCollection = require('./ProductList.Item.Collection');\nimport ControlItemView = require('./ProductList.ControlItem.View');\nimport ControlNewItemView = require('./ProductList.ControlNewItem.View');\nimport Session = require('../../Session/JavaScript/Session');\nimport Tracker = require('../../Tracker/JavaScript/Tracker');\n\n// @class ProductList.Control.View @extends Backbone.View\nexport = BackboneView.extend({\n    template: product_list_control_tpl,\n\n    attributes: { class: 'dropdown product-lists' },\n\n    events: {\n        'click [data-action=\"show-productlist-control\"]': 'validateLogin',\n        'click [data-toggle=\"showFlyout\"]': 'showFlyout',\n        'click [data-type=\"productlist-control\"]': 'stopPropagation',\n        click: 'contentClick',\n        mouseup: 'contentMouseUp'\n    },\n\n    stopPropagation: function(event): void {\n        // For elements that are inside of some item lists (Ex. dropdowns),\n        // Prevent the item to be selected\n        if (\n            event &&\n            event.target &&\n            !this.$(event.target).hasClass('global-views-message-button')\n        ) {\n            event.stopPropagation();\n        }\n    },\n\n    initialize: function(options) {\n        this.product = options.product;\n        this.collection = options.collection;\n        this.application = options.application;\n        this.moveOptions = options.moveOptions;\n        this.countedClicks = options.countedClicks;\n\n        if (this.moveOptions) {\n            this.mode = 'move';\n        }\n\n        // need to hide the menu (data-type=\"productlist-control\") when clicked outside, so we register here a click handler on the document.:\n        jQuery(document).click(function(event) {\n            let outside =\n                jQuery(event.target)\n                    .parents()\n                    .index(<any>(\n                        jQuery(event.target).closest('[data-type^=\"productlist-control\"]')\n                    )) === -1;\n            outside = outside && jQuery(event.target).data('action') !== 'show-productlist-control';\n\n            if (outside) {\n                if (jQuery('[data-type=\"productlist-control\"]').is(':visible')) {\n                    const $control = jQuery('[data-type=\"productlist-control\"]');\n\n                    // return the control to its initial state\n                    $control.find('form').hide();\n                    $control.find('[data-action=\"show-add-new-list-form\"]').show();\n\n                    $control.slideUp();\n                }\n            }\n        });\n\n        this.product.on('change', this.render, this);\n    },\n\n    // Render the control view, appending the items views and add new list form\n    render: function() {\n        // if the control is currently visible then we remember that !\n        this.is_visible = this.$('[data-type=\"productlist-control\"]').is(':visible');\n\n        BackboneView.prototype.render.apply(this);\n\n        const self = this;\n\n        self.collection.each(function(model) {\n            const view = new ControlItemView({\n                model: model,\n                product: self.product,\n                application: self.application,\n                parentView: self\n            });\n\n            self.$('ul').prepend(view.render().el);\n        });\n\n        const new_product_list_model = this.getNewProductListModel();\n        const new_item_view = new ControlNewItemView({\n            model: new_product_list_model,\n            application: self.application,\n            parentView: self\n        });\n\n        self.$('[data-type=\"new-item-container\"]').html(new_item_view.render().el);\n\n        // also we don't want to erase any previous confirmation messages\n        self.confirm_message && self.saveAndShowConfirmationMessage(self.confirm_message);\n    },\n\n    // This method is overridden in POS.\n    getNewProductListModel: function() {\n        return new ProductListModel();\n    },\n\n    // if the user is not logged in we redirect it to login page and then back to the PDP.\n    validateLogin: function(e) {\n        if (ProfileModel.getInstance().get('isLoggedIn') === 'T') {\n            return true;\n        }\n\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        e.preventDefault();\n\n        let login = Session.get('touchpoints.login');\n\n        login += `&origin=${this.application.getConfig().currentTouchpoint}`;\n\n        if (this.$el.closest('.modal-product-detail').length > 0) {\n            // we are in the quick view\n            const hashtag = this.product.generateURL();\n            login += `&origin_hash=${encodeURIComponent(hashtag.replace('#/', ''))}`;\n        } else {\n            login += `&origin_hash=${encodeURIComponent(Backbone.history.fragment)}`;\n        }\n\n        window.location.href = login;\n    },\n\n    // validates the passed gift cert item and return false and render an error message if invalid.\n    validateGiftCertificate: function validateGiftCertificate(line) {\n        const line_option_email =\n            line.get('options') &&\n            line.get('options').findWhere({ cartOptionId: 'GIFTCERTRECIPIENTEMAIL' });\n\n        if (line_option_email && !line_option_email.isValid(true)) {\n            this.render(); // for unchecking the just checked checkbox\n            this.showError(this.application.getErrorMessage('recipientEmailIsInvalid'));\n\n            return false;\n        }\n        return true;\n    },\n\n    getItemOptions: function(line) {\n        const selected_options = line.get('options').filter(function(option) {\n            return !!option.get('value');\n        });\n\n        return _.reduce(\n            selected_options,\n            function(acc, option: any) {\n                const value = option.get('value') || {};\n\n                acc[option.get('cartOptionId')] = {\n                    value: value.internalid,\n                    displayvalue: value.label\n                };\n\n                return acc;\n            },\n            {}\n        );\n    },\n\n    // Adds the product to the newly created list, renders the control and shows a confirmation msg\n    addNewProductToList: function(newList) {\n        return this.addItemToList(this.product, newList, true).then(() => {\n            this.saveAndShowConfirmationMessage(\n                this.$('.ul-product-lists [type=\"checkbox\"]:checked').length > 1\n                    ? Utils.translate('Good! You added this item to your product lists')\n                    : Utils.translate('Good! You added this item to your product list')\n            );\n        });\n    },\n\n    // Add a new product list item into a product list\n    addItemToList: function(line, productList, dontShowMessage) {\n        const addItemPromise = jQuery.Deferred();\n        if (line.isValid(true)) {\n            const self = this;\n\n            if (!productList.get('internalid')) {\n                // this is a predefined list\n                productList.save().done(function(data) {\n                    const new_model = new ProductListModel(data);\n\n                    self.application.ProductListModule.Utils.getProductLists().add(new_model, {\n                        merge: true\n                    });\n                    self.doAddItemToList(line, new_model, dontShowMessage).then(() => {\n                        addItemPromise.resolve();\n                    });\n                });\n            } else {\n                self.doAddItemToList(line, productList, dontShowMessage).then(() => {\n                    addItemPromise.resolve();\n                });\n            }\n        }\n        return addItemPromise;\n    },\n\n    // This method is overridden in POS\n    getNewItemData: function(line, productList) {\n        const product_list_line = ProductListItemModel.createFromProduct(line);\n\n        product_list_line.set('productList', {\n            id: productList.get('internalid'),\n            owner: productList.get('owner').id\n        });\n\n        return product_list_line;\n    },\n\n    // Adds the new item to the collection\n    doAddItemToList: function(product, productList, dontShowMessage) {\n        const self = this;\n        const product_list_line_to_save = this.getNewItemData(product, productList);\n\n        return product_list_line_to_save.save(null, {\n            // Note this is lack of validation is require to not validate the JSON returned from the\n            // services as it will lack the Model/Collection structure required to run the\n            // validation. for example the list of options will be an array and not a collection\n            // as the event handle that parse them didn't run yet\n            validate: false,\n            success: function(product_list_line_to_save_saved) {\n                productList.get('items').add(product_list_line_to_save_saved);\n\n                Tracker.getInstance().trackAddToWishlist(self.product);\n\n                self.collection.trigger('changed');\n                self.render();\n\n                if (!dontShowMessage) {\n                    self.saveAndShowConfirmationMessage(\n                        self.$('.ul-product-lists [type=\"checkbox\"]:checked').length > 1\n                            ? Utils.translate('Good! You added this item to your product lists')\n                            : Utils.translate('Good! You added this item to your product list')\n                    );\n                }\n            }\n        });\n    },\n\n    // Check for predefined list before moving\n    moveProductHandler: function(destination) {\n        const self = this;\n\n        if (!destination.get('internalid')) {\n            // this is a predefined list\n            return destination.save().then(function(data) {\n                const new_product_list = new ProductListModel(data);\n\n                self.application.ProductListModule.Utils.getProductLists().add(new_product_list, {\n                    merge: true\n                });\n                return self.moveProduct(new_product_list);\n            });\n        }\n        return self.moveProduct(destination);\n    },\n\n    // Moves the item to the destination list\n    moveProduct: function(destination) {\n        const self = this;\n        const original_item = this.moveOptions.productListItem;\n        const original_item_clone = original_item.clone();\n        const details_view = this.moveOptions.parentView;\n\n        original_item_clone.set('productList', {\n            id: destination.get('internalid')\n        });\n        const moveProductResult = jQuery.Deferred();\n\n        destination.get('items').create(original_item_clone, {\n            validate: false,\n            success: function(saved_model) {\n                const app = details_view.application;\n                const from_list = self.application.ProductListModule.Utils.getProductLists().findWhere(\n                    { internalid: self.moveOptions.parentView.model.get('internalid') }\n                );\n                const to_list = self.application.ProductListModule.Utils.getProductLists().findWhere(\n                    {\n                        internalid: destination.get('internalid')\n                    }\n                );\n\n                self.doMoveProduct(from_list, to_list, original_item, saved_model);\n\n                details_view.model.get('items').remove(original_item);\n                details_view.render();\n\n                jQuery('.sc-flyout-bg').remove();\n\n                app.getLayout().currentView.showConfirmationMessage(\n                    Utils.translate(\n                        '<div class=\"product-list-control-message\">Good! You successfully moved the item from this to <a href=\"/wishlist/$(0)\">$(1)</a></div>',\n                        destination.get('internalid'),\n                        destination.get('name')\n                    )\n                );\n                moveProductResult.resolve();\n            },\n            wait: true\n        });\n        return moveProductResult;\n    },\n\n    // Adds the item clone to the destination list and removes the original from its list\n    doMoveProduct: function(from, to, original_model, saved_model) {\n        // if add not defined, create the collection\n        if (to.get('items') instanceof Array) {\n            to.set('items', new ProductListItemCollection());\n        }\n\n        // add the item to the application collection\n        to.get('items').add(saved_model);\n\n        from.get('items').remove(original_model);\n        this.collection.trigger('changed');\n    },\n\n    // Gets the internal product id for a store item considering it could be a matrix child.\n    getProductId: function(line) {\n        if (line.getItemId) {\n            return line.getItemId();\n        }\n        if (this.application.ProductListModule) {\n            return this.application.ProductListModule.Utils.internalGetProductId(line);\n        }\n        return `${line.get('_id')}`;\n    },\n\n    // Determines if the control is visible\n    isAvailable: function() {\n        // if you want to disable the product list experience you instead can\n        // return: ProfileModel.getInstance().get('isLoggedIn') === 'T';\n        return true;\n    },\n\n    // Renders a confirmation message storing message parameter and also stores the message\n    saveAndShowConfirmationMessage: function(message) {\n        this.confirm_message = message;\n\n        this.showConfirmationMessage(this.confirm_message, true);\n    },\n\n    // Hides the confirmation message\n    hideConfirmationMessage: function() {\n        this.confirm_message = null;\n        this.$('[data-confirm-message]').hide();\n    },\n\n    // @method showFlyout Handle showing/hiding (toggle) data-toggle=\"showFlyout\" elements\n    // @param {jQuery.Event} e\n    // @return {Void}\n    showFlyout: function(e) {\n        e.stopPropagation();\n        // Here no extra validation is specified as those are not required to add an item\n        // into a product list\n        if (this.product.areAttributesValid(['options', 'quantity'], {})) {\n            // Hide any other open flyout instances...\n            jQuery('.product-list-control-flyout').hide();\n\n            this.countedClicks[`${e.pageX}|${e.pageY}`] = false;\n\n            const self = jQuery(e.target);\n\n            if (Utils.isPhoneDevice()) {\n                self.next().toggle();\n                const body = jQuery('body');\n                const scrollvalue = self.offset();\n\n                body.animate({ scrollTop: scrollvalue.top }, '500', function() {\n                    jQuery('#main').append('<div class=\"sc-flyout-bg\"></div>');\n                    jQuery('.sc-flyout-bg').on('click', function() {\n                        jQuery('.sc-flyout-bg').remove();\n                    });\n                });\n            } else {\n                self.next().toggle();\n            }\n        }\n    },\n\n    // @method contentClick\n    // Keeps track of the clicks you have made onto the view, so the contentMouseUp\n    // knows if it needs to trigger the click event once again\n    // @param {jQuery.Event} e\n    // @return {Void}\n    contentClick: function(e) {\n        this.countedClicks[`${e.pageX}|${e.pageY}`] = true;\n    },\n\n    // @method contentMouseUp\n    // this is used just to register a delayed function to check if the click went through\n    // if it didn't we fire the click once again on the top most element\n    // @param {jQuery.Event} e\n    // @return {Void}\n    contentMouseUp: function(e) {\n        if (e.which !== 2 && e.which !== 3) {\n            const self = this;\n            _.delay(function() {\n                if (!self.countedClicks[`${e.pageX}|${e.pageY}`]) {\n                    jQuery(document.elementFromPoint(e.clientX, e.clientY)).click();\n                }\n\n                delete self.countedClicks[`${e.pageX}|${e.pageY}`];\n            }, 100);\n        }\n    },\n\n    // @method getContext @return {ProductList.Control.View.Context}\n    getContext: function() {\n        // @class ProductList.Control.View.Context\n        return {\n            // @property {Boolean} isMoving\n            isMoving: this.mode === 'move',\n            // @property {Boolean} showControl\n            showControl: this.is_visible,\n            // @property {Boolean} isEmpty\n            isEmpty: this.collection.length === 0,\n            // @property {Boolean} hasOneProductList\n            hasOneProductList: this.collection.length === 1,\n            // @property {Boolean} hasProductLists\n            hasProductLists: this.collection.length > 0,\n            // @property {Integer} productListLength\n            productListLength: this.collection.length\n        };\n    }\n});\n"]}
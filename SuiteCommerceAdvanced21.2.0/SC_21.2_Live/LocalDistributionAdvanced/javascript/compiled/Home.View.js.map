{"version":3,"sources":["Home.View.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;IAgBF,2CAA2C;IAC3C,IAAM,QAAQ,GAAQ,YAAY,CAAC,MAAM,CAAC;QACtC,QAAQ,EAAE,QAAQ;QAElB,KAAK,EAAE,KAAK,CAAC,SAAS,CAAC,sBAAsB,CAAC;QAE9C,WAAW,EAAE,KAAK,CAAC,SAAS,CAAC,sBAAsB,CAAC;QAEpD,UAAU,EAAE;YACR,EAAE,EAAE,WAAW;YACf,KAAK,EAAE,WAAW;SACrB;QAED,MAAM,EAAE;YACJ,oCAAoC,EAAE,eAAe;SACxD;QAED,UAAU,EAAE,SAAS,UAAU;YAC3B,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,eAAe,CAAC,EAAE;gBACxC,QAAQ,EAAE,wCAAwC;gBAClD,QAAQ,EAAE,wCAAwC;aACrD,CAAC,CAAC;QACP,CAAC;QAED,UAAU,EAAE;YACR,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC;YAC1C,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAElF,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,iBAAiB,EAAE;gBACrD,OAAO,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,GAAG,GAAG,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YAC7E,CAAC,EACD,IAAI,CACP,CAAC;YAEF,IAAM,mBAAmB,GAAG,CAAC,CAAC,QAAQ,CAAC;gBACnC,IACI,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC;oBACrC,KAAK,CAAC,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC,EAC7C;oBACE,OAAO;iBACV;gBACD,IAAI,CAAC,WAAW,EAAE,CAAC;gBAEnB,KAAK,CAAC,kBAAkB,EAAE,CAAC;gBAE3B,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC;YAC9C,CAAC,EAAE,IAAI,CAAC,CAAC;YAET,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;YAE9D,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,QAAQ,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;QAC3D,CAAC;QAED,OAAO,EAAE;YACL,YAAY,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;YACtD,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;YACxD,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QACvF,CAAC;QAED,+CAA+C;QAC/C,UAAU,EAAE;YACR,IAAM,cAAc,GAAG,CAAC,CAAC,GAAG,CAAC,6BAAa,CAAC,GAAG,CAAC,qBAAqB,EAAE,EAAE,CAAC,EAAE,UACvE,GAAW;gBAEX,OAAO,KAAK,CAAC,mCAAmC,CAAC,GAAG,CAAC,CAAC;YAC1D,CAAC,CAAC,CAAC;YAEH,IAAM,kBAAkB,GAAG,CAAC,CAAC,GAAG,CAAC,6BAAa,CAAC,GAAG,CAAC,yBAAyB,EAAE,EAAE,CAAC,EAAE,UAC/E,GAAW;gBAEX,OAAO,KAAK,CAAC,mCAAmC,CAAC,GAAG,CAAC,CAAC;YAC1D,CAAC,CAAC,CAAC;YAEH,OAAO;gBACH,2BAA2B;gBAC3B,mCAAmC;gBACnC,aAAa,EAAE,KAAK,CAAC,gBAAgB,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,MAAM;gBACrE,yCAAyC;gBACzC,mBAAmB,EAAE,KAAK,CAAC,gBAAgB,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM;gBACzE,mCAAmC;gBACnC,cAAc,EAAE,cAAc;gBAC9B,uCAAuC;gBACvC,kBAAkB,EAAE,kBAAkB;gBACtC,mBAAmB;aACtB,CAAC;QACN,CAAC;KACJ,CAAC,CAAC;IAEH,OAAS,QAAQ,CAAC","file":"Home.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Home.View\"/>\n/// <reference path=\"../../../Commons/Utilities/JavaScript/UnderscoreExtended.d.ts\"/>\n\nimport * as _ from 'underscore';\nimport * as home_tpl from 'home.tpl';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { Configuration } from '../../SCA/JavaScript/Configuration';\n\nimport Tracker = require('../../../Commons/Tracker/JavaScript/Tracker');\n\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\n\n// @module Home.View @extends Backbone.View\nconst HomeView: any = BackboneView.extend({\n    template: home_tpl,\n\n    title: Utils.translate('Welcome to the store'),\n\n    page_header: Utils.translate('Welcome to the store'),\n\n    attributes: {\n        id: 'home-page',\n        class: 'home-page'\n    },\n\n    events: {\n        'click [data-action=slide-carousel]': 'carouselSlide'\n    },\n\n    initSlider: function initSlider() {\n        Utils.initBxSlider(this.$('[data-slider]'), {\n            nextText: '<a class=\"home-gallery-next-icon\"></a>',\n            prevText: '<a class=\"home-gallery-prev-icon\"></a>'\n        });\n    },\n\n    initialize: function() {\n        this.windowWidth = jQuery(window).width();\n        this.options.application.getLayout().on('afterAppendView', this.initSlider, this);\n\n        this.options.application.getLayout().once('afterAppendView', ():void => {\n                Tracker.getInstance().trackHomePageview('/' + Backbone.history.fragment);\n            },\n            this\n        );\n\n        const windowResizeHandler = _.throttle(function() {\n            if (\n                Utils.getDeviceType(this.windowWidth) ===\n                Utils.getDeviceType(jQuery(window).width())\n            ) {\n                return;\n            }\n            this.showContent();\n\n            Utils.resetViewportWidth();\n\n            this.windowWidth = jQuery(window).width();\n        }, 1000);\n\n        this._windowResizeHandler = _.bind(windowResizeHandler, this);\n\n        jQuery(window).on('resize', this._windowResizeHandler);\n    },\n\n    destroy: function() {\n        BackboneView.prototype.destroy.apply(this, arguments);\n        jQuery(window).off('resize', this._windowResizeHandler);\n        this.options.application.getLayout().off('afterAppendView', this.initSlider, this);\n    },\n\n    // @method getContext @return Home.View.Context\n    getContext: function() {\n        const carouselImages = _.map(Configuration.get('home.carouselImages', []), function(\n            url: string\n        ) {\n            return Utils.getAbsoluteUrlOfNonManagedResources(url);\n        });\n\n        const bottomBannerImages = _.map(Configuration.get('home.bottomBannerImages', []), function(\n            url: string\n        ) {\n            return Utils.getAbsoluteUrlOfNonManagedResources(url);\n        });\n\n        return {\n            // @class Home.View.Context\n            // @property {String} imageResizeId\n            imageHomeSize: Utils.getViewportWidth() < 768 ? 'homeslider' : 'main',\n            // @property {String} imageHomeSizeBottom\n            imageHomeSizeBottom: Utils.getViewportWidth() < 768 ? 'homecell' : 'main',\n            // @property {Array} carouselImages\n            carouselImages: carouselImages,\n            // @property {Array} bottomBannerImages\n            bottomBannerImages: bottomBannerImages\n            // @class Home.View\n        };\n    }\n});\n\nexport = HomeView;\n"]}
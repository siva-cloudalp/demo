{"version":3,"sources":["GlobalViews.Pagination.View.ts"],"names":[],"mappings":"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","file":"GlobalViews.Pagination.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"GlobalViews.Pagination.View\"/>\n\nimport * as _ from 'underscore';\nimport * as global_views_pagination_tpl from 'global_views_pagination.tpl';\nimport * as Utils from '../../Utilities/JavaScript/Utils';\n\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\nimport BackboneView = require('../../BackboneExtras/JavaScript/Backbone.View');\nimport { UrlHelper } from '../../UrlHelper/JavaScript/UrlHelper';\n\n// @class GlobalViews.Pagination.View @extends Backbone.View\nexport const GlobalViewsPaginationView: any = BackboneView.extend({\n    template: global_views_pagination_tpl,\n\n    initialize: function() {\n        // State definition\n        this.current_page;\n        this.pages;\n        this.pager;\n        this.range_start = 1;\n        this.range_end;\n        this.show_page_list;\n\n        this.precalculateValues();\n    },\n\n    // @method pager @param {String} url_value @returns {String}\n    _pager: function(url_value) {\n        const BackboneHistory: any = Backbone.history;\n\n        const page_number = parseInt(url_value, 10);\n        const url = BackboneHistory.fragment;\n\n        return isNaN(page_number) || page_number === 1\n            ? UrlHelper.removeUrlParameter(url, 'page')\n            : UrlHelper.setUrlParameter(url, 'page', page_number);\n    },\n\n    _getCurrentPage: function() {\n        const BackboneHistory: any = Backbone.history;\n        const url_options = Utils.parseUrlOptions(BackboneHistory.fragment);\n\n        return this._getPageFromUrl(url_options.page);\n    },\n\n    // @method getPageFromUrl @param {String} url_value @returns {Number}\n    _getPageFromUrl: function(url_value) {\n        const page_number = parseInt(url_value, 10);\n\n        return !isNaN(page_number) && page_number > 0 ? page_number : 1;\n    },\n\n    // @method precalculateValues Internal method to precalculate paginator state once and being able to use it many times\n    precalculateValues: function() {\n        this.current_page = this._getCurrentPage();\n        this.total_pages = parseInt(this.options.totalPages, 10);\n        this.pager = this.options.pager || this._pager;\n        this.range_end = this.total_pages + 1;\n        this.show_page_list = _.isBoolean(this.options.showPageList)\n            ? this.options.showPageList\n            : true;\n\n        const pages_to_show: number = parseInt(this.options.pagesToShow, 10) || 4;\n        const padding_left = pages_to_show % 2 === 0 ? pages_to_show / 2 - 1 : pages_to_show / 2;\n\n        if (this.show_page_list && pages_to_show < this.total_pages) {\n            // if we are getting closer to the end we need to compute from the end to the beginig\n            if (pages_to_show - padding_left > this.total_pages - this.current_page) {\n                this.range_start = this.total_pages + 1 - pages_to_show;\n            } else {\n                this.range_start =\n                    this.current_page - padding_left < 1\n                        ? 1\n                        : Math.ceil(this.current_page - padding_left);\n                this.range_end =\n                    this.range_start + pages_to_show > this.total_pages\n                        ? this.total_pages\n                        : this.range_start + pages_to_show;\n            }\n        }\n\n        const self = this;\n        this.pages = _.map(_.range(this.range_start, this.range_end), function(page_index: any) {\n            // @class GlobalViews.Pagination.View.PageItem\n            return {\n                // @property {Boolean} isCurrentPageActivePage\n                isCurrentPageActivePage: page_index === self.current_page,\n                // @property {String} URL\n                URL: self.pager(page_index),\n                // @property {String} fixedURL\n                fixedURL: UrlHelper.fixUrl(self.pager(page_index)),\n                // @property {Number} pageIndex\n                pageIndex: page_index\n            };\n            // @class GlobalViews.Pagination.View\n        });\n    },\n\n    // @method getContext @return {GlobalViews.Pagination.View.Content}\n    getContext: function() {\n        // @class GlobalViews.Pagination.View\n        return {\n            // @property {Boolean} currentPageLowerThanTotalPagesAndCurrentPageGreaterThan0AndPagesCountGreaterThan1\n            currentPageLowerThanTotalPagesAndCurrentPageGreaterThan0AndPagesCountGreaterThan1:\n                this.total_pages >= this.current_page &&\n                this.current_page > 0 &&\n                this.pages.length > 1,\n            // @property {Boolean} showPageIndicator\n            showPageIndicator: !!this.options.showPageIndicator,\n            // @property {String} paginatorClass\n            paginatorClass: this.options.extraClass || '',\n            // @property {Number} currentPage\n            currentPage: this.current_page,\n            // @property {Number} totalPages\n            totalPages: this.total_pages,\n            // @property {Boolean} isCurrentPageDifferentThan1\n            isCurrentPageDifferentThan1: this.current_page !== 1,\n            // @property {String} currentPageURL\n            currentPageURL: UrlHelper.fixUrl(this.pager(this.current_page)),\n            // @property {String} previousPageURL\n            previousPageURL: UrlHelper.fixUrl(this.pager(this.current_page - 1)),\n            // @property {String} nextPageURL\n            nextPageURL: UrlHelper.fixUrl(this.pager(this.current_page + 1)),\n            // @property {Boolean} showPageList\n            showPageList: this.show_page_list,\n            // @property {Boolean} showPaginationLinksCompactClass\n            showPaginationLinksCompactClass: !this.show_page_list,\n            // @property {Boolean} isRangeStartGreaterThan1\n            isRangeStartGreaterThan1: this.range_start > 1,\n            // @property {Boolean} isRangeEndLowerThanTotalPages\n            isRangeEndLowerThanTotalPages: this.range_end < this.total_pages,\n            // @property {Boolean} isCurrentPageLast\n            isCurrentPageLast: this.current_page === this.total_pages,\n            // @property {Array<GlobalViews.Pagination.View.PageItem>} pages\n            pages: this.pages\n        };\n    }\n});\nexport type GlobalViewsPaginationView = any;\n"]}
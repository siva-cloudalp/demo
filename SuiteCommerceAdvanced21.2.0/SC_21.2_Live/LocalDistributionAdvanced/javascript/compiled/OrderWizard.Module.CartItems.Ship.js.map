{"version":3,"sources":["OrderWizard.Module.CartItems.Ship.ts"],"names":[],"mappings":"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","file":"OrderWizard.Module.CartItems.Ship.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"OrderWizard.Module.CartItems.Ship\"/>\n\nimport '../../SCA/JavaScript/Configuration';\nimport * as order_wizard_cartitems_module_ship_tpl from 'order_wizard_cartitems_module_ship.tpl';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport { WizardStepModule } from '../../Wizard/JavaScript/Wizard.StepModule';\n\nimport BackboneCollectionView = require('../../../Commons/Backbone.CollectionView/JavaScript/Backbone.CollectionView');\nimport { AddressDetailsView } from '../../../Commons/Address/JavaScript/Address.Details.View';\nimport { TransactionLineViewsCellNavigableView } from '../../../Commons/Transaction.Line.Views/JavaScript/Transaction.Line.Views.Cell.Navigable.View';\nimport LiveOrderModel = require('../../../Commons/LiveOrder/JavaScript/LiveOrder.Model');\n\n// @class OrderWizard.Module.CartItems.Ship @extends Wizard.Module\nexport = WizardStepModule.extend({\n    // @property {Function} template\n    template: order_wizard_cartitems_module_ship_tpl,\n\n    initialize: function() {\n        const self = this;\n\n        WizardStepModule.prototype.initialize.apply(this, arguments);\n        this.wizard.model.on('ismultishiptoUpdated', function() {\n            self.render();\n        });\n\n        this.wizard.model.on('promocodeUpdated', function() {\n            self.render();\n        });\n\n        this.wizard.model.on('change:lines', function() {\n            self.lines = self.wizard.model.getShippableLines();\n            self.render();\n        });\n\n        this.lines = this.wizard.model.getShippableLines();\n\n        this.options = this.options || {};\n\n        this.options.exclude_on_skip_step = true;\n\n        this.wizard.model.on('change:shipaddress', () => this.initializeAddress());\n\n        this.initializeAddress(true);\n    },\n\n    initializeAddress: function(no_render) {\n        this.wizard.model.off('change:shipaddress', () => this.initializeAddress());\n\n        if (this.address) {\n            this.address.off('change', null, null);\n        }\n\n        this.address = this.wizard.options.profile\n            .get('addresses')\n            .get(this.wizard.model.get('shipaddress'));\n\n        if (this.address) {\n            this.address.on('change', this.render, this);\n        }\n\n        if (!no_render) {\n            this.render();\n        }\n    },\n\n    isActive: function isActive() {\n        return this.lines.length;\n    },\n\n    // @property {Object} childViews\n    childViews: {\n        'Items.Collection': function() {\n            return new BackboneCollectionView({\n                collection: this.lines,\n                childView: TransactionLineViewsCellNavigableView,\n                viewsPerRow: 1,\n                childViewOptions: {\n                    navigable: false,\n\n                    detail1Title: Utils.translate('Qty:'),\n                    detail1: 'quantity',\n\n                    detail2Title: Utils.translate('Unit price:'),\n                    detail2: 'rate_formatted',\n\n                    detail3Title: Utils.translate('Amount:'),\n                    detail3: 'total_formatted'\n                }\n            });\n        },\n\n        'Address.Details': function() {\n            if (this.address) {\n                return new AddressDetailsView({\n                    model: this.address,\n                    hideActions: true,\n                    hideDefaults: true,\n                    hideSelector: true\n                });\n            }\n        }\n    },\n\n    // @method render\n    render: function() {\n        this.application = this.wizard.application;\n        this.profile = this.wizard.options.profile;\n        this.options.application = this.wizard.application;\n\n        if (this.isActive()) {\n            this._render();\n        }\n    },\n\n    // @method getContext @returns {OrderWizard.Module.CartItems.Context}\n    getContext: function() {\n        const { lines } = this;\n        const item_count = LiveOrderModel.countItems(lines);\n\n        // @class OrderWizard.Module.CartItems.Context\n        return {\n            // @property {LiveOrder.Model} model\n            model: this.model,\n            // @property {Number} itemCount\n            itemCount: item_count,\n            // @property {Boolean} showOpenedAccordion\n            showOpenedAccordion: !!this.options.show_opened_accordion,\n            // @property {Boolean} showOpenedAccordion\n            isAccordionPrimary: !!this.options.is_accordion_primary,\n            // @property {Boolean} showEditCartButton\n            showEditCartButton: !!this.options.show_edit_cart_button,\n            // @property {Boolean} showHeaders\n            showHeaders: !!this.options.show_headers,\n            // @property {Boolean} showMobile\n            showMobile: !!this.options.show_mobile,\n            // @property {Address.Model} address\n            address: this.address,\n            // @property {Boolean} showAddress\n            showAddress:\n                !!this.address && this.options.hide_address !== true && !this.wizard.isMultiShipTo()\n        };\n    }\n});\n"]}
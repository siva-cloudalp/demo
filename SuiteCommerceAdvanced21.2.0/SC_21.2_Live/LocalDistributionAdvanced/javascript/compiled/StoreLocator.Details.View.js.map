{"version":3,"sources":["StoreLocator.Details.View.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;IAeF,IAAM,uBAAuB,GAAQ,YAAY,CAAC,MAAM,CAAC;QACrD,QAAQ,EAAE,yBAAyB;QAEnC,gCAAgC;QAChC,UAAU,EAAE;YACR,EAAE,EAAE,qBAAqB;YACzB,KAAK,EAAE,qBAAqB;SAC/B;QAED,qBAAqB;QACrB,2BAA2B;QAC3B,UAAU,EAAE,SAAS,UAAU,CAAC,OAAO;YACnC,IAAI,CAAC,aAAa,GAAG,IAAI,YAAY,EAAE,CAAC;YACxC,IAAI,CAAC,KAAK,GAAG,IAAI,iBAAiB,EAAE,CAAC;YACrC,IAAI,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YACtC,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,CAAC;YAC/C,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;YACvC,IAAI,CAAC,aAAa,GAAG,4BAAY,CAAC,WAAW,EAAE,CAAC;YAEhD,2BAA2B;YAC3B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;QAC1D,CAAC;QAED,iBAAiB,EAAE,SAAS,iBAAiB;YACzC,IAAM,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;YAEnC,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;gBACpB,IAAI,EAAE;oBACF,UAAU,EAAE,EAAE;iBACjB;gBACD,QAAQ,EAAE,uCAAkB,CAAC,WAAW,EAAE;aAC7C,CAAC,CAAC;QACP,CAAC;QAED,gCAAgC;QAChC,UAAU,EAAE;YACR,UAAU,EAAE;gBACR,OAAO,IAAI,mBAAmB,CAAC;oBAC3B,WAAW,EAAE,IAAI,CAAC,WAAW;oBAC7B,aAAa,EAAE,IAAI,CAAC,aAAa;oBACjC,KAAK,EAAE,IAAI,CAAC,KAAK;iBACpB,CAAC,CAAC;YACP,CAAC;YAED,iBAAiB,EAAE;gBACf,OAAO,IAAI,wBAAwB,CAAC;oBAChC,WAAW,EAAE,IAAI,CAAC,WAAW;oBAC7B,KAAK,EAAE,IAAI,CAAC,KAAK;oBACjB,WAAW,EAAE,IAAI;iBACpB,CAAC,CAAC;YACP,CAAC;SACJ;QAED,gEAAgE;QAChE,UAAU,EAAE,SAAS,UAAU;YAC3B,IAAM,eAAe,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;YAC3E,IAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,gBAAgB,CACrD,eAAe,EACf,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAC7B,CAAC;YAEF,OAAO;gBACH,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,KAAK;gBAE7C,YAAY,EAAE,aAAa;gBAE3B,WAAW,EAAE,eAAe,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,YAAY;aACzD,CAAC;QACN,CAAC;KACJ,CAAC,CAAC;IAEH,OAAS,uBAAuB,CAAC","file":"StoreLocator.Details.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"StoreLocator.Details.View\"/>\n// @module StoreLocator.Details.View\n\nimport * as store_locator_details_tpl from 'store_locator_details.tpl';\nimport { AjaxRequestsKiller } from '../../../Commons/AjaxRequestsKiller/JavaScript/AjaxRequestsKiller';\nimport { ProfileModel } from '../../../Commons/Profile/JavaScript/Profile.Model';\n\nimport StoreLocatorMapView = require('./StoreLocator.Map.View');\nimport LocationVenueDetailsView = require('../../Location.SCA/JavaScript/Location.VenueDetails.View');\nimport StoreLocatorModel = require('./StoreLocator.Model');\nimport ReferenceMap = require('../../StoreLocatorReferenceMapImplementation/JavaScript/ReferenceMap');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\n\nconst StoreLocatorDetailsView: any = BackboneView.extend({\n    template: store_locator_details_tpl,\n\n    // @property {Object} attributes\n    attributes: {\n        id: 'StoreLocatorDetails',\n        class: 'StoreLocatorDetails'\n    },\n\n    // @method initialize\n    // @params {Object} options\n    initialize: function initialize(options) {\n        this.reference_map = new ReferenceMap();\n        this.model = new StoreLocatorModel();\n        this.reference_map.model = this.model;\n        this.routerArguments = options.routerArguments;\n        this.application = options.application;\n        this.profile_model = ProfileModel.getInstance();\n\n        // @property {String} title\n        this.title = this.reference_map.configuration.title();\n    },\n\n    beforeShowContent: function beforeShowContent() {\n        const id = this.routerArguments[0];\n\n        return this.model.fetch({\n            data: {\n                internalid: id\n            },\n            killerId: AjaxRequestsKiller.getKillerId()\n        });\n    },\n\n    // @property {Object} childViews\n    childViews: {\n        LocatorMap: function() {\n            return new StoreLocatorMapView({\n                application: this.application,\n                reference_map: this.reference_map,\n                model: this.model\n            });\n        },\n\n        StoreLocationInfo: function() {\n            return new LocationVenueDetailsView({\n                application: this.application,\n                model: this.model,\n                showAddress: true\n            });\n        }\n    },\n\n    // @method getContext @returns StoreLocator.Details.View.Context\n    getContext: function getContext() {\n        const last_navigation = this.profile_model.get('storeLocator_last_search');\n        const direction_url = this.reference_map.getDirectionsUrl(\n            last_navigation,\n            this.model.get('location')\n        );\n\n        return {\n            title: this.reference_map.configuration.title,\n\n            directionUrl: direction_url,\n\n            redirectUrl: last_navigation ? 'stores' : 'stores/all'\n        };\n    }\n});\n\nexport = StoreLocatorDetailsView;\n"]}
{"version":3,"sources":["ReorderItems.Actions.Quantity.View.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;;;;;;;;;;;;;;;;IA6BF;QAAqD,mDAAqB;QActE,yCAAmB,OAAoB;YAAvC,YACI,iBAAO,SAIV;YAdS,cAAQ,GAAG,kCAAkC,CAAC;YAYpD,KAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YACvB,KAAI,CAAC,IAAI,GAAG,OAAO,CAAC,KAAK,CAAC;;QAC9B,CAAC;QAZS,mDAAS,GAAnB;YACI,OAAO;gBACH,4BAA4B,EAAE,aAAa;gBAC3C,6BAA6B,EAAE,aAAa;aAC/C,CAAC;QACN,CAAC;QASM,oDAAU,GAAjB;YACI,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACnC,IAAM,gBAAgB,GAAG,IAAI,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACjE,IAAM,gBAAgB,GAAG,IAAI,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACjE,IAAM,YAAY,GACd,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,gBAAgB;gBACxC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;gBAC3B,CAAC,CAAC,gBAAgB,CAAC;YAE3B,OAAO;gBACH,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,iBAAiB,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC;gBAC/C,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC;gBACnC,YAAY,EAAE,YAAY;gBAC1B,iBAAiB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;gBAC9C,mBAAmB,EAAE,gBAAgB,GAAG,CAAC;gBACzC,eAAe,EAAE,gBAAgB;gBACjC,mBAAmB,EAAE,gBAAgB,KAAK,CAAC;gBAC3C,eAAe,EAAE,gBAAgB;aACpC,CAAC;QACN,CAAC;QAEM,qDAAW,GAAlB,UAAmB,CAAiB;YAChC,CAAC,CAAC,cAAc,EAAE,CAAC;YAEnB,IAAM,QAAQ,GAAG,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;YAClC,IAAM,QAAQ,GAAQ,QAAQ;iBACzB,MAAM,EAAE;iBACR,IAAI,CAAC,OAAO,CAAC;iBACb,GAAG,EAAE,CAAC;YACX,IAAM,MAAM,GAAG,UAAU,CAAM,QAAQ,CAAC,GAAG,CAAC,CAAC;YAE7C,QAAQ;iBACH,MAAM,EAAE;iBACR,IAAI,CAAC,OAAO,CAAC;iBACb,GAAG,CAAC,MAAM,CAAC,CAAC;QACrB,CAAC;QAEM,qDAAW,GAAlB,UAAmB,CAAiB;YAChC,CAAC,CAAC,cAAc,EAAE,CAAC;YAEnB,IAAM,QAAQ,GAAG,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;YAClC,IAAM,QAAQ,GAAG,QAAQ;iBACpB,MAAM,EAAE;iBACR,IAAI,CAAC,OAAO,CAAC;iBACb,GAAG,EAAE,CAAC;YACX,IAAI,MAAM,GAAG,UAAU,CAAM,QAAQ,CAAC,GAAG,CAAC,CAAC;YAE3C,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;YAE7B,QAAQ;iBACH,MAAM,EAAE;iBACR,IAAI,CAAC,OAAO,CAAC;iBACb,GAAG,CAAC,MAAM,CAAC,CAAC;QACrB,CAAC;QACL,sCAAC;IAAD,CA5EA,AA4EC,CA5EoD,WAAI,GA4ExD;IA5EY,0EAA+B","file":"ReorderItems.Actions.Quantity.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"ReorderItems.Actions.Quantity.View\"/>\n// @Typescript-full\n\nimport * as reorder_items_actions_quantity_tpl from 'reorder_items_actions_quantity.tpl';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\n\nimport { EventsHash, View } from '../../../Commons/Core/JavaScript/View';\nimport { ReorderItemsModel } from './ReorderItems.Model';\n\nimport TriggeredEvent = JQuery.TriggeredEvent;\n\ninterface ReturnedContext {\n    line: ReorderItemsModel;\n    showQuantityInput: boolean;\n    lineId: string;\n    itemQuantity: number;\n    showLastPurchased: boolean;\n    showMinimumQuantity: boolean;\n    minimumQuantity: number;\n    showMaximumQuantity: boolean;\n    maximumQuantity: number;\n}\n\ninterface ViewOptions {\n    model: ReorderItemsModel;\n}\n\nexport class ReorderItemsActionsQuantityView extends View<ReturnedContext> {\n    private readonly options: ViewOptions;\n\n    private line: ReorderItemsModel;\n\n    protected template = reorder_items_actions_quantity_tpl;\n\n    protected getEvents(): EventsHash {\n        return {\n            'click [data-action=\"plus\"]': 'addQuantity',\n            'click [data-action=\"minus\"]': 'subQuantity'\n        };\n    }\n\n    public constructor(options: ViewOptions) {\n        super();\n\n        this.options = options;\n        this.line = options.model;\n    }\n\n    public getContext(): ReturnedContext {\n        const item = this.line.get('item');\n        const minimum_quantity = item.get('_minimumQuantity', true) || 1;\n        const maximum_quantity = item.get('_maximumQuantity', true) || 0;\n        const itemQuantity =\n            this.line.get('quantity') > minimum_quantity\n                ? this.line.get('quantity')\n                : minimum_quantity;\n\n        return {\n            line: this.line,\n            showQuantityInput: !!item.get('_isPurchasable'),\n            lineId: this.line.get('internalid'),\n            itemQuantity: itemQuantity,\n            showLastPurchased: !!this.line.get('trandate'),\n            showMinimumQuantity: minimum_quantity > 1,\n            minimumQuantity: minimum_quantity,\n            showMaximumQuantity: maximum_quantity !== 0,\n            maximumQuantity: maximum_quantity\n        };\n    }\n\n    public addQuantity(e: TriggeredEvent): void {\n        e.preventDefault();\n\n        const $element = jQuery(e.target);\n        const oldValue: any = $element\n            .parent()\n            .find('input')\n            .val();\n        const newVal = parseFloat(<any>oldValue) + 1;\n\n        $element\n            .parent()\n            .find('input')\n            .val(newVal);\n    }\n\n    public subQuantity(e: TriggeredEvent): void {\n        e.preventDefault();\n\n        const $element = jQuery(e.target);\n        const oldValue = $element\n            .parent()\n            .find('input')\n            .val();\n        let newVal = parseFloat(<any>oldValue) - 1;\n\n        newVal = Math.max(1, newVal);\n\n        $element\n            .parent()\n            .find('input')\n            .val(newVal);\n    }\n}\n"]}
{"version":3,"sources":["ProductList.Item.Edit.View.ts"],"names":[],"mappings":"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","file":"ProductList.Item.Edit.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"ProductList.Item.Edit.View\"/>\n\nimport * as _ from 'underscore';\nimport * as product_list_edit_item_tpl from 'product_list_edit_item.tpl';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\n\nimport ProductViewsPriceView = require('../../../Commons/ProductViews/JavaScript/ProductViews.Price.View');\nimport ProductDetailsOptionsSelectorView = require('../../ProductDetails/JavaScript/ProductDetails.Options.Selector.View');\nimport GlobalViewsStarRatingView = require('../../../Commons/GlobalViews/JavaScript/GlobalViews.StarRating.View');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\nimport BackboneFormView = require('../../../Commons/Backbone.FormView/JavaScript/Backbone.FormView');\n\nexport = BackboneView.extend({\n    template: product_list_edit_item_tpl,\n\n    title: Utils.translate('Edit item'),\n\n    page_header: Utils.translate('Edit item'),\n\n    modalClass: 'global-views-modal-large',\n\n    events: {\n        'submit form': 'submitForm',\n        'blur [data-toggle=\"text-option\"]': 'setOption',\n        'click [data-toggle=\"set-option\"]': 'setOption',\n        'change [data-toggle=\"select-option\"]': 'setOption',\n\n        'change [name=\"quantity\"]': 'updateQuantity',\n        'keypress [name=\"quantity\"]': 'ignoreEnter',\n        'click [data-ui-action=\"add\"]': 'addQuantity',\n        'click [data-ui-action=\"minus\"]': 'subQuantity',\n\n        'change [name=\"description\"]': 'updateDescription',\n        'keypress [name=\"description\"]': 'ignoreEnter',\n\n        'change [name=\"priority\"]': 'updatePriority',\n\n        'keydown [data-toggle=\"text-option\"]': 'tabNavigationFix',\n        'focus [data-toggle=\"text-option\"]': 'tabNavigationFix'\n    },\n\n    bindings: {\n        '[name=\"description\"]': 'description'\n    },\n\n    initialize: function(options) {\n        this.application = options.application;\n        this.parentView = options.parentView;\n        this.target = options.target;\n        this.title = options.title;\n        this.page_header = options.title;\n        this.originalQuantity = options.model.get('quantity');\n\n        this.confirm_edit_method = options.confirm_edit_method;\n        this.on('modal-close', this.cancelSubmit, this);\n\n        BackboneFormView.add(this);\n    },\n\n    // Edit the current item\n    submitForm: function(e) {\n        e.preventDefault();\n\n        if (this.model.areAttributesValid(['quantity', 'options'], {})) {\n            const self = this;\n\n            this.$('[data-action=\"edit\"]').attr('disabled', 'true');\n\n            this.model.save(null, { validate: false }).done(function(new_attributes) {\n                self.parentView[self.confirm_edit_method](new_attributes);\n\n                const item_list: any = _.findWhere(\n                    self.application.ProductListModule.Utils.getProductLists().models,\n                    { id: self.parentView.model.id }\n                );\n                item_list &&\n                    item_list\n                        .get('items')\n                        .get(self.model.id)\n                        .set('quantity', new_attributes.quantity);\n\n                if (self.inModal && self.$containerModal) {\n                    self.$containerModal\n                        .removeClass('fade')\n                        .modal('hide')\n                        .data('bs.modal', null);\n                    self.destroy();\n                }\n            });\n        }\n    },\n\n    cancelSubmit: function(e) {\n        const changed = this.model.changedAttributes();\n\n        if (!changed || (_.keys(changed).length == 1 && _.keys(changed)[0] == 'location')) return;\n\n        const keys = _.keys(changed);\n        const prev = _.pick(this.model.previousAttributes(), keys);\n\n        this.model.set(prev, { silent: true });\n        this.model.set('quantity', this.originalQuantity);\n    },\n\n    // Updates the quantity of the model\n    updateQuantity: function(e) {\n        let new_quantity = parseInt(<any>jQuery(e.target).val(), 10);\n        const min_quantity = this.getMinimumQuantity();\n        const max_quantity = this.getMaximumQuantity();\n        const current_quantity = this.model.get('quantity');\n\n        new_quantity = new_quantity >= min_quantity ? new_quantity : min_quantity;\n\n        new_quantity =\n            max_quantity !== 0 && new_quantity > max_quantity ? max_quantity : new_quantity;\n\n        jQuery(e.target).val(new_quantity);\n\n        if (new_quantity !== current_quantity) {\n            this.model.set('quantity', new_quantity);\n            this.storeFocus(e);\n            this.render();\n        }\n    },\n\n    // @method addQuantity Increase the product's Quantity by 1\n    // @param {HTMLEvent} e\n    addQuantity: function(e) {\n        e.preventDefault();\n\n        const $element = jQuery(e.target);\n        const oldValue = $element\n            .parent()\n            .find('input')\n            .val();\n        const newVal = parseInt(<any>oldValue, 10) + 1;\n\n        const input = $element.parent().find('input');\n\n        input.val(newVal);\n        input.trigger('change');\n    },\n\n    // @method subQuantity Decreases the product's Quantity by 1\n    // @param {HTMLEvent} e\n    subQuantity: function(e) {\n        e.preventDefault();\n\n        const $element = jQuery(e.target);\n        const oldValue = $element\n            .parent()\n            .find('input')\n            .val();\n        let newVal = parseInt(<any>oldValue, 10) - 1;\n\n        newVal = Math.max(1, newVal);\n\n        const input = $element.parent().find('input');\n\n        input.val(newVal);\n        input.trigger('change');\n    },\n\n    // @method getMinimumQuantity Returns the minimum purchasable quantity of the active item\n    getMinimumQuantity: function(): number {\n        return this.getMinMaxQuantity('_minimumQuantity', 1);\n    },\n\n    // @method getMaximumQuantity Returns the minimum purchasable quantity of the active item\n    getMaximumQuantity: function(): number {\n        return this.getMinMaxQuantity('_maximumQuantity', 0);\n    },\n\n    getMinMaxQuantity: function(minMax, minMaxNumber): number {\n        if (this.model.isMatrixChild()) {\n            const optionsSelected = this.model.get('itemDetails').itemOptions;\n            const optionsAvailable = this.model.get('itemDetails').getPosibleOptions();\n            const activeItem = this.model.getMatrixItem(optionsSelected, optionsAvailable);\n\n            return activeItem && activeItem.get(minMax) ? activeItem.get(minMax) : minMaxNumber;\n        }\n        return this.model.get('item').get(minMax)\n            ? this.model.get('item').get(minMax)\n            : minMaxNumber;\n    },\n\n    // Updates the description of the model\n    updateDescription: function(e) {\n        const new_description = jQuery(e.target).val();\n        const current_description = this.model.get('description');\n\n        if (new_description !== current_description) {\n            this.model.set('description', new_description);\n            this.storeFocus(e);\n        }\n    },\n\n    // Updates the priority of the model\n    updatePriority: function(e) {\n        const new_priority = jQuery(e.target).val();\n        const current_priority = this.model.get('priority');\n\n        if (new_priority !== current_priority) {\n            this.model.set('priority', { id: new_priority });\n            this.storeFocus(e);\n        }\n    },\n\n    // Sets an item option (matrix or custom)\n    setOption: function(e) {\n        const $target = jQuery(e.currentTarget);\n        let value = $target.val() || $target.data('value') || null;\n        const cart_option_id = $target.closest('[data-type=\"option\"]').data('cart-option-id');\n\n        // Prevent from going away\n        e.preventDefault();\n\n        // if option is selected, remove the value\n        if ($target.data('active')) {\n            value = null;\n        }\n\n        this.model.setOption(cart_option_id, value);\n\n        this.storeFocus(e);\n        this.render();\n    },\n\n    // view.storeFocus\n    // Computes and store the current state of the item and refresh the whole\n    // view, re-rendering the view at the end\n    // This also updates the url, but it does not generates a history point\n    storeFocus: function() {\n        const focused_element = this.$(':focus').get(0);\n\n        this.focusedElement = focused_element ? Utils.getFullPathForElement(focused_element) : null;\n    },\n\n    // view.tabNavigationFix:\n    // When you blur on an input field the whole page gets rendered,\n    // so the function of hitting tab to navigate to the next input stops working\n    // This solves that problem by storing a a ref to the current input\n    tabNavigationFix: function(e) {\n        this.hideError();\n\n        // If the user is hitting tab we set tabNavigation to true,\n        // for any other event we turn ir off\n        this.tabNavigation = e.type === 'keydown' && e.which === 9;\n        this.tabNavigationUpsidedown = e.shiftKey;\n        this.tabNavigationCurrent = Utils.getFullPathForElement(e.target);\n    },\n\n    afterAppend: function() {\n        if (this.focusedElement) {\n            this.$(this.focusedElement).focus();\n        }\n\n        if (this.tabNavigation) {\n            const current_index = this.$(':input').index(this.$(this.tabNavigationCurrent).get(0));\n            const next_index = this.tabNavigationUpsidedown ? current_index - 1 : current_index + 1;\n\n            this.$(':input:eq(' + next_index + ')').focus();\n        }\n    },\n\n    // view.showInModal:\n    // Takes care of showing the pdp in a modal, and changes the template, doesn't trigger the\n    // after events because those are triggered by showContent\n    showInModal: function(options) {\n        this.template = 'product_list_edit_item';\n\n        return this.application.getLayout().showInModal(this, options);\n    },\n\n    // don't want to trigger form submit when user presses enter when in the quantity input text\n    ignoreEnter: function(e) {\n        if (e.keyCode === 13) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    },\n\n    childViews: {\n        'ItemViews.Price': function() {\n            return new ProductViewsPriceView({\n                model: this.model,\n                origin: 'PRODUCTLISTDETAILSEDIT'\n            });\n        },\n        'GlobalViews.StarRating': function() {\n            return new GlobalViewsStarRatingView({\n                model: this.model.get('item')\n            });\n        },\n        'ItemDetails.Options': function() {\n            return new ProductDetailsOptionsSelectorView({\n                model: this.model\n            });\n        }\n    },\n\n    // @method getContext\n    // @return {ProductList.Item.Edit.View.Context}\n    getContext: function() {\n        const line = this.model;\n        const item = line.get('item');\n        const min_quantity = item.get('_minimumQuantity');\n        const max_quantity = this.getMaximumQuantity();\n        const priority = line.get('priority');\n\n        // @class ProductList.Item.Edit.View.Context\n        return {\n            // @property {Boolean} showRating\n            showRating: SC.ENVIRONMENT.REVIEWS_CONFIG && SC.ENVIRONMENT.REVIEWS_CONFIG.enabled,\n            // @property {Integer} quantity\n            quantity: line.get('quantity'),\n            // @property {Boolean} showMinimumQuantity\n            showMinimumQuantity: min_quantity > 1,\n            // @property {Number} minQuantity\n            minQuantity: min_quantity,\n            // @property {Boolean} showMaximumQuantity\n            showMaximumQuantity: max_quantity > 0,\n            // @property {Number} maxQuantity\n            maxQuantity: max_quantity,\n            // @property {String} description\n            description: line.get('description'),\n            // @property {String} productId\n            productId: item.get('internalid'),\n            // @property {String} productName\n            productName: item.get('_name'),\n            // @property {String} itemCreatedDate\n            itemCreatedDate: line.get('created'),\n            // @property {Boolean} isSelectionCompleteForEdit\n            isSelectionCompleteForEdit: line.areAttributesValid(['quantity', 'options'], {}),\n            // @property {Boolean} isPriority1\n            isPriority1: priority.id === '1',\n            // @property {Boolean} isPriority2\n            isPriority2: priority.id === '2',\n            // @property {Boolean} isPriority3\n            isPriority3: priority.id === '3',\n            // @property {ImageContainer} thumbnail\n            thumbnail: this.model.getThumbnail()\n        };\n    }\n});\n"]}
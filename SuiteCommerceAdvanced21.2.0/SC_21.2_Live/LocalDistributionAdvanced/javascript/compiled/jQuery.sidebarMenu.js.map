{"version":3,"sources":["jQuery.sidebarMenu.ts"],"names":[],"mappings":"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","file":"jQuery.sidebarMenu.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"jQuery.sidebarMenu\"/>\n\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\n\nfunction Menu(el) {\n    const wrapper = el;\n    let last_opened_menu = wrapper;\n    const root_ul = wrapper.find('.header-sidebar-menu:first');\n    let animating = false;\n    const has_animation_support = detectAnimationSupport();\n    const class_names = {\n        menuOpened: 'header-sidebar-menu-opened',\n        menuPath: 'header-sidebar-menu-path',\n        menuTransition: 'header-sidebar-menu-transition',\n        animateIn: 'header-sidebar-menu-flyer-in',\n        animateOut: 'header-sidebar-menu-flyer-out',\n        flyer: 'header-sidebar-menu-flyer'\n    };\n    const height_stack = [];\n\n    // initializing menu\n    last_opened_menu.addClass(class_names.menuPath);\n    last_opened_menu.addClass(class_names.menuOpened);\n\n    jQuery(root_ul).on('click', '[data-action=\"push-menu\"]', function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (animating === true) {\n            return;\n        }\n        animating = true;\n\n        const anchor = jQuery(this);\n        const parent_li = anchor.closest('li');\n        const pushing_menu = anchor.next();\n\n        animate(pushing_menu, class_names.animateIn, function() {\n            // change the last opened menu.\n            last_opened_menu.removeClass(class_names.menuOpened);\n            last_opened_menu = parent_li;\n\n            // add current opened subview\n            parent_li.addClass(class_names.menuPath).addClass(class_names.menuOpened);\n        });\n    });\n\n    jQuery(root_ul).on('click', '[data-action=\"pop-menu\"]', function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (animating === true) {\n            return;\n        }\n        animating = true;\n\n        const anchor = jQuery(this); // anchor is the back button\n        const anchor_menu = anchor.closest('ul');\n        const opened_li = anchor.closest('.' + class_names.menuOpened);\n\n        opened_li.removeClass(class_names.menuPath).removeClass(class_names.menuOpened);\n\n        last_opened_menu = opened_li.closest('.' + class_names.menuPath);\n        last_opened_menu.addClass(class_names.menuOpened);\n        animate(anchor_menu, class_names.animateOut);\n    });\n\n    const flyer_className = '.' + class_names.flyer;\n    jQuery(wrapper).on(\n        'animationend MSAnimationEnd oAnimationEnd webkitAnimationEnd',\n        flyer_className,\n        function() {\n            const cb = jQuery(this).data('callback');\n            if (cb) {\n                cb();\n            }\n\n            jQuery(this).remove();\n            animating = false;\n            root_ul.addClass(class_names.menuTransition); // fix ios transition glitch\n        }\n    );\n\n    function animate(sub_menu, animation_class, cb?) {\n        const flyer_menu = sub_menu.clone(false);\n\n        flyer_menu\n            .removeClass()\n            .addClass(class_names.flyer)\n            .insertAfter(root_ul)\n            .addClass(animation_class);\n\n        if (animation_class === class_names.animateIn) {\n            height_stack.push(root_ul.height());\n            root_ul.css('height', flyer_menu.height());\n        } else {\n            root_ul.css('height', height_stack.pop());\n        }\n\n        flyer_menu.data('callback', cb);\n\n        if (!has_animation_support) {\n            if (cb) {\n                cb();\n            }\n            flyer_menu.remove();\n            animating = false;\n            root_ul.addClass(class_names.menuTransition); // fix ios transition glitch\n        }\n    }\n}\n\nfunction detectAnimationSupport(): boolean {\n    const domPrefixes = 'Webkit Moz O ms Khtml'.split(' ');\n    const elm = document.createElement('div');\n\n    if (elm.style.animationName !== undefined) {\n        return true;\n    }\n\n    for (let i = 0; i < domPrefixes.length; i++) {\n        if (elm.style[domPrefixes[i] + 'AnimationName'] !== undefined) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\n(<any>jQuery.fn).sidebarMenu = function() {\n    return this.each(function() {\n        Menu(jQuery(this));\n    });\n};\n\nexport = (<any>jQuery.fn).sidebarMenu;\n"]}
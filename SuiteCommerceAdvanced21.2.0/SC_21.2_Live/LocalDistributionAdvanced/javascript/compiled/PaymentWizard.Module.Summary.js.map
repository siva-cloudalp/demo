{"version":3,"sources":["PaymentWizard.Module.Summary.ts"],"names":[],"mappings":"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","file":"PaymentWizard.Module.Summary.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"PaymentWizard.Module.Summary\"/>\n\nimport * as payment_wizard_summary_module_tpl from 'payment_wizard_summary_module.tpl';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { Configuration } from '../../SCA/JavaScript/Configuration';\nimport { WizardStepModule } from '../../Wizard/JavaScript/Wizard.StepModule';\n\n// @class PaymentWizard.Module.Summary @extend Wizard.Module\nconst PaymentWizardModuleSummary: any = WizardStepModule.extend({\n    template: payment_wizard_summary_module_tpl,\n\n    className: 'PaymentWizard.Module.Summary',\n\n    initialize: function(options) {\n        this.is_active = false;\n        this.options = options;\n        this.wizard = options.wizard;\n\n        this.wizard.model.on('change', jQuery.proxy(this, 'render'));\n    },\n\n    isActive: function(): boolean {\n        return this.is_active;\n    },\n\n    future: function() {\n        this.is_active = false;\n    },\n\n    present: function() {\n        this.is_active = true;\n    },\n\n    past: function() {\n        this.is_active = false;\n    },\n\n    render: function() {\n        this.continueButtonDisabled = '';\n        if (this.options.submit) {\n            this.continueButtonLabel = Utils.translate('Submit');\n        } else {\n            const selected_invoices = this.wizard.model.getSelectedInvoices();\n            this.continueButtonLabel = Utils.translate('Continue');\n\n            if (!selected_invoices.length) {\n                this.continueButtonLabel = Utils.translate('0 Invoices');\n                this.continueButtonDisabled = 'disabled=\"disabled\"';\n            }\n        }\n\n        this._render();\n\n        if (this.isActive()) {\n            this.trigger('change_enable_continue', !this.continueButtonDisabled);\n            this.trigger('change_label_continue', this.continueButtonLabel);\n        }\n    },\n\n    // @method getContext @return {PaymentWizard.Module.Summary.Context}\n    getContext: function() {\n        const { model } = this.wizard;\n        const currency = model.getCurrency();\n\n        if (currency) {\n            this.currencySymbol = currency.symbol;\n        }\n\n        // @class PaymentWizard.Module.Summary.Context\n        return {\n            // @property {Number} selectedInvoicesLength\n            selectedInvoicesLength: model.getSelectedInvoices().length,\n            // @property {String} invoiceTotalFormatted\n            invoiceTotalFormatted: model.get('invoices_total_with_discount_formatted'),\n            // @property {String} paymentFormatted\n            paymentFormatted: model.get('payment_total_with_discount_formatted'),\n            // @property {String} depositTotalFormatted\n            depositTotalFormatted: Utils.formatCurrency(\n                model.get('deposits_total'),\n                this.currencySymbol\n            ),\n            // @property {String} creditTotalFormatted\n            creditTotalFormatted: Utils.formatCurrency(\n                model.get('credits_total'),\n                this.currencySymbol\n            ),\n            // @property {Boolean} showTotalLabel\n            showTotalLabel: !!this.options.total_label,\n            // @property {String} totalLabel\n            totalLabel: this.options.total_label\n                ? this.options.total_label\n                : Utils.translate('Estimated payment'),\n            // @property {Boolean} showEstimatedAsInvoiceTotal\n            showEstimatedAsInvoiceTotal: this.options.show_estimated_as_invoices_total,\n            // @property {Boolean} showCreditCardInformatioRequrieLabel\n            showCreditCardInformatioRequrieLabel: !!(\n                this.options.total_label &&\n                model.get('payment') &&\n                Configuration.get('siteSettings.checkout.requireccsecuritycode') === 'T'\n            ),\n            // @property {Boolean} showPaymentMethodRequireLabel\n            showPaymentMethodRequireLabel: !!(this.options.total_label && !model.get('payment')),\n            // @property {String} continueButtonDisabled\n            continueButtonDisabled: this.continueButtonDisabled,\n            // @property {String} continueButtonLabel\n            continueButtonLabel: this.continueButtonLabel\n        };\n    }\n});\n\nexport = PaymentWizardModuleSummary;\n"]}
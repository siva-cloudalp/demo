{"version":3,"sources":["ProductList.ControlNewItem.View.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;IAWF,OAAS,YAAY,CAAC,MAAM,CAAC;QACzB,OAAO,EAAE,KAAK;QAEd,QAAQ,EAAE,iCAAiC;QAE3C,MAAM,EAAE;YACJ,wCAAwC,EAAE,gBAAgB;YAC1D,8CAA8C,EAAE,iBAAiB;SACpE;QAED,QAAQ,EAAE;YACN,eAAe,EAAE,MAAM;SAC1B;QAED,UAAU,EAAE,UAAS,OAAO;YACxB,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;YACvC,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;YAC3B,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;YAErC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAC/B,CAAC;QAED,6CAA6C;QAC7C,cAAc,EAAE,UAAS,KAAK;YAC1B,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,KAAK,CAAC,cAAc,EAAE,CAAC;YAEvB,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,uBAAuB,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE;gBACnE,OAAO;aACV;YACD,IAAM,IAAI,GAAG,IAAI,CAAC;YAClB,IAAM,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAE1C,IAAI,CAAC,YAAY,EAAE;gBACf,OAAO;aACV;YAED,YAAY,CAAC,IAAI,CAAC;gBACd,IAAM,gBAAgB,GAAG,IAAI,CAAC,KAAK,CAAC;gBACpC,IAAM,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC;gBAEpC,4BAA4B;gBAC5B,IAAI,WAAW,CAAC,IAAI,KAAK,MAAM,EAAE;oBAC7B,kBAAkB;oBAClB,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;oBACjF,WAAW,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC;wBAClD,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;wBACxD,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,KAAK,CAAC,qBAAqB,EAAE,CAAC;oBACrE,CAAC,CAAC,CAAC;iBACN;qBAAM;oBACH,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;oBAC7C,WAAW,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC;wBACnD,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,KAAK,CAAC,qBAAqB,EAAE,CAAC;oBACrE,CAAC,CAAC,CAAC;iBACN;YACL,CAAC,CAAC,CAAC;QACP,CAAC;QAED,yDAAyD;QACzD,eAAe,EAAE,UAAS,CAAC;YACvB,CAAC,IAAI,CAAC,CAAC,eAAe,EAAE,CAAC;YACzB,IAAM,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAC5B,IAAM,aAAa,GAAG,GAAG,CAAC,IAAI,CAAC,0DAA0D,CAAC,CAAC;YAE3F,IAAI,aAAa,EAAE;gBACf,aAAa,CAAC,IAAI,EAAE,CAAC;gBACrB,IAAI,CAAC,CAAC,CAAC,qCAAqC,CAAC,CAAC,KAAK,EAAE,CAAC;gBACtD,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;aAC7B;QACL,CAAC;QAED,uEAAuE;QACvE,UAAU,EAAE;YACR,OAAO;gBACH,iDAAiD;gBACjD,+BAA+B;gBAC/B,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,KAAK,MAAM;aAC5C,CAAC;QACN,CAAC;KACJ,CAAC,CAAC","file":"ProductList.ControlNewItem.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"ProductList.ControlNewItem.View\"/>\n\nimport * as product_list_control_new_item_tpl from 'product_list_control_new_item.tpl';\nimport * as jQuery from '../../Core/JavaScript/jQuery';\n\nimport BackboneView = require('../../BackboneExtras/JavaScript/Backbone.View');\nimport BackboneFormView = require('../../Backbone.FormView/JavaScript/Backbone.FormView');\n\n// @class ProductList.ControlNewItem.View @extends Backbone.View\nexport = BackboneView.extend({\n    tagName: 'div',\n\n    template: product_list_control_new_item_tpl,\n\n    events: {\n        'submit [data-action=\"create-and-move\"]': 'createMoveList',\n        'click [data-action=\"show-add-new-list-form\"]': 'showNewListForm'\n    },\n\n    bindings: {\n        '[name=\"name\"]': 'name'\n    },\n\n    initialize: function(options) {\n        this.application = options.application;\n        this.model = options.model;\n        this.parentView = options.parentView;\n\n        BackboneFormView.add(this);\n    },\n\n    // Handle save new product list form postback\n    createMoveList: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        if (!this.parentView.validateGiftCertificate(this.parentView.product)) {\n            return;\n        }\n        const self = this;\n        const save_promise = this.saveForm(event);\n\n        if (!save_promise) {\n            return;\n        }\n\n        save_promise.done(function() {\n            const new_product_list = self.model;\n            const parent_view = self.parentView;\n\n            // add the product list item\n            if (parent_view.mode === 'move') {\n                // create new list\n                self.application.ProductListModule.Utils.getProductLists().add(new_product_list);\n                parent_view.moveProductHandler(new_product_list).then(() => {\n                    parent_view.collection.add(self.model, { merge: true });\n                    self.application.ProductListModule.Utils.updateProductListMenu();\n                });\n            } else {\n                parent_view.collection.add(new_product_list);\n                parent_view.addNewProductToList(new_product_list).then(() => {\n                    self.application.ProductListModule.Utils.updateProductListMenu();\n                });\n            }\n        });\n    },\n\n    // @method showNewListForm Shows the create new list form\n    showNewListForm: function(e) {\n        e && e.stopPropagation();\n        const $el = jQuery(this.el);\n        const new_list_form = $el.find('form[data-type=\"product-list-control-add-new-list-form\"]');\n\n        if (new_list_form) {\n            new_list_form.show();\n            this.$('[data-type=\"new-product-list-name\"]').focus();\n            $el.find(e.target).hide();\n        }\n    },\n\n    // @method getContext @return {ProductList.ControlNewItem.View.Context}\n    getContext: function() {\n        return {\n            // @class ProductList.ControlNewItem.View.Context\n            // @property {Boolean} isMoving\n            isMoving: this.parentView.mode === 'move'\n        };\n    }\n});\n"]}
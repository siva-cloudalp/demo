{"version":3,"sources":["ViewCertification.View.ts"],"names":[],"mappings":"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","file":"ViewCertification.View.js","sourcesContent":["///<amd-module name=\"ViewCertification.View\"/>\r\nimport * as _ from 'underscore';\r\nimport * as view_certification_tpl from 'View_Certification.tpl';\r\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\r\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\r\nimport { ListHeaderView } from '../../../Commons/ListHeader/JavaScript/ListHeader.View';\r\nimport LiveOrderModel = require('../../../Commons/LiveOrder/JavaScript/LiveOrder.Model');\r\nimport { ProfileModel } from '../../../Commons/Profile/JavaScript/Profile.Model';\r\nimport ViewCertificationModel = require('./ViewCertification.Model');\r\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\r\n\r\nconst ViewCertificationView:any = BackboneView.extend({\r\n   // @property {Function} template\r\n   template: view_certification_tpl,\r\n   // @property {String} title\r\n   title: Utils.translate('View Certification'),\r\n   // @property {String} className\r\n   className: 'ViewCertification',\r\n   // @property {String} page_header\r\n   page_header: Utils.translate('Certification'),\r\n   // @property {Object} attributes\r\n   attributes: {\r\n       id: 'viewcertification',\r\n       class: 'viewcertification'\r\n   },\r\n   // @method getBreadcrumbPages\r\n   getBreadcrumbPages: function () {\r\n       return {\r\n           text: this.title,\r\n           href: 'viewcertification'\r\n       };\r\n   },\r\n    // @propery {Object} events\r\n    events: {\r\n      \r\n  },\r\n   initialize: function (options) {\r\n      // this.model = new ViewCertificationModel();\r\n        // var promise = this.model.fetch().then(function(res){\r\n        //       console.log(res,'res');\r\n              \r\n        // })\r\n   },\r\n   \r\n   childViews: {},\r\n   beforeShowContent: function () {\r\n    var promise = jQuery.Deferred();\r\n     var self = this;\r\n     self.model = new ViewCertificationModel();\r\n    self.model.fetch().then(function(res){\r\n        self.model.set('record',res.record)\r\n        self.model.set('roles',res.roles)\r\n      promise.resolve();\r\n      \r\n    })\r\n    return promise;\r\n  },\r\n  getContext: function (){\r\n    var Model = this.model.get('record');\r\n    var profileModel = ProfileModel.getInstance();\r\n    var NoDataFound = false;\r\n    var CustViewCertificates = [];\r\n    var Record ;\r\n    var getRoleBasedPdf ;\r\n    if(_.isNull(Model)){\r\n      NoDataFound = true;\r\n    }else{\r\n      getRoleBasedPdf =  Model.map(rec =>{\r\n        let email1 =  rec.columns.email;\r\n        let email2 =   profileModel.get('email');\r\n        if(email1 === email2){\r\n          return rec;\r\n        }\r\n      });\r\n    }\r\n    let MatchRolesPdf = _.compact(getRoleBasedPdf);\r\n    if(_.isEmpty(MatchRolesPdf)){\r\n      Record = Model;\r\n    }else{\r\n      Record = MatchRolesPdf ;\r\n    }\r\n    _.each(Record,(doc:any) =>{\r\n      if(doc.columns.custrecord_pdf_doc_1)\r\n      CustViewCertificates .push({pdf: doc.columns.custrecord_pdf_doc_1.name,\r\n        id:doc.columns.custrecord_pdf_doc_1.internalid\r\n      });\r\n      if(doc.columns.custrecord_pdf_doc_2)\r\n      CustViewCertificates .push({pdf: doc.columns.custrecord_pdf_doc_2.name,\r\n        id:doc.columns.custrecord_pdf_doc_2.internalid\r\n      });\r\n      if(doc.columns.custrecord_pdf_doc_3)\r\n      CustViewCertificates .push({pdf: doc.columns.custrecord_pdf_doc_3.name,\r\n        id:doc.columns.custrecord_pdf_doc_3.internalid\r\n      });\r\n      if(doc.columns.custrecord_pdf_doc_4)\r\n      CustViewCertificates .push({pdf: doc.columns.custrecord_pdf_doc_4.name,\r\n        id:doc.columns.custrecord_pdf_doc_4.internalid\r\n      });  \r\n    });\r\n    return {\r\n      //@property {Array}\r\n      records:CustViewCertificates,\r\n      NoDataFound:NoDataFound\r\n    }\r\n  }\r\n\r\n})\r\nexport = ViewCertificationView;"]}
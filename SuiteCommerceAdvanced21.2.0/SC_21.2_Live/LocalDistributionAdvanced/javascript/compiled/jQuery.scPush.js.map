{"version":3,"sources":["jQuery.scPush.js"],"names":[],"mappings":"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","file":"jQuery.scPush.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/*\n@module jQueryExtras\n\n#scPush\n\nA jQuery plugin for manag push content that comes from the right side. To set up:\n\n * invoke this plugin to the content that will be pushed\n * that content must define a 'data-id' attribute (if not, it will be automatically generated)\n * add an element (button or else) to be the 'pusher' by adding data-type='sc-pusher'\n * that pusher must define a 'data-target' with the data-id of the push content\n * previously defined (if not defined, it will be automatically generated)\n\nAvailable options:\n\n\t{\n\t\ttarget: 'mobile'/'tablet' -> only for mobile or both mobile and tablet\n\t}\n\nDefault options:\n\n\t{\n\t\ttarget: 'mobile' -> mobile only\n\t}\n*/\ndefine('jQuery.scPush', ['jQuery', 'underscore', 'Utils'], function(jQuery, _, Utils) {\n    jQuery.fn.scPush = function(options) {\n        const settings = jQuery.extend({}, jQuery.fn.push.defaults, options);\n        const $main = jQuery('.layout-container');\n\n        // add an overlay on tablet devices to avoid unexpected behaviors (avoid navigations outside the pusher)\n        setOverlay();\n\n        // remove unnecesary styles when navigating (caused by pusher content events)\n        $main.removeClass('sc-pushing');\n        $main.css({ 'margin-top': '', height: '' }).removeClass('sc-pushing-partial');\n\n        // check if there was an opened pusher\n        const opened_pusher_id = jQuery('[data-pushing]').attr('data-pushing');\n        const opened_pusher = jQuery('[data-id=\"' + opened_pusher_id + '\"]');\n\n        if (opened_pusher.length > 0) {\n            opened_pusher.addClass('sc-pushing-reopened');\n            openPushContent(opened_pusher_id, true);\n            $main.addClass('sc-pushing');\n        }\n\n        return this.each(function() {\n            const self = this;\n            const $this = jQuery(this);\n            let $push_header = $this.find('.sc-pusher-header, [data-type=\"sc-pusher-header\"]');\n\n            if (!$push_header.length) {\n                // add push header containing back button\n                $push_header = jQuery(\n                    '<div class=\"sc-pusher-header\"><a href=\"#\" class=\"sc-pusher-header-back\" data-action=\"sc-pusher-dismiss\">' +\n                        _('Back').translate() +\n                        '</a></div>'\n                );\n                $this.prepend($push_header);\n            }\n\n            // add data-type for styling\n            const push_target_size =\n                settings.target === 'tablet' ? 'sc-pushable-md' : 'sc-pushable-xs';\n            $this.attr('data-pusher', push_target_size);\n\n            // get push content id (assign a new one if doesn't have)\n            let id = $this.data('id');\n            if (!id) {\n                id = 'sc-pusher-' + new Date().getTime();\n                $this.attr('data-id', id);\n            }\n\n            const openFn = jQuery.proxy(function(e) {\n                const proxy = jQuery.proxy(openPushContent, this);\n\n                if (options && options.beforeOpen) {\n                    const res = options.beforeOpen(proxy, e);\n                    if (!res) {\n                        return;\n                    }\n                } else {\n                    e.preventDefault();\n                }\n\n                // save current scroll height\n                this.currentScroll = jQuery(document.body).scrollTop();\n\n                // open the pusher content\n                proxy(id);\n\n                if (options && options.afterOpen) {\n                    options.afterOpen(proxy, e);\n                }\n            }, this);\n\n            const closeFn = jQuery.proxy(function(e) {\n                e.preventDefault();\n\n                $this.trigger('beforeClose');\n\n                jQuery('#content').removeAttr('data-pushing');\n\n                jQuery('[data-id=\"' + id + '\"]').removeClass('sc-pushing-reopened');\n\n                $main.removeClass('sc-pushing');\n\n                jQuery('[data-view=\"Footer\"]').show();\n\n                if (Utils.getViewportWidth() < 768) {\n                    this.currentScroll && jQuery(document.body).scrollTop(this.currentScroll);\n                } else {\n                    $main.css({ 'margin-top': '', height: '' }).removeClass('sc-pushing-partial');\n\n                    jQuery(document.body).scrollTop(this.currentScroll);\n                    jQuery('.main-push-overlay').removeClass('active');\n                }\n\n                if ($this.attr('data-action')) {\n                    $this.attr('data-action', $this.attr('data-action').replace('sc-pushing', ''));\n                }\n\n                $this.trigger('afterClose');\n            }, this);\n\n            // search for pusher and add handler\n            if (!settings.selector) {\n                // open push action\n                const pusher = jQuery('[data-type=\"sc-pusher\"][data-target=\"' + id + '\"]');\n                pusher.on('click', openFn);\n            } else if (id === settings.selector.attr('data-target')) {\n                settings.selector.on('click', openFn);\n            }\n\n            $this.on('open', openFn);\n\n            // close push action\n\n            $this.on('close', closeFn);\n\n            $push_header.find('[data-action=\"sc-pusher-dismiss\"]').on('click', closeFn);\n        });\n    };\n\n    function setOverlay() {\n        if (Utils.getViewportWidth() >= 768) {\n            const $main = jQuery('.layout-container');\n            const overlay = jQuery(\n                '<div class=\"main-push-overlay\" data-action=\"main-push-overlay-hide\"></div>'\n            );\n\n            $main.find('.main-push-overlay').remove();\n            $main.append(overlay);\n\n            overlay.on('click', function() {\n                jQuery(this).removeClass('active');\n                const pushed_content = jQuery('[data-action=\"sc-pushing\"]');\n\n                jQuery('#content').removeAttr('data-pushing');\n                jQuery('[data-id=\"' + pushed_content.attr('data-id') + '\"]').removeClass(\n                    'sc-pushing-reopened'\n                );\n                $main.removeClass('sc-pushing');\n                jQuery('[data-view=\"Footer\"]').show();\n\n                $main.css({ 'margin-top': '', height: '' }).removeClass('sc-pushing-partial');\n\n                pushed_content.attr(\n                    'data-action',\n                    pushed_content.attr('data-action').replace('sc-pushing', '')\n                );\n\n                // scroll back to the original scroll position\n                jQuery(document.body).scrollTop(pushed_content[0].currentScroll);\n            });\n        }\n    }\n\n    function openPushContent(id, isStatic) {\n        // let the content know what pusher is opened (useful when navigating so it remains open)\n        jQuery('#content').attr('data-pushing', id);\n\n        jQuery('[data-id=\"' + id + '\"]').attr('data-action', 'sc-pushing');\n\n        const open_handler = jQuery.proxy(onPushOpened, this);\n\n        if (isStatic) {\n            open_handler();\n        } else {\n            jQuery('[data-id=\"' + id + '\"][data-action=\"sc-pushing\"]').one(\n                'webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend',\n                function(e) {\n                    open_handler();\n\n                    // remove handlers cause jQuery 'one' in Chrome will execute both webkitTransitionEnd and transitionend\n                    jQuery(this).off(\n                        'webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend'\n                    );\n                }\n            );\n        }\n    }\n\n    function onPushOpened() {\n        const $main = jQuery('.layout-container');\n\n        if (Utils.getViewportWidth() < 768) {\n            $main.addClass('sc-pushing');\n            jQuery('[data-view=\"Footer\"]').hide();\n        } else {\n            $main\n                .css({ 'margin-top': -this.currentScroll, height: '+=' + this.currentScroll })\n                .addClass('sc-pushing-partial');\n            jQuery('.main-push-overlay').addClass('active');\n        }\n    }\n\n    jQuery.fn.push.defaults = {\n        target: 'mobile',\n        appendPusher: false\n    };\n});\n"]}
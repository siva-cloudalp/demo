{"version":3,"sources":["Configuration.ts"],"names":[],"mappings":"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","file":"Configuration.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Configuration\"/>\nimport * as _ from 'underscore';\n\nimport * as product_views_option_radio_tpl from 'product_views_option_radio.tpl';\nimport * as product_views_option_tile_tpl from 'product_views_option_tile.tpl';\nimport * as product_views_option_text_tpl from 'product_views_option_text.tpl';\nimport * as product_views_option_color_tpl from 'product_views_option_color.tpl';\nimport * as product_views_option_dropdown_tpl from 'product_views_option_dropdown.tpl';\nimport * as product_views_option_facets_color_tpl from 'product_views_option_facets_color.tpl';\nimport * as product_views_option_facets_tile_tpl from 'product_views_option_facets_tile.tpl';\nimport * as transaction_line_views_selected_option_tpl from 'transaction_line_views_selected_option.tpl';\nimport * as transaction_line_views_selected_option_color_tpl from 'transaction_line_views_selected_option_color.tpl';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\n\n// @module SC\n// @class SC.Configuration\n// This class is responsible of creating the front end\n// SC.Configuration object from the properties bootstrapped\n// in SC.CONFIGURATION from backend. Also it does some properties post processing.\n\nconst baseConfiguration = SC.CONFIGURATION || {};\n\nbaseConfiguration.ItemOptions = baseConfiguration.ItemOptions || {};\n\nbaseConfiguration.ItemOptions.defaultTemplates = baseConfiguration.ItemOptions.defaultTemplates || {\n    // @class ItemOptions.DefaultTemplates\n    // @property {DefaultOptionTemplateSpecification} selectorByType\n    // each apply to specific item option types\n    selectorByType: {\n        select: product_views_option_tile_tpl,\n        default: product_views_option_text_tpl\n    },\n    // for rendering selected options in the shopping cart\n    selectedByType: {\n        default: transaction_line_views_selected_option_tpl\n    },\n    facetCellByType: {\n        default: product_views_option_facets_color_tpl\n    }\n};\n\nconst item_option_templates = {\n    'transaction_line_views_selected_option_color.tpl': transaction_line_views_selected_option_color_tpl,\n    'transaction_line_views_selected_option.tpl': transaction_line_views_selected_option_tpl,\n\n    'product_views_option_color.tpl': product_views_option_color_tpl,\n    'product_views_option_dropdown.tpl': product_views_option_dropdown_tpl,\n    'product_views_option_radio.tpl': product_views_option_radio_tpl,\n    'product_views_option_text.tpl': product_views_option_text_tpl,\n    'product_views_option_tile.tpl': product_views_option_tile_tpl,\n\n    'product_views_option_facets_color.tpl': product_views_option_facets_color_tpl,\n    'product_views_option_facets_tile.tpl': product_views_option_facets_tile_tpl\n};\n\n_.each(baseConfiguration.ItemOptions.optionsConfiguration || [], function(item_option: any) {\n    if (item_option.templateSelected && item_option_templates[item_option.templateSelected]) {\n        item_option.templates = item_option.templates || {};\n        item_option.templates.selected = item_option_templates[item_option.templateSelected];\n    }\n\n    if (item_option.templateSelector && item_option_templates[item_option.templateSelector]) {\n        item_option.templates = item_option.templates || {};\n        item_option.templates.selector = item_option_templates[item_option.templateSelector];\n    }\n\n    if (item_option.templateFacetCell && item_option_templates[item_option.templateFacetCell]) {\n        item_option.templates = item_option.templates || {};\n        item_option.templates.facetCell = item_option_templates[item_option.templateFacetCell];\n    }\n});\n\nconst Configuration = {\n    searchPrefs: {\n        // Keyword formatter function will format the text\n        // entered by the user in the search box.\n        // This default implementation will remove invalid keyword characters like *()+-=\"\n        keywordsFormatter: function(keywords) {\n            if (keywords === '||') {\n                return '';\n            }\n\n            const anyLocationRegex = /[\\(\\)\\[\\]\\{\\~\\}\\!\\\"\\:\\/]{1}/g; // characters that cannot appear at any location\n            const beginingRegex = /^[\\*\\-\\+]{1}/g; // characters that cannot appear at the begining\n            const replaceWith = ''; // replacement for invalid chars\n\n            return keywords\n                .replace(anyLocationRegex, replaceWith)\n                .replace(beginingRegex, replaceWith);\n        }\n    },\n\n    bxSliderDefaults: {\n        minSlides: 2,\n        slideWidth: 228,\n        maxSlides: 5,\n        forceStart: true,\n        pager: false,\n        touchEnabled: true,\n        nextText:\n            '<a class=\"item-relations-related-carousel-next\"><span class=\"control-text\">' +\n            Utils.translate('next') +\n            '</span> <i class=\"carousel-next-arrow\"></i></a>',\n        prevText:\n            '<a class=\"item-relations-related-carousel-prev\"><i class=\"carousel-prev-arrow\"></i> <span class=\"control-text\">' +\n            Utils.translate('prev') +\n            '</span></a>',\n        controls: true,\n        preloadImages: 'all'\n    },\n\n    siteSettings: (SC && SC.ENVIRONMENT && SC.ENVIRONMENT.siteSettings) || {},\n\n    get: function(path, defaultValue) {\n        return Utils.getPathFromObject(this, path, defaultValue);\n    },\n\n    getRegistrationType: function(): string {\n        // registrationmandatory is 'T' when customer registration is disabled\n        if (Configuration.get('siteSettings.registration.registrationmandatory', null) === 'T') {\n            // no login, no register, checkout as guest only\n            return 'disabled';\n        }\n        if (Configuration.get('siteSettings.registration.registrationoptional', null) === 'T') {\n            // login, register, guest\n            return 'optional';\n        }\n        if (Configuration.get('siteSettings.registration.registrationallowed', null) === 'T') {\n            // login, register, no guest\n            return 'required';\n        }\n        // login, no register, no guest\n        return 'existing';\n    }\n};\n\n// Deep extend\njQuery.extend(true, baseConfiguration, Configuration);\n\n// BACKWARDS COMPATIBILITY: all the following is a normalization\n// to the object baseConfiguration to guarantee backguard\n// compatibility with pre montblanc in the sense of configuration\n// property names in application.getConfig('foo')\n\n// fixing some properties for backward compatibility w montblanc:\nconst imageSizeMapping = {};\n\n_.each(baseConfiguration.imageSizeMapping, function(item: any) {\n    imageSizeMapping[item.id] = item.value;\n});\n\nbaseConfiguration.imageSizeMapping = imageSizeMapping;\n\nconst searchApiMasterOptions = {};\n\n_.each(baseConfiguration.searchApiMasterOptions, function(item: any) {\n    searchApiMasterOptions[item.id] = {\n        fieldset: item.fieldset,\n        include: item.include\n    };\n});\n\nbaseConfiguration.searchApiMasterOptions = searchApiMasterOptions;\n// social sharing backward compatibility\n\nconst addThisOptions = {};\n\n_.each(baseConfiguration.addThis && baseConfiguration.addThis.options, function(item: any) {\n    addThisOptions[item.key] = item.value;\n});\n\nif (baseConfiguration.addThis) {\n    baseConfiguration.addThis.options = addThisOptions;\n}\n\nconst addThisServicesToShow = {};\n\n_.each(baseConfiguration.addThis && baseConfiguration.addThis.servicesToShow, function(item: any) {\n    addThisServicesToShow[item.key] = item.value;\n});\n\nif (baseConfiguration.addThis) {\n    baseConfiguration.addThis.servicesToShow = addThisServicesToShow;\n}\n\n_.each(baseConfiguration.paymentmethods, function(item: any) {\n    try {\n        if (item.regex) {\n            item.regex = new RegExp(item.regex);\n        }\n    } catch (ex) {}\n});\n\nif (baseConfiguration.productReviews && baseConfiguration.productReviews.sortOptions) {\n    _.each(baseConfiguration.productReviews.sortOptions, function(sortOptions: any) {\n        try {\n            sortOptions.params = JSON.parse(sortOptions.params || '{}') || {};\n        } catch (ex) {}\n    });\n}\nif (baseConfiguration.productReviews && baseConfiguration.productReviews.filterOptions) {\n    _.each(baseConfiguration.productReviews.filterOptions, function(filterOptions: any) {\n        try {\n            filterOptions.params = JSON.parse(filterOptions.params || '{}') || {};\n        } catch (ex) {}\n    });\n}\n\n// extraTranslations\nconst currentLocale =\n    SC && SC.ENVIRONMENT && SC.ENVIRONMENT.currentLanguage && SC.ENVIRONMENT.currentLanguage.locale;\n\nSC.Translations = SC.Translations || {};\n_.extend(SC.Translations, SC.TranslationsExt || {});\n\n_.each(baseConfiguration.extraTranslations, function(item: any) {\n    if (SC.Translations && item[currentLocale]) {\n        SC.Translations[item.key] = item[currentLocale];\n    }\n});\n\n// navigation data\nbaseConfiguration.navigationData = baseConfiguration.navigationData || [];\n\n// navigation hierarchy bindings.\n_.each(baseConfiguration.navigationData, function(entry: any) {\n    if (!entry) {\n        return;\n    }\n    // These 2 ifs were done for backwards compatibility.\n    // The correct way of fixing it would have been modifying the navigation.json\n    // Replacing dataTouchpoint with data-touchpoint and dataHashtag with data-hashtag.\n    // This way when rendering the Header.Menu.View it will pass the entry to\n    // Utils.objectToAtrributes and pass the property name filter\n    if (entry.dataTouchpoint) {\n        entry['data-touchpoint'] = entry.dataTouchpoint;\n    }\n    if (entry.dataHashtag) {\n        entry['data-hashtag'] = entry.dataHashtag;\n    }\n\n    if (entry.placeholder) {\n        entry.text = '';\n    }\n    entry.class = 'header-menu-level' + entry.level + '-anchor';\n\n    if (entry.parentId) {\n        let parent = _.find(baseConfiguration.navigationData, function(e: any) {\n            return e.id === entry.parentId;\n        });\n        parent = parent || {};\n        parent.categories = parent.categories || [];\n        parent.categories.push(entry);\n    }\n    if (entry.classnames) {\n        entry.class += ' ' + entry.classnames;\n    }\n});\n\n// Now, remove  non top level nav entries from the array (root nodes)\n// heads up ! we have to re-iterate :(\n// this is the correct way of deleting and iterating an array - not _.each()\nfor (let i = 0; i < baseConfiguration.navigationData.length; i++) {\n    const entry = baseConfiguration.navigationData[i];\n    if (!entry || entry.level > 1) {\n        baseConfiguration.navigationData.splice(i, 1);\n        i--;\n    }\n}\n\nUtils.setPathFromObject(\n    baseConfiguration,\n    'forms.address.showAddressLine2',\n    Utils.getPathFromObject(baseConfiguration, 'forms.address.showAddressLineTwo', true)\n);\n\nexport { baseConfiguration as Configuration };\n"]}
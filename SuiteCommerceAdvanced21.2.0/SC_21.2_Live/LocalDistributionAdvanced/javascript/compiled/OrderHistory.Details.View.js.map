{"version":3,"sources":["OrderHistory.Details.View.ts"],"names":[],"mappings":"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","file":"OrderHistory.Details.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"OrderHistory.Details.View\"/>\n\nimport * as _ from 'underscore';\nimport * as order_history_details_tpl from 'order_history_details.tpl';\nimport * as order_history_packages_tpl from 'order_history_packages.tpl';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { Configuration } from '../../SCA/JavaScript/Configuration';\nimport { AjaxRequestsKiller } from '../../../Commons/AjaxRequestsKiller/JavaScript/AjaxRequestsKiller';\nimport { GlobalViewsMessageView } from '../../../Commons/GlobalViews/JavaScript/GlobalViews.Message.View';\n\nimport TransactionLineViewsCellActionableView = require('../../../Commons/Transaction.Line.Views/JavaScript/Transaction.Line.Views.Cell.Actionable.View');\nimport TransactionLineViewsQuantityAmountView = require('../../../Commons/Transaction.Line.Views/JavaScript/Transaction.Line.Views.QuantityAmount.View');\nimport OrderHistoryItemActionsView = require('./OrderHistory.Item.Actions.View');\nimport { AddressDetailsView } from '../../../Commons/Address/JavaScript/Address.Details.View';\nimport GlobalViewsFormatPaymentMethodView = require('../../../Commons/GlobalViews/JavaScript/GlobalViews.FormatPaymentMethod.View');\nimport OrderHistoryModel = require('./OrderHistory.Model');\nimport OrderHistoryPayments = require('./OrderHistory.Payments.View');\nimport OrderHistoryOtherPayments = require('./OrderHistory.Other.Payments.View');\nimport OrderHistoryPackagesView = require('./OrderHistory.Packages.View');\nimport OrderHistoryReturnAutorizationView = require('./OrderHistory.ReturnAutorization.View');\nimport OrderHistorySummary = require('./OrderHistory.Summary.View');\nimport TransactionCollection = require('../../../Commons/Transaction/JavaScript/Transaction.Collection');\nimport LiveOrderModel = require('../../../Commons/LiveOrder/JavaScript/LiveOrder.Model');\nimport Tracker = require('../../../Commons/Tracker/JavaScript/Tracker');\nimport BigNumber = require('../../../Commons/Utilities/JavaScript/BigNumber');\nimport BackboneCollectionView = require('../../../Commons/Backbone.CollectionView/JavaScript/Backbone.CollectionView');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\n\n// @class OrderHistory.Details.View @extend Backbone.View\nconst OrderHistoryDetailsView: any = BackboneView.extend({\n    // @property {Function} template\n    template: order_history_details_tpl,\n\n    // @property {String} title\n    title: Utils.translate('Purchase Details'),\n\n    // @property {String} page_header\n    page_header: Utils.translate('Purchase Details'),\n\n    // @property {Object} attributes\n    attributes: {\n        id: 'PurchaseDetail',\n        class: 'OrderDetailsView'\n    },\n\n    // @property {Object} events\n    events: {\n        'click [data-action=\"add-to-cart\"]': 'addToCart',\n        'click [data-action=\"go-to-returns\"] a': 'goToReturns'\n    },\n\n    // @method initialize\n    initialize: function(options) {\n        this.application = options.application;\n        this.id = options.routerArguments[1];\n        this.recordtype = options.routerArguments[0];\n\n        const { isBasic } = this.application.getConfig();\n        this.is_basic = !!isBasic;\n\n        const self = this;\n\n        this.model = new OrderHistoryModel();\n\n        this.model.on('change:cancel_response', function(model, response_code) {\n            let message = '';\n            let type = '';\n\n            if (response_code) {\n                if (response_code === 'ERR_ALREADY_APPROVED_STATUS') {\n                    message = Utils.translate(\n                        'You cannot cancel this order because it has already been approved.'\n                    );\n                    type = 'error';\n                } else if (response_code === 'ERR_ALREADY_CANCELLED_STATUS') {\n                    message = Utils.translate('You have cancelled this purchase successfully.');\n                    type = 'warning';\n                } else if (response_code === 'OK') {\n                    message = Utils.translate('The order was successfully cancelled.');\n                    type = 'success';\n                }\n\n                if (message && type) {\n                    self.once('afterViewRender', function() {\n                        self.showError(message, type, true);\n                    });\n\n                    self.render();\n                }\n            }\n        });\n    },\n    beforeShowContent: function() {\n        const self = this;\n\n        const fetch = this.model.fetch({\n            data: {\n                internalid: self.id,\n                recordtype: self.recordtype\n            },\n            killerId: AjaxRequestsKiller.getKillerId()\n        });\n\n        //  remove after restoring SS 2.0 service\n        if (this.application.getConfig().siteSettings.isSuiteTaxEnabled) {\n            const defer = jQuery.Deferred();\n            fetch.then(function() {\n                jQuery\n                    .get(\n                        Utils.getAbsoluteUrl(\n                            `services/SuiteTax.ss?internalid=${self.id}&n=${\n                                SC.ENVIRONMENT.siteSettings.siteid\n                            }&domain=${SC.ENVIRONMENT.shoppingDomain}`,\n                            true\n                        )\n                    )\n                    .then(function(result) {\n                        self.model.set('taxesPerType', _.isArray(result) ? result : []);\n                    })\n                    .always(function() {\n                        defer.resolve();\n                    });\n            });\n            return defer;\n        }\n\n        return fetch;\n    },\n\n    // @method getReturnAuthorizations\n    getReturnAuthorizations: function() {\n        const return_authorizations = this.model.get('returnauthorizations');\n        let total_lines = 0;\n\n        return_authorizations.each(function(return_authorization) {\n            total_lines += return_authorization.get('lines')\n                ? return_authorization.get('lines').length\n                : 0;\n        });\n\n        return_authorizations.totalLines = total_lines;\n\n        return return_authorizations;\n    },\n\n    // @method getRecipts\n    getRecipts: function() {\n        if (!this.receipts) {\n            const receipts_lines = _.values(this.model.get('receipts').models);\n            this.receipts = new TransactionCollection();\n\n            if (receipts_lines.length) {\n                this.receipts.add(receipts_lines);\n            }\n        }\n        return this.receipts;\n    },\n\n    // @method isAnyLinePurchasable\n    getPayments: function() {\n        return _.where(this.model.get('adjustments'), { recordtype: 'customerpayment' });\n    },\n    getCreditMemos: function() {\n        return _.where(this.model.get('adjustments'), { recordtype: 'creditmemo' });\n    },\n    getDepositApplications: function() {\n        return _.where(this.model.get('adjustments'), { recordtype: 'depositapplication' });\n    },\n\n    // @method getSelectedMenu\n    getSelectedMenu: function() {\n        return 'ordershistory';\n    },\n\n    // @method getBreadcrumbPages\n    getBreadcrumbPages: function() {\n        return [\n            {\n                text: Utils.translate('Purchase History'),\n                href: '/purchases'\n            },\n            {\n                text: `#${this.model.get('tranid')}`,\n                href: `/purchases/view/${this.model.get('recordtype')}/${this.model.get('id')}`\n            }\n        ];\n    },\n\n    // @method render\n    render: function() {\n        this.paymentmethod =\n            this.model.get('paymentmethods') &&\n            this.model.get('paymentmethods').findWhere({ primary: true });\n        this.billaddress = this.model.get('addresses').get(this.model.get('billaddress'));\n        this.shipaddress = this.model.get('addresses').get(this.model.get('shipaddress'));\n\n        BackboneView.prototype.render.apply(this, arguments);\n    },\n\n    // @method trackEventReorder\n    trackEventReorder: function(line) {\n        line &&\n            Tracker.getInstance().trackEvent({\n                category: 'My Account - User Interaction',\n                action: 'Reorder',\n                label: line.generateURL()\n            });\n    },\n\n    // @method addToCart\n    addToCart: function(e) {\n        e.preventDefault();\n\n        const self = this;\n        const line_id = this.$(e.target).data('line-id');\n        const $form = this.$(e.target).closest('[data-type=\"order-item\"]');\n        const $alert_placeholder = $form.find('[data-type=alert-placeholder]');\n        const quantity =\n            this.$(e.target).data('partial-quantity') || this.$(e.target).data('item-quantity');\n        const selected_line = this.model.get('lines').get(line_id);\n\n        // The 'fulfillmentChoice' for reorders must be setted to 'ship'\n        if (selected_line.get('fulfillmentChoice')) {\n            selected_line.set('fulfillmentChoice', 'ship');\n        }\n\n        LiveOrderModel.getInstance()\n            .addLine(selected_line)\n            .done(function() {\n                self.trackEventReorder(selected_line);\n                // show warning if some options were not set\n                const availableOptions = selected_line.get('item').get('itemoptions_detail').fields;\n\n                const areMissingOptions = !_.every(selected_line.get('options').models, function(\n                    optionModel: any\n                ) {\n                    return _.find(availableOptions, function(availableOption: any) {\n                        return optionModel.get('cartOptionId') === availableOption.internalid;\n                    });\n                });\n\n                let message;\n                if (!areMissingOptions) {\n                    message =\n                        quantity > 1\n                            ? Utils.translate(\n                                  '$(0) Items successfully added to <a href=\"#\" data-touchpoint=\"viewcart\">your cart</a><br/>',\n                                  quantity\n                              )\n                            : Utils.translate(\n                                  'Item successfully added to <a href=\"#\" data-touchpoint=\"viewcart\">your cart</a><br/>'\n                              );\n                } else {\n                    message =\n                        quantity > 1\n                            ? Utils.translate(\n                                  '$(0) Items were added to <a href=\"#\" data-touchpoint=\"viewcart\">your cart</a> with variants<br/>',\n                                  quantity\n                              )\n                            : Utils.translate(\n                                  'Item was added to <a href=\"#\" data-touchpoint=\"viewcart\">your cart</a> with variants<br/>'\n                              );\n                }\n\n                const alert = new GlobalViewsMessageView({\n                    message: message,\n                    type: areMissingOptions ? 'warning' : 'success',\n                    closable: true\n                });\n\n                alert.show($alert_placeholder, 6000);\n            });\n    },\n\n    // @method goToReturns scroll the page up to the order's return\n    goToReturns: function(e) {\n        e.preventDefault();\n\n        const $return_authorizations_header = this.$(\n            '[data-target=\"#returns-authorizations\"]'\n        ).first();\n        this.$('#returns-authorizations')\n            .first()\n            .collapse('show');\n\n        jQuery('html, body').animate(\n            {\n                scrollTop: $return_authorizations_header.offset().top\n            },\n            500\n        );\n    },\n\n    // @method getNonShippableItems\n    // @return {Array<Transaction.Line.Model>}\n    getNonShippableLines: function() {\n        return this.model.get('lines').where({ linegroup: 'nonshippable' });\n    },\n    // @method getInStoreLines\n    // @return {Array<Transaction.Line.Model>}\n    getInStoreLines: function() {\n        return this.model.get('lines').where({ linegroup: 'instore' });\n    },\n\n    // @method getShippableLines Gets all line that have a linegroup as shippable\n    // @return {Array<Transaction.Line.Model>}\n    getShippableLines: function() {\n        return this.model.get('lines').where({ linegroup: 'shippable' });\n    },\n\n    getOrderPackages: function() {\n        const shippable_packages = this.getShippablePackages();\n        const instore_packages = this.getInstorePackages();\n\n        return shippable_packages.concat(instore_packages);\n    },\n    getShippablePackages: function() {\n        const self = this;\n        const shippable_lines = this.getShippableLines();\n        const is_multi_ship_to = this.model.get('ismultishipto');\n        const ship_groups = {};\n        let amount = 0;\n\n        _.each(shippable_lines || [], function(line: any) {\n            if (\n                line.get('quantitybackordered') ||\n                line.get('quantitypicked') ||\n                line.get('quantitypacked')\n            ) {\n                const shipaddress = is_multi_ship_to\n                    ? line.get('shipaddress')\n                    : self.model.get('shipaddress');\n                const shipmethod = is_multi_ship_to\n                    ? line.get('shipmethod')\n                    : self.model.get('shipmethod');\n\n                if (line.get('quantitybackordered')) {\n                    let pending_line;\n\n                    if (line.get('quantitypacked') === line.get('quantity')) {\n                        pending_line = line;\n                    } else {\n                        pending_line = line.clone();\n\n                        pending_line.set('item', line.get('item').attributes);\n\n                        pending_line.set('quantity', line.get('quantitybackordered'));\n\n                        amount = new BigNumber(line.get('rate'))\n                            .times(pending_line.get('quantity'))\n                            .toNumber();\n                        pending_line.set('amount', amount);\n                    }\n\n                    const key_pending = [shipaddress, shipmethod, 'pending'].join('-');\n\n                    ship_groups[key_pending] = ship_groups[key_pending] || {\n                        internalid: key_pending,\n                        shipaddress: self.model\n                            .get('addresses')\n                            .findWhere({ internalid: shipaddress }),\n                        shipmethod: self.model\n                            .get('shipmethods')\n                            .findWhere({ internalid: shipmethod }),\n                        packageGroup: 'ship',\n                        status: {\n                            internalid: 'pending',\n                            name: Utils.translate('Pending shipment')\n                        },\n                        lines: []\n                    };\n\n                    ship_groups[key_pending].lines.push(pending_line);\n                }\n\n                if (line.get('quantitypicked') || line.get('quantitypacked')) {\n                    let picked_packed_line;\n\n                    let quantity = 0;\n\n                    if (line.get('quantitypicked')) {\n                        quantity += line.get('quantitypicked');\n                    }\n\n                    if (line.get('quantitypacked')) {\n                        quantity += line.get('quantitypacked');\n                    }\n\n                    if (quantity === line.get('quantity')) {\n                        picked_packed_line = line;\n                    } else {\n                        picked_packed_line = line.clone();\n\n                        picked_packed_line.set('quantity', quantity);\n\n                        amount = new BigNumber(line.get('rate'))\n                            .times(picked_packed_line.get('quantity'))\n                            .toNumber();\n\n                        picked_packed_line.set('amount', amount);\n\n                        picked_packed_line.set('item', line.get('item').attributes);\n                    }\n\n                    const key_processing = [shipaddress, shipmethod, 'processing'].join('-');\n\n                    ship_groups[key_processing] = ship_groups[key_processing] || {\n                        internalid: key_processing,\n                        shipaddress: self.model\n                            .get('addresses')\n                            .findWhere({ internalid: shipaddress }),\n                        shipmethod: self.model\n                            .get('shipmethods')\n                            .findWhere({ internalid: shipmethod }),\n                        packageGroup: 'ship',\n                        status: {\n                            internalid: 'picked_packed',\n                            name: Utils.translate('Processing shipment')\n                        },\n                        lines: []\n                    };\n\n                    ship_groups[key_processing].lines.push(picked_packed_line);\n                }\n            }\n        });\n\n        this.model.get('fulfillments').each(function(fulfillment) {\n            const shipaddress = self.model\n                .get('addresses')\n                .findWhere({ internalid: fulfillment.get('shipaddress') });\n            const shipmethod = self.model\n                .get('shipmethods')\n                .findWhere({ internalid: fulfillment.get('shipmethod') });\n\n            fulfillment.set('shipaddress', shipaddress);\n            fulfillment.set('shipmethod', shipmethod);\n\n            const lines = _.compact(\n                fulfillment.get('lines').map(function(line) {\n                    let fulfilled_line;\n                    const original_line = self.model.get('lines').get(line.get('internalid'));\n\n                    if (original_line && original_line.get('linegroup') === 'shippable') {\n                        // ignore instore lines\n                        fulfilled_line = original_line.clone();\n\n                        fulfilled_line.set('quantity', original_line.get('quantityfulfilled'));\n\n                        amount = new BigNumber(original_line.get('rate'))\n                            .times(fulfilled_line.get('quantity'))\n                            .toNumber();\n\n                        fulfilled_line.set('amount', amount);\n\n                        fulfilled_line.set('item', original_line.get('item'), { silent: true });\n\n                        return fulfilled_line;\n                    }\n                })\n            );\n\n            if (lines.length) {\n                ship_groups[fulfillment.get('internalid')] = ship_groups[\n                    fulfillment.get('internalid')\n                ] || {\n                    internalid: fulfillment.get('internalid'),\n                    shipaddress: shipaddress,\n                    shipmethod: shipmethod,\n                    packageGroup: 'ship',\n                    status: {\n                        internalid: 'shipped',\n                        name: Utils.translate('Shipped')\n                    },\n                    date: fulfillment.get('date'),\n                    trackingnumbers: fulfillment.get('trackingnumbers'),\n                    lines: []\n                };\n\n                ship_groups[fulfillment.get('internalid')].lines = lines;\n            }\n        });\n\n        return _.values(ship_groups);\n    },\n\n    getInstorePackages: function() {\n        const instore_lines = this.getInStoreLines();\n        const instore_groups = {};\n        let amount = 0;\n\n        _.each(instore_lines || [], function(line: any) {\n            if (\n                line.get('quantitybackordered') ||\n                line.get('quantitypicked') ||\n                line.get('quantityfulfilled')\n            ) {\n                const location = line.get('location');\n\n                if (line.get('quantitybackordered')) {\n                    let pending_line;\n\n                    if (line.get('quantitypacked') === line.get('quantity')) {\n                        pending_line = line;\n                    } else {\n                        pending_line = line.clone();\n\n                        pending_line.set('item', line.get('item').attributes);\n\n                        pending_line.set('quantity', line.get('quantitybackordered'));\n\n                        amount = new BigNumber(line.get('rate'))\n                            .times(pending_line.get('quantity'))\n                            .toNumber();\n                        pending_line.set('amount', amount);\n                    }\n\n                    const key_pending = [location.get('internalid'), 'pending'].join('-');\n\n                    instore_groups[key_pending] = instore_groups[key_pending] || {\n                        internalid: key_pending,\n                        location: location,\n                        packageGroup: 'instore',\n                        status: {\n                            internalid: 'pending',\n                            name: Utils.translate('Preparing order')\n                        },\n                        lines: []\n                    };\n\n                    instore_groups[key_pending].lines.push(pending_line);\n                }\n\n                if (line.get('quantitypicked')) {\n                    let picked_line;\n\n                    if (line.get('quantitypicked') === line.get('quantity')) {\n                        picked_line = line;\n                    } else {\n                        picked_line = line.clone();\n\n                        picked_line.set('quantity', line.get('quantitypicked'));\n\n                        amount = new BigNumber(line.get('rate'))\n                            .times(picked_line.get('quantity'))\n                            .toNumber();\n\n                        picked_line.set('amount', amount);\n\n                        picked_line.set('item', line.get('item').attributes);\n                    }\n\n                    const key_picked = [location.get('internalid'), 'picked'].join('-');\n\n                    instore_groups[key_picked] = instore_groups[key_picked] || {\n                        internalid: key_picked,\n                        location: location,\n                        packageGroup: 'instore',\n                        status: {\n                            internalid: 'picked',\n                            name: Utils.translate('Ready to pick up')\n                        },\n                        lines: []\n                    };\n\n                    instore_groups[key_picked].lines.push(picked_line);\n                }\n\n                if (line.get('quantityfulfilled')) {\n                    let pickedup_line;\n\n                    if (line.get('quantityfulfilled') === line.get('quantity')) {\n                        pickedup_line = line;\n                    } else {\n                        pickedup_line = line.clone();\n\n                        pickedup_line.set('quantity', line.get('quantityfulfilled'));\n\n                        amount = new BigNumber(line.get('rate'))\n                            .times(pickedup_line.get('quantity'))\n                            .toNumber();\n\n                        pickedup_line.set('amount', amount);\n\n                        pickedup_line.set('item', line.get('item').attributes);\n                    }\n\n                    const key_pickedup = [location.get('internalid'), 'pickedup'].join('-');\n\n                    instore_groups[key_pickedup] = instore_groups[key_pickedup] || {\n                        internalid: key_pickedup,\n                        location: location,\n                        packageGroup: 'instore',\n                        status: {\n                            internalid: 'pickedup',\n                            name: Utils.translate('Picked up')\n                        },\n                        lines: []\n                    };\n\n                    instore_groups[key_pickedup].lines.push(pickedup_line);\n                }\n            }\n        });\n\n        return _.values(instore_groups);\n    },\n\n    // @property {Object} childViews\n    childViews: {\n        FormatPaymentMethod: function() {\n            return new GlobalViewsFormatPaymentMethodView({ model: this.paymentmethod });\n        },\n\n        'Billing.Address.View': function() {\n            return new AddressDetailsView({\n                model: this.billaddress,\n                hideDefaults: true,\n                hideActions: true,\n                hideSelector: true\n            });\n        },\n\n        NonShippableLines: function() {\n            return new BackboneCollectionView({\n                collection: this.non_shippable_lines || this.getNonShippableLines(),\n                childView: TransactionLineViewsCellActionableView,\n                viewsPerRow: 1,\n                childViewOptions: {\n                    navigable: !this.application.isStandalone(),\n                    application: this.application,\n                    SummaryView: TransactionLineViewsQuantityAmountView,\n                    ActionsView: OrderHistoryItemActionsView,\n                    showAlert: false\n                }\n            });\n        },\n\n        ReturnAutorization: function() {\n            return new BackboneCollectionView({\n                collection: this.getReturnAuthorizations(),\n                childView: OrderHistoryReturnAutorizationView,\n                childViewOptions: {\n                    navigable: !this.application.isStandalone()\n                },\n                viewsPerRow: 1\n            });\n        },\n\n        Payments: function() {\n            return new BackboneCollectionView({\n                collection: this.getPayments(),\n                childView: OrderHistoryPayments,\n                childViewOptions: {\n                    application: this.application,\n                    is_basic: this.is_basic,\n                    recordtype: this.model.get('recordtype')\n                }\n            });\n        },\n\n        OtherPayments: function() {\n            return new OrderHistoryOtherPayments({\n                credit_memos: this.getCreditMemos(),\n                deposit_applications: this.getDepositApplications(),\n                show_links: this.is_basic\n            });\n        },\n\n        Summary: function() {\n            return new OrderHistorySummary({\n                model: this.model,\n                application: this.application,\n                is_basic: this.is_basic\n            });\n        },\n        OrderPackages: function() {\n            return new BackboneCollectionView({\n                collection: this.getOrderPackages(),\n                childView: OrderHistoryPackagesView,\n                cellTemplate: order_history_packages_tpl,\n                viewsPerRow: 1,\n                childViewOptions: {\n                    application: this.application,\n                    showAlert: false,\n                    ignorePriceVisibility: true\n                }\n            });\n        }\n    },\n\n    // @method getContext @returns OrderHistory.Details.View.Context\n    getContext: function() {\n        const transaction_record_origin_instore: any = _.findWhere(\n            Configuration.get('transactionRecordOriginMapping'),\n            { id: 'inStore' }\n        );\n        const transaction_record_origin: any = _.findWhere(\n            Configuration.get('transactionRecordOriginMapping'),\n            { origin: this.model.get('origin') }\n        );\n\n        this.isInStore = this.model.get('origin') === transaction_record_origin_instore.origin;\n\n        this.accordionLimit = Configuration.accordionCollapseLimit;\n\n        this.non_shippable_lines = this.getNonShippableLines();\n        this.in_store_lines = this.getInStoreLines();\n\n        const return_authorizations = this.getReturnAuthorizations();\n        const order_ship_method = this.model.get('shipmethod');\n        let delivery_method_name = '';\n        const status = this.model.get('status');\n        const created_from = this.model.get('createdfrom');\n\n        if (order_ship_method && this.model.get('shipmethods')._byId[order_ship_method]) {\n            delivery_method_name = this.model\n                .get('shipmethods')\n                ._byId[order_ship_method].getFormattedShipmethod();\n        } else if (order_ship_method && order_ship_method.name) {\n            delivery_method_name = order_ship_method.name;\n        }\n\n        const { sca } = this.application.getConfig();\n\n        // @class OrderHistory.Details.View.Context\n        return {\n            // @property {OrderHistory.Model} model\n            model: this.model,\n            // @property {Boolean} showNonShippableItems\n            showNonShippableLines: !!this.non_shippable_lines.length,\n            // @property {Boolean} showNonShippableLinesAccordion\n            showNonShippableLinesAccordion: this.non_shippable_lines.length > this.accordionLimit,\n            // @property {Array} nonShippableItems\n            nonShippableLines: this.non_shippable_lines,\n            // @property {Boolean} nonShippableItemsLengthGreaterThan1\n            nonShippableLinesLengthGreaterThan1: this.non_shippable_lines.length > 1,\n            // @property {Boolean} showNonShippableItems\n            showInStoreLines: !!this.in_store_lines.length,\n            // @property {Boolean} showInStoreLinesAccordion\n            showInStoreLinesAccordion: this.in_store_lines.length > this.accordionLimit,\n            // @property {Array} nonShippableItems\n            inStoreItems: this.in_store_lines,\n            // @property {Boolean} nonShippableItemsLengthGreaterThan1\n            inStoreLinesLengthGreaterThan1: this.in_store_lines.length > 1,\n            // @property {Transaction.Line.Collection} lines\n            lines: this.model.get('lines'),\n            // @property {Boolean} collapseElements\n            collapseElements: sca.collapseElements,\n            // @property {Address.Model} billAddress\n            showBillAddress: !!this.billaddress,\n            // @property {Boolean} showOrderShipAddress\n            showOrderShipAddress: !!this.model.get('shipaddress'),\n            // @property {Address.Model} orderShipaddress\n            orderShipaddress: this.model.get('shipaddress')\n                ? this.model.get('addresses').get(this.model.get('shipaddress'))\n                : null,\n            // @property {Boolean} showReturnAuthorizations\n            showReturnAuthorizations: !!return_authorizations.length,\n            // @property {Object} returnAuthorizations\n            returnAuthorizations: return_authorizations,\n            // @property {String} deliveryMethodName\n            deliveryMethodName: delivery_method_name || '',\n            // @property {Boolean} showDeliveryMethod\n            showDeliveryMethod: !!delivery_method_name,\n            // @property {Boolean} isInStore\n            isInStore: this.isInStore,\n            // @property {Boolean} showPaymentMethod\n            showPaymentMethod: !this.getPayments().length,\n            // @property {Boolean} initiallyCollapsed\n            initiallyCollapsed: Utils.isPhoneDevice() ? '' : 'in',\n            // @property {Boolean} initiallyCollapsedArrow\n            initiallyCollapsedArrow: Utils.isPhoneDevice() ? 'collapsed' : '',\n            // @property {String} originName\n            originName: transaction_record_origin.name,\n            // @property {String} title\n            title: transaction_record_origin.detailedName,\n            // @property {Boolean} showPaymentEventFail\n            showPaymentEventFail:\n                this.model.get('paymentevent').holdreason === 'FORWARD_REQUESTED' &&\n                status.internalid !== 'cancelled' &&\n                status.internalid !== 'closed',\n            // @property {Boolean} showEstimateDetail\n            showQuoteDetail: !!created_from && created_from.name,\n            // @property {String} quoteName\n            quoteName: Utils.translate('Quote #$(0)', created_from.name),\n            // @property {String} estimateURL\n            quoteURL:\n                created_from && created_from.internalid ? `quotes/${created_from.internalid}` : '',\n            // @property {Boolean} showPurchaseOrderNumber\n            showPurchaseOrderNumber: !!this.model.get('purchasenumber')\n        };\n    }\n});\n\nexport = OrderHistoryDetailsView;\n"]}
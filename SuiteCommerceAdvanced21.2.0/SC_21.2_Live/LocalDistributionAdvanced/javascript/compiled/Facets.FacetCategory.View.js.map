{"version":3,"sources":["Facets.FacetCategory.View.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;IAaF,OAAS,YAAY,CAAC,MAAM,CAAC;QACzB,UAAU,EAAE;YACR,kCAAkC;YAClC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO;gBAC7B,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY;gBACtD,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;QAClC,CAAC;QAED,+DAA+D;QAC/D,UAAU,EAAE;YACR,IAAM,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,KAAK,IAAI,CAAC,KAAK,CAAC;YACzD,IAAM,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;YAE5C,2CAA2C;YAC3C,OAAO;gBACH,+BAA+B;gBAC/B,QAAQ,EACJ,WAAW;oBACX,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;gBAE/E,4BAA4B;gBAC5B,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM;gBAEzB,4BAA4B;gBAC5B,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG;gBAEnB,qCAAqC;gBACrC,cAAc,EAAE,aAAa,IAAI,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,MAAM;gBAE/D,+BAA+B;gBAC/B,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC;gBAE9B,+BAA+B;gBAC/B,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK;aAC9B,CAAC;YACF,mCAAmC;QACvC,CAAC;QAED,UAAU,EAAE;YACR,4BAA4B,EAAE;gBAC1B,IAAM,WAAW,GAAG,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;gBAEhD,OAAO,IAAI,6BAA6B,CAAC;oBACrC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU;oBAC3B,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK;oBACzB,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,UAAU;oBACnC,OAAO,EAAE,IAAI,CAAC,KAAK;oBACnB,MAAM,EAAE,WAAW;oBACnB,SAAS,EACL,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ;wBACtB,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;oBACxE,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ;iBAClC,CAAC,CAAC;YACP,CAAC;SACJ;KACJ,CAAC,CAAC","file":"Facets.FacetCategory.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Facets.FacetCategory.View\"/>\nimport '../../Backbone.CollectionView/JavaScript/Backbone.CollectionView';\n\nimport * as _ from 'underscore';\n\nimport FacetsFacetCategoriesListView = require('./Facets.FacetCategoriesList.View');\n\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\n\n// @module Facets\n// @class Facets.FacetCategory.View @extends Backbone.View\nexport = BackboneView.extend({\n    initialize: function() {\n        // We assume this.model is a facet\n        this.value = this.options.urlMemo\n            ? this.options.urlMemo + '/' + this.model.urlcomponent\n            : this.model.urlcomponent;\n    },\n\n    // @method getContext @return Facets.FacetCategory.View.Context\n    getContext: function() {\n        const is_selected = this.options.selected === this.model;\n        const subcategories = this.model.categories;\n\n        // @class Facets.FacetCategory.View.Context\n        return {\n            // @property {Boolean} isActive\n            isActive:\n                is_selected ||\n                (this.options.selected && ~this.options.selected.indexOf(this.value + '/')),\n\n            // @property {String} itemId\n            itemId: this.model.itemId,\n\n            // @property {String} listId\n            url: this.model.url,\n\n            // @property {Boolean} hasSubcategory\n            hasSubcategory: subcategories && _.values(subcategories).length,\n\n            // @property {Boolean} hasItems\n            hasItems: this.model.count > 0,\n\n            // @property {Number} itemCount\n            itemCount: this.model.count\n        };\n        // @class Facets.FacetCategory.View\n    },\n\n    childViews: {\n        'Facets.FacetCategoriesList': function() {\n            const sub_list_id = _.uniqueId('facetSubList_');\n\n            return new FacetsFacetCategoriesListView({\n                list: this.model.categories,\n                facet: this.options.facet,\n                translator: this.options.translator,\n                urlMemo: this.value,\n                listId: sub_list_id,\n                collapsed:\n                    !this.options.selected ||\n                    this.value !== this.options.selected.substring(0, this.value.length),\n                selected: this.options.selected\n            });\n        }\n    }\n});\n"]}
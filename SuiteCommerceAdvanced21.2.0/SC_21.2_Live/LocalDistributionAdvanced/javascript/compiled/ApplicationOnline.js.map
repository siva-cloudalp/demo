{"version":3,"sources":["ApplicationOnline.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;;;;;;;;;;;;;;;;IAWF;QAAgD,qCAAW;QAA3D;;QAmEA,CAAC;QAlEU,uCAAW,GAAlB,UAAmB,GAAW,EAAE,IAAY;YACxC,GAAG;gBACC,GAAG;oBACH,KAAK,CAAC,wCAAwC,CAC1C,6BAA6B,EAC7B,IAAI,CAAC,SAAS,EAAE,CAAC,iBAAiB,CACrC,CAAC;YAEN,IAAM,aAAa,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;YACvC,IAAM,WAAW,GAAG,aAAa,CAAC,gBAAgB,IAAI,EAAE,CAAC;YACzD,IAAM,UAAU,GAAG,WAAW,CAAC,IAAI,IAAI,IAAI,CAAC;YAE5C,IAAM,YAAY,GAAG,aAAa,CAAC,YAAY,IAAI,EAAE,CAAC;YACtD,OAAO,KAAK,CAAC,WAAW,CAAC,YAAY,CAAC,UAAU,IAAI,EAAE,EAAE,GAAG,EAAE,UAAU,CAAC,CAAC;QAC7E,CAAC;QAEM,mCAAO,GAAd;YACI,IAAM,cAAc,GAAG,wBAAM,CAAC,QAAQ,EAAE,CAAC;YAEzC,4BAAY,CAAC,UAAU,EAAE;iBACpB,IAAI,CAAC;gBACF,cAAc,CAAC,OAAO,CAAC,4BAAY,CAAC,WAAW,EAAE,CAAC,CAAC;YACvD,CAAC,CAAC;iBACD,IAAI,CAAC;gBAAS,cAAO;qBAAP,UAAO,EAAP,qBAAO,EAAP,IAAO;oBAAP,yBAAO;;gBAClB,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC5C,CAAC,CAAC,CAAC;YAEP,OAAO,cAAc,CAAC;QAC1B,CAAC;QAEM,wCAAY,GAAnB;YACI,OAAO,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC;QACrC,CAAC;QAEM,4CAAgB,GAAvB;YACI,IAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;YAChC,OAAO,CACH,CAAC,IAAI,CAAC,YAAY,EAAE;gBACpB,CAAC,MAAM,CAAC,oBAAoB,IAAI,MAAM,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAC9E,CAAC;QACN,CAAC;QAEM,iCAAK,GAAZ,UAAa,OAAc,EAAE,IAAe;YACxC,IAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;YAClD,iBAAM,KAAK,YAAC,aAAa,EAAE,IAAI,CAAC,CAAC;QACrC,CAAC;QAES,yCAAa,GAAvB,UAAwB,iBAAwB;YAC5C,IAAI,OAAO,GAAG,iBAAiB,CAAC;YAChC,IAAI,IAAI,CAAC,YAAY,EAAE,EAAE;gBACrB,OAAO,GAAG,CAAC,CAAC,MAAM,CACd,iBAAiB,EACjB,UAAC,MAAW,IAAc,OAAA,MAAM,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAtC,CAAsC,CACnE,CAAC;aACL;YACD,OAAO,OAAO,CAAC;QACnB,CAAC;QAIM,yCAAa,GAApB;YACI,OAAO,CAAC,CAAC,QAAQ,CACb,IAAI,CAAC,SAAS,EAAE,CAAC,cAAc,IAAI,EAAE,EACrC,cAAc,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CACjD,CAAC;QACN,CAAC;QACL,wBAAC;IAAD,CAnEA,AAmEC,CAnE+C,yBAAW,GAmE1D;IAnEqB,8CAAiB","file":"ApplicationOnline.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name = \"ApplicationOnline\"/>\n\nimport { Application } from '../../../Commons/ApplicationSkeleton/JavaScript/Application';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport { jQuery } from '../../jQuerySCAExtras/JavaScript/jQuerySCAExtras';\nimport { ProfileModel } from '../../../Commons/Profile/JavaScript/Profile.Model';\nimport ItemKeyMapping = require('../../../Commons/Item/JavaScript/Item.KeyMapping');\nimport * as _ from 'underscore';\n\nexport abstract class ApplicationOnline extends Application {\n    public resizeImage(url: string, size: string): any {\n        url =\n            url ||\n            Utils.getThemeAbsoluteUrlOfNonManagedResources(\n                'img/no_image_available.jpeg',\n                this.getConfig().imageNotAvailable\n            );\n\n        const configuration = this.getConfig();\n        const sizeMapping = configuration.imageSizeMapping || {};\n        const mappedSize = sizeMapping.size || size;\n\n        const siteSettings = configuration.siteSettings || {};\n        return Utils.resizeImage(siteSettings.imagesizes || [], url, mappedSize);\n    }\n\n    public getUser(): JQuery.Deferred<any> {\n        const profilePromise = jQuery.Deferred();\n\n        ProfileModel.getPromise()\n            .done(function() {\n                profilePromise.resolve(ProfileModel.getInstance());\n            })\n            .fail(function(...args) {\n                profilePromise.reject.apply(this, args);\n            });\n\n        return profilePromise;\n    }\n\n    public isStandalone(): boolean {\n        return SC.ENVIRONMENT.standalone;\n    }\n\n    public isReorderEnabled(): boolean {\n        const config = this.getConfig();\n        return (\n            !this.isStandalone() ||\n            (config.myAccountPreferences && config.myAccountPreferences.reorderEnabled)\n        );\n    }\n\n    public start(modules: any[], done?: Function) {\n        const loadedModules = this.modulesToLoad(modules);\n        super.start(loadedModules, done);\n    }\n\n    protected modulesToLoad(entryPointModules: any[]): any[] {\n        let modules = entryPointModules;\n        if (this.isStandalone()) {\n            modules = _.filter(\n                entryPointModules,\n                (module: any): boolean => module && !module.excludeFromMyAccount\n            );\n        }\n        return modules;\n    }\n\n    public abstract getName(): string;\n\n    public getKeyMapping(): any {\n        return _.defaults(\n            this.getConfig().itemKeyMapping || {},\n            ItemKeyMapping.getKeyMapping(this.getConfig())\n        );\n    }\n}\n"]}
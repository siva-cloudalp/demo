{"version":3,"sources":["Wizard.Step.ts"],"names":[],"mappings":"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","file":"Wizard.Step.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Wizard.Step\"/>\n\nimport * as _ from 'underscore';\nimport * as wizard_step_tpl from 'wizard_step.tpl';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { GlobalViewsMessageView } from '../../../Commons/GlobalViews/JavaScript/GlobalViews.Message.View';\n\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\nimport PluginContainer = require('../../../Commons/PluginContainer/JavaScript/PluginContainer');\n\n// @class Wizard.Step Step View, Renders all the components of the Step @extends {Backbone.View}\nconst WizardStep: any = BackboneView.extend({\n    template: wizard_step_tpl,\n\n    // @property {String} continueButtonLabel default label for the \"continue\" button,\n    // this is overridden in the configuration file\n    continueButtonLabel: Utils.translate('Continue'),\n\n    // @property {Boolean} hideBackButton by default the back button is shown,\n    // this is overridden in the configuration file\n    hideBackButton: false,\n\n    // @property {String} bottomMessage\n    bottomMessage: null,\n\n    // @property {String} bottomMessageClass\n    bottomMessageClass: '',\n\n    // @property {Array<Wizard.Module>} modules Will be extended with the modules to be instantiated\n    modules: [],\n\n    // @method getContinueButtonLabel @returns {String}\n    getContinueButtonLabel: function() {\n        const current_step = this.wizard.getCurrentStep();\n        let label = this.continueButtonLabel;\n\n        if (current_step) {\n            if (this.changedContinueButtonLabel) {\n                label = _.isFunction(this.changedContinueButtonLabel)\n                    ? this.changedContinueButtonLabel()\n                    : this.changedContinueButtonLabel;\n            } else if (this.continueButtonLabel) {\n                label = _.isFunction(this.continueButtonLabel)\n                    ? this.continueButtonLabel()\n                    : this.continueButtonLabel;\n            }\n        }\n\n        return label;\n    },\n\n    afterModuleInstanceCreated: new PluginContainer(),\n\n    // @method initialize initializes some variables and Instantiates all the modules\n    initialize: function(options) {\n        this.wizard = options.wizard;\n        this.stepGroup = options.stepGroup;\n        this.step_url = options.step_url;\n        this.moduleInstances = [];\n\n        // This is used to know when to execute the events\n        this.renderPromise = jQuery.Deferred().resolve();\n\n        const self = this;\n        _.each(this.modules, function(ModuleClass) {\n            self.addModule(ModuleClass);\n        });\n    },\n\n    addModule: function addModule(ModuleClass) {\n        const self = this;\n        let module_options: any = {};\n\n        if (_.isArray(ModuleClass)) {\n            module_options = ModuleClass[1] || {};\n            ModuleClass = ModuleClass[0];\n        }\n\n        if (typeof ModuleClass === 'undefined') {\n            return;\n        }\n        if (typeof ModuleClass === 'string') {\n            ModuleClass = Utils.requireModules(ModuleClass);\n        }\n\n        let { module_index } = module_options;\n\n        const module_instance = new ModuleClass(\n            _.extend(\n                {\n                    wizard: self.wizard,\n                    step: self,\n                    stepGroup: self.stepGroup\n                },\n                module_options\n            )\n        );\n\n        // add listeners to some events available to the modules\n        module_instance.on({\n            ready: function(is_ready) {\n                self.moduleReady(this, is_ready);\n            },\n\n            navbar_toggle: function(toggle) {\n                self.moduleNavbarToggle(this, toggle);\n            },\n\n            change_enable_continue: function(enable, options) {\n                const selected_options = _.extend({ onlyContinue: false }, options);\n                enable\n                    ? self.enableNavButtons(selected_options)\n                    : self.disableNavButtons(selected_options);\n            },\n\n            change_visible_back: function(visible) {\n                self.changeVisibleNavButtons({\n                    backBtn: true,\n                    visible: visible\n                });\n            },\n\n            update_step_name: function() {\n                self.$('[data-type=\"wizard-step-name-container\"]').text(self.getName());\n            },\n\n            change_label_continue: function(label) {\n                self.changeLabelContinue(label);\n            },\n\n            error: function(error) {\n                self.moduleError(this, error);\n            }\n        });\n\n        // attach wizard events to error handling\n        _.each(module_instance.errors, function(errorId) {\n            self.wizard.handledErrors.push(errorId);\n\n            self.wizard.on(errorId, function(error) {\n                module_instance.manageError(error);\n            });\n        });\n\n        if (module_instance.modules) {\n            _.each(module_instance.modules, function(submodule: any) {\n                _.each(submodule.instance.errors, function(errorId) {\n                    self.wizard.handledErrors.push(errorId);\n\n                    self.wizard.on(errorId, function(error) {\n                        submodule.instance.manageError(error);\n                    });\n                });\n            });\n        }\n\n        self.afterModuleInstanceCreated.executeAll(module_instance);\n\n        // ModuleClass is expected to be a View\n        module_index = _.isNumber(module_index) ? module_index : self.moduleInstances.length;\n        self.moduleInstances.splice(module_index, 0, module_instance);\n    },\n\n    // @method removeReadyFromModules When a step gets in the pass it is requested to set all its module instances\n    // to false, so if the step get to be present again (back and forward) dot get skipped\n    removeReadyFromModules: function() {\n        _.each(this.moduleInstances, function(module_instance: any) {\n            module_instance.isReady = false;\n        });\n    },\n\n    // @method moduleReady when a module is ready triggers this\n    // if all the modules in the step are ready, and the advance conditions are met, the step submits itself\n    moduleReady: function(module, ready) {\n        const self = this;\n        // submit the step if changed the state of isReady and step is in the present.\n        if (module.isReady !== ready) {\n            module.isReady = ready;\n\n            if (self.stepAdvance() && self.state === 'present') {\n                this.renderPromise.done(function() {\n                    self.submit();\n                });\n            }\n        }\n    },\n\n    // @method moduleError @param {Wizard.Module} module @param {Wizard.Module.Error} error\n    moduleError: function(module, error) {\n        // if the error doesn't come from a module, and this step is being shown, display the error\n        if (!module && this.state !== 'future') {\n            this.error = error;\n            if (this === this.wizard.getCurrentStep()) {\n                this.showError();\n            }\n        }\n    },\n\n    // @method hasErrors  @return {Boolean}\n    hasErrors: function() {\n        return (\n            this.error ||\n            _.some(this.moduleInstances, function(module: any) {\n                return module.error;\n            })\n        );\n    },\n\n    // @method  showError\n    showError: function() {\n        if (this.error) {\n            const global_view_message = new GlobalViewsMessageView({\n                message: this.wizard.processErrorMessage(this.error.errorMessage),\n                type: 'error',\n                closable: true\n            });\n\n            this.$('[data-type=\"alert-placeholder-step\"]').html(\n                global_view_message.render().$el.html()\n            );\n\n            jQuery('body').animate(\n                {\n                    scrollTop: jQuery('body .global-views-message-error:first').offset().top\n                },\n                600\n            );\n\n            this.error = null;\n        }\n    },\n\n    // @method stepAdvance auxiliary function to determine if we have to advance to the next step.\n    stepAdvance: function() {\n        return this.areAllModulesReady() && this.isStepReady();\n    },\n\n    // @method areAllModulesReady  @return {Boolean}\n    areAllModulesReady: function() {\n        const ready_state_array = _(this.moduleInstances)\n            .chain()\n            .pluck('isReady')\n            .uniq()\n            .value();\n        const url_options = Utils.parseUrlOptions(Backbone.history.location.hash);\n\n        return (\n            !url_options.force && ready_state_array.length === 1 && ready_state_array[0] === true\n        );\n    },\n\n    // @method isStepReady method to be overwritten to put custom logic to determine if a step is ready to be skipped @return {Boolean}\n    isStepReady: function() {\n        return false;\n    },\n\n    // @method moduleNavbarToggle when a module doesn't need the navigation bar triggers this\n    // if no modules in the step needs it, the step hide the navigation buttons\n    // @param {Wizard.Module} module @param {Boolean} toggle\n    moduleNavbarToggle: function(module, toggle) {\n        const self = this;\n        this.renderPromise.done(function() {\n            module.navigationToggle = toggle;\n\n            const toggle_state_array = _(self.moduleInstances)\n                .chain()\n                .pluck('navigationToggle')\n                .uniq()\n                .value();\n\n            if (toggle_state_array.length === 1 && toggle_state_array[0] === false) {\n                self.$('.step-navigation-buttons').hide();\n            } else {\n                self.$('.step-navigation-buttons').show();\n            }\n        });\n    },\n\n    // @method tellModules communicate the status of the step to it's modules (past, present, future) @param {String} what\n    tellModules: function(what) {\n        _.each(this.moduleInstances, function(module_instance: any) {\n            _.isFunction(module_instance[what]) && module_instance[what]();\n            module_instance.state = what;\n        });\n    },\n\n    // @method past\n    // Will be called ever time a step is going to be rendered and this step is previous in the step order\n    past: function() {\n        return this.validate();\n    },\n\n    // @method present\n    // Will be called ever time a step is going to be rendered and this is the step\n    present: jQuery.noop,\n\n    // @method future Will be called ever time a step is going to be rendered\n    // and this step is next in the step order\n    future: function() {\n        // cleanup future errors\n        this.error = null;\n        _.each(this.moduleInstances, function(module_instance: any) {\n            module_instance.error = null;\n        });\n    },\n    // @method render overrides the render function to not only render itself\n    // but also call the render function of its modules\n    render: function() {\n        const self = this;\n\n        this.removeReadyFromModules();\n\n        this.renderPromise = jQuery.Deferred();\n\n        this.currentModelState = JSON.stringify(this.wizard.model);\n\n        // Renders itself\n        this._render();\n        const content_element = this.$('#wizard-step-content');\n\n        // Empties the modules container\n        content_element.empty();\n\n        const containers = [];\n\n        // Then Renders the all the modules and append them into the container\n        _.each(this.moduleInstances, function(module_instance: any) {\n            module_instance.attributes = module_instance.attributes || {};\n            module_instance.attributes['data-root-component-id'] =\n                self.attributes['data-root-component-id'];\n\n            module_instance.isReady = false;\n            module_instance.render();\n            let content = content_element;\n            const { container } = module_instance.options;\n\n            if (container) {\n                let added = false;\n                if (!containers[container]) {\n                    containers[container] = true;\n                    added = true;\n                }\n\n                const content_temp = self.$(container);\n                if (content_temp.length) {\n                    if (added) {\n                        content_temp.empty();\n                    }\n                    content = content_temp;\n                }\n            }\n            content.append(module_instance.$el);\n        });\n\n        this.wizard.application.getLayout().once('afterAppendView', function() {\n            self.renderPromise.resolve();\n        });\n\n        this.showError();\n        return this;\n    },\n\n    _previousStep: function _previousStep(e) {\n        // Disables the navigation Buttons\n        e && this.disableNavButtons();\n\n        // Calls the submit method of the modules and collects errors they may have\n        const promises = [];\n        _.each(this.moduleInstances, function(module_instance: any) {\n            promises.push(module_instance.cancel());\n        });\n\n        const self = this;\n        return jQuery.when.apply(jQuery, promises).then(\n            // Success Callback\n            jQuery.noop,\n            // Error Callback\n            function(error) {\n                if (error) {\n                    self.wizard.manageError(error, self);\n                    e && self.enableNavButtons();\n                }\n            }\n        );\n    },\n\n    // @method previousStep Goes to the previous step. Calls the cancel of each module\n    // and asks the wizard to go to the previous step\n    previousStep: function previousStep(e) {\n        const self = this;\n\n        return this._previousStep(e).done(function() {\n            self.wizard.goToPreviousStep();\n        });\n    },\n\n    // @method submitErrorHandler @param {Wizard.Module.Error} error\n    submitErrorHandler: function(error) {\n        this.enableNavButtons();\n\n        if (error) {\n            this.wizard.manageError(error, this);\n        }\n\n        _.each(this.moduleInstances, function(module_instance: any) {\n            module_instance.enableInterface();\n        });\n    },\n\n    _submit: function _submit(e) {\n        // Disables the navigation Buttons\n        e && this.disableNavButtons();\n\n        // Calls the submit method of the modules and collects errors they may have\n        const promises = [];\n\n        _.each(this.moduleInstances, function(module_instance: any) {\n            if (module_instance.isActive()) {\n                promises.push(module_instance.submit(e));\n                module_instance.disableInterface();\n            }\n        });\n\n        const self = this;\n        return jQuery.when\n            .apply(jQuery, promises)\n            .then(\n                // Success Callback\n                function() {\n                    // NOTE: Here the order between then and always have changed, because when certain module wanted to disable nav buttons this always re-enable them!\n                    // Validate this change!\n                    return self\n                        .save()\n                        .always(function() {\n                            self.enableNavButtons();\n                        })\n                        .fail(function(error) {\n                            self.submitErrorHandler(error);\n                        });\n                }\n            )\n            .fail(function(error) {\n                self.submitErrorHandler(error);\n                return error;\n            });\n    },\n\n    // @method submit Calls the submit method of each module. Calls our save function\n    // and asks the wizard to go to the next step\n    submit: function(e) {\n        const self = this;\n\n        return this._submit(e).done(function() {\n            self.wizard.goToNextStep();\n        });\n    },\n\n    // @method showStep Each time a next step is going to be rendered, it is asked if the step should be shown or not. In this way an entire step can be skipped\n    // @returns {Boolean}\n    showStep: function() {\n        return (\n            this.isActive() &&\n            _.some(\n                _.filter(this.moduleInstances, function(module_to_filter: any) {\n                    return !module_to_filter.options.exclude_on_skip_step;\n                }),\n                function(module_instance: any) {\n                    return module_instance.isActive();\n                }\n            )\n        );\n    },\n\n    // @method isActive @returns {Boolean}\n    isActive: function(): boolean {\n        return true;\n    },\n\n    // @method changeLabelContinue Change the label of the 'continue' button.\n    // @param {String} label\n    changeLabelContinue: function(label) {\n        const new_label =\n            label ||\n            (_.isFunction(this.continueButtonLabel)\n                ? this.continueButtonLabel()\n                : this.continueButtonLabel);\n\n        this._executeAfterRender(function() {\n            this.wizard.application\n                .getLayout()\n                .$('[data-action=\"submit-step\"]')\n                .html(new_label);\n        }, this);\n\n        this.changedContinueButtonLabel = new_label;\n    },\n\n    // @method _save If there is a model calls the save function of it.\n    // other ways it returns a resolved promise, to return something standard\n    // @returns {jQuery.Deferred}\n    _save: function() {\n        if (this.wizard.model && this.currentModelState !== JSON.stringify(this.wizard.model)) {\n            return this.wizard.model.save().fail(function(jqXhr) {\n                jqXhr.preventDefault = true;\n            });\n        }\n        return jQuery.Deferred().resolveWith(this);\n    },\n\n    // @method save The overridable save() method. Internally calls _.save()\n    // @returns {jQuery.Deferred}\n    save: function() {\n        return this._save();\n    },\n\n    // @method validate calls validation on all modules and call the error manager\n    validate: function() {\n        const promises = [];\n        _.each(this.moduleInstances, function(module_instance: any) {\n            if (module_instance.isActive()) {\n                promises.push(module_instance.isValid());\n            }\n        });\n\n        const self = this;\n        return jQuery.when.apply(jQuery, promises).fail(\n            // Error Callback\n            function(error) {\n                self.wizard.manageError(error, self);\n            }\n        );\n    },\n\n    // @method disableNavButtons Disables the navigation buttons\n    // @param {onlyContinue:Booelan} options\n    disableNavButtons: function(options) {\n        this._executeAfterRender(function() {\n            let selector = '[data-action=\"edit-module\"], [data-type=\"edit-module\"], ';\n            if (!options || !options.onlyContinue) {\n                selector += '[data-action=\"previous-step\"], ';\n            }\n\n            selector += ' [data-action=\"submit-step\"]';\n\n            this.wizard.application\n                .getLayout()\n                .$(selector)\n                .attr('disabled', true);\n        }, this);\n    },\n\n    // @method changeVisibleNavButtons Show or hide the specified navigation button @param {continueBtn: Boolean, backBtn: Boolean, visible: Boolean} options\n    changeVisibleNavButtons: function(options) {\n        this._executeAfterRender(function() {\n            let selector = '';\n\n            if (options.continueBtn) {\n                selector = `${selector ? ', ' : ''}[data-action=\"edit-module\"]`;\n            }\n\n            if (options.backBtn) {\n                selector += `${selector ? ', ' : ''}[data-action=\"previous-step\"]`;\n            }\n\n            this.wizard.application\n                .getLayout()\n                .$(selector)\n                .css('display', options.visible ? 'block' : 'none');\n        }, this);\n    },\n\n    // @method enableNavButtons\n    // @param {onlyContinue: Boolean, notDisableTouchs: Boolean, notDisableBreads: Boolean} options\n    enableNavButtons: function(options) {\n        this._executeAfterRender(function() {\n            let selector = '[data-action=\"edit-module\"], [data-type=\"edit-module\"],  ';\n            if (!options || !options.onlyContinue) {\n                selector += '[data-action=\"previous-step\"], ';\n            }\n\n            if (!options || !options.notDisableTouchs) {\n                selector += '[data-touchpoint], ';\n            }\n\n            if (!options || !options.notDisableBreads) {\n                selector += '.breadcrumb a, .wizard-step-link a, ';\n            }\n\n            selector += ' [data-action=\"submit-step\"]';\n\n            this.wizard.application\n                .getLayout()\n                .$(selector)\n                .attr('disabled', false);\n        }, this);\n    },\n\n    // @method _executeAfterRender @param {Function} fn @param {Any} ctx\n    _executeAfterRender: function(fn, ctx) {\n        if (this.renderPromise.state() !== 'resolved') {\n            this.renderPromise.done(_.bind(fn, ctx));\n        } else {\n            _.bind(fn, ctx)();\n        }\n    },\n\n    // @method getName @return {String}\n    getName: function() {\n        return this.name;\n    },\n\n    // @method getContext @return {Wizard.Step.Context}\n    getContext: function() {\n        // @class Wizard.Step.Context\n        return {\n            // @property {Boolean} showTitle\n            showTitle: !!this.getName(),\n            // @property {String} title\n            title: this.getName(),\n            // @property {Boolean} showContinueButton\n            showContinueButton: !this.hideContinueButton,\n            // @property {String} continueButtonLabel\n            continueButtonLabel: this.getContinueButtonLabel() || '',\n            // @property {Boolean} showSecondContinueButtonOnPhone\n            showSecondContinueButtonOnPhone: !!this.hideSecondContinueButtonOnPhone,\n            // @property {Boolean} showBackButton\n            showBackButton: !(this.hideBackButton || this.wizard.isCurrentStepFirst()),\n            // @property {Boolean} showBottomMessage\n            showBottomMessage: !!this.bottomMessage,\n            // @property {String} bottomMessage\n            bottomMessage: this.bottomMessage || '',\n            // @property {String} bottomMessageClass\n            bottomMessageClass: this.bottomMessageClass || ''\n        };\n    }\n});\n\nexport = WizardStep;\n"]}
{"version":3,"sources":["PaymentWizard.Configuration.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;IAoBF,IAAM,kBAAkB,GAAG;QACvB;YACI,IAAI,EAAE,KAAK,CAAC,SAAS,CAAC,wBAAwB,CAAC;YAC/C,KAAK,EAAE;gBACH;oBACI,GAAG,EAAE,gBAAgB;oBACrB,cAAc,EAAE,IAAI;oBACpB,kBAAkB,EAAE,KAAK;oBACzB,OAAO,EAAE;wBACL,0BAA0B;wBAC1B;4BACI,0BAA0B;4BAC1B;gCACI,SAAS,EAAE,4BAA4B;gCACvC,gCAAgC,EAAE,IAAI;6BACzC;yBACJ;qBACJ;oBACD,IAAI,EAAE;wBACF,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC,OAAO,EAAE,CAAC;oBACvC,CAAC;iBACJ;aACJ;SACJ;QACD;YACI,IAAI,EAAE,KAAK,CAAC,SAAS,CAAC,oBAAoB,CAAC;YAC3C,KAAK,EAAE;gBACH;oBACI,GAAG,EAAE,gBAAgB;oBACrB,cAAc,EAAE,KAAK;oBACrB,kBAAkB,EAAE,KAAK;oBACzB,OAAO,EAAE;wBACL;4BACI,oCAAoC;4BACpC;gCACI,gBAAgB,EAAE,SAAS;6BAC9B;yBACJ;wBACD;4BACI,oCAAoC;4BACpC;gCACI,gBAAgB,EAAE,QAAQ;6BAC7B;yBACJ;wBACD;4BACI,wCAAwC;4BACxC;gCACI,KAAK,EAAE,KAAK,CAAC,SAAS,CAAC,gBAAgB,CAAC;gCACxC,WAAW,EAAE,iBAAiB;gCAC9B,OAAO,EAAE;oCACL;wCACI,WAAW,EAAE,0CAA0C;wCACvD,IAAI,EAAE,KAAK,CAAC,SAAS,CAAC,qBAAqB,CAAC;wCAC5C,IAAI,EAAE,YAAY;wCAClB,OAAO,EAAE,EAAE;qCACd;iCACJ;6BACJ;yBACJ;wBACD;4BACI,0BAA0B;4BAC1B;gCACI,SAAS,EAAE,4BAA4B;gCACvC,WAAW,EAAE,KAAK,CAAC,SAAS,CAAC,eAAe,CAAC;gCAC7C,MAAM,EAAE,IAAI;6BACf;yBACJ;wBACD;4BACI,+BAA+B;4BAC/B;gCACI,SAAS,EAAE,4BAA4B;6BAC1C;yBACJ;qBACJ;oBACD,IAAI,EAAE;wBACF,IAAM,OAAO,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;wBAElC,IAAI,CAAC,MAAM,CAAC,KAAK;6BACZ,IAAI,EAAE;6BACN,IAAI,CAAC,UAAA,eAAe;4BACjB,IACI,eAAe,CAAC,YAAY;gCAC5B,eAAe,CAAC,YAAY,CAAC,UAAU,KAAK,UAAU,EACxD;gCACE,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,KAAK,CAAC,cAAc,CACvC,eAAe,CAAC,YAAY,CAAC,WAAW,EACxC;oCACI,UAAU,EAAE,6BAAa,CAAC,GAAG,CAAC,mBAAmB,CAAC;iCACrD,CACJ,CAAC;gCAEF,OAAO,CAAC,MAAM,EAAE,CAAC;6BACpB;4BAED,OAAO,CAAC,OAAO,EAAE,CAAC;wBACtB,CAAC,CAAC;6BACD,IAAI,CACD;4BACI,OAAO,CAAC,MAAM,EAAE,CAAC;wBACrB,CAAC,CACJ,CAAC;wBAEN,OAAO,OAAO,CAAC;oBACnB,CAAC;iBACJ;gBACD;oBACI,GAAG,EAAE,sBAAsB;oBAC3B,cAAc,EAAE,IAAI;oBACpB,cAAc,EAAE,IAAI;oBACpB,kBAAkB,EAAE,IAAI;oBACxB,OAAO,EAAE;wBACL,+BAA+B;wBAC/B,+BAA+B;wBAC/B;4BACI,wCAAwC;4BACxC;gCACI,gBAAgB,EAAE,SAAS;6BAC9B;yBACJ;wBACD;4BACI,wCAAwC;4BACxC;gCACI,gBAAgB,EAAE,QAAQ;6BAC7B;yBACJ;wBACD,+BAA+B;wBAC/B;4BACI,sCAAsC;4BACtC;gCACI,SAAS,EAAE,4BAA4B;gCACvC,MAAM,EAAE,IAAI;6BACf;yBACJ;qBACJ;iBACJ;aACJ;SACJ;KACJ,CAAC;IAEF,OAAS,kBAAkB,CAAC","file":"PaymentWizard.Configuration.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"PaymentWizard.Configuration\"/>\n\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\n\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { Configuration } from '../../SCA/JavaScript/Configuration';\n\nimport PaymentWizardModuleInvoice = require('./PaymentWizard.Module.Invoice');\nimport PaymentWizardModuleSummary = require('./PaymentWizard.Module.Summary');\nimport PaymentWizardModuleCreditTransaction = require('./PaymentWizard.Module.CreditTransaction');\nimport PaymentWizardModulePaymentMethodSelector = require('./PaymentWizard.Module.PaymentMethod.Selector');\nimport PaymentWizardModulePaymentMethodCreditcard = require('./PaymentWizard.Module.PaymentMethod.Creditcard');\nimport PaymentWizardModuleShowInvoices = require('./PaymentWizard.Module.ShowInvoices');\nimport PaymentWizardModuleConfirmation = require('./PaymentWizard.Module.Confirmation');\nimport PaymentWizardModuleShowPayments = require('./PaymentWizard.Module.ShowPayments');\nimport PaymentWizardModuleConfirmationSummary = require('./PaymentWizard.Module.ConfirmationSummary');\nimport PaymentWizardModuleShowCreditTransaction = require('./PaymentWizard.Module.ShowCreditTransaction');\n\nconst paymentWizardSteps = [\n    {\n        name: Utils.translate('SELECT INVOICES TO PAY'),\n        steps: [\n            {\n                url: 'make-a-payment',\n                hideBackButton: true,\n                hideContinueButton: false,\n                modules: [\n                    PaymentWizardModuleInvoice,\n                    [\n                        PaymentWizardModuleSummary,\n                        {\n                            container: '#wizard-step-content-right',\n                            show_estimated_as_invoices_total: true\n                        }\n                    ]\n                ],\n                save: function() {\n                    return jQuery.Deferred().resolve();\n                }\n            }\n        ]\n    },\n    {\n        name: Utils.translate('PAYMENT AND REVIEW'),\n        steps: [\n            {\n                url: 'review-payment',\n                hideBackButton: false,\n                hideContinueButton: false,\n                modules: [\n                    [\n                        PaymentWizardModuleCreditTransaction,\n                        {\n                            transaction_type: 'deposit'\n                        }\n                    ],\n                    [\n                        PaymentWizardModuleCreditTransaction,\n                        {\n                            transaction_type: 'credit'\n                        }\n                    ],\n                    [\n                        PaymentWizardModulePaymentMethodSelector,\n                        {\n                            title: Utils.translate('Payment Method'),\n                            record_type: 'customerpayment',\n                            modules: [\n                                {\n                                    classModule: PaymentWizardModulePaymentMethodCreditcard,\n                                    name: Utils.translate('Credit / Debit Card'),\n                                    type: 'creditcard',\n                                    options: {}\n                                }\n                            ]\n                        }\n                    ],\n                    [\n                        PaymentWizardModuleSummary,\n                        {\n                            container: '#wizard-step-content-right',\n                            total_label: Utils.translate('Payment Total'),\n                            submit: true\n                        }\n                    ],\n                    [\n                        PaymentWizardModuleShowInvoices,\n                        {\n                            container: '#wizard-step-content-right'\n                        }\n                    ]\n                ],\n                save: function() {\n                    const promise = jQuery.Deferred();\n\n                    this.wizard.model\n                        .save()\n                        .done(customerPayment => {\n                            if (\n                                customerPayment.confirmation &&\n                                customerPayment.confirmation.statuscode === 'redirect'\n                            ) {\n                                window.location.href = Utils.addParamsToUrl(\n                                    customerPayment.confirmation.redirecturl,\n                                    {\n                                        touchpoint: Configuration.get('currentTouchpoint')\n                                    }\n                                );\n\n                                promise.reject();\n                            }\n\n                            promise.resolve();\n                        })\n                        .fail(\n                            (): void => {\n                                promise.reject();\n                            }\n                        );\n\n                    return promise;\n                }\n            },\n            {\n                url: 'payment-confirmation',\n                hideBackButton: true,\n                hideBreadcrumb: true,\n                hideContinueButton: true,\n                modules: [\n                    PaymentWizardModuleConfirmation,\n                    PaymentWizardModuleShowInvoices,\n                    [\n                        PaymentWizardModuleShowCreditTransaction,\n                        {\n                            transaction_type: 'deposit'\n                        }\n                    ],\n                    [\n                        PaymentWizardModuleShowCreditTransaction,\n                        {\n                            transaction_type: 'credit'\n                        }\n                    ],\n                    PaymentWizardModuleShowPayments,\n                    [\n                        PaymentWizardModuleConfirmationSummary,\n                        {\n                            container: '#wizard-step-content-right',\n                            submit: true\n                        }\n                    ]\n                ]\n            }\n        ]\n    }\n];\n\nexport = paymentWizardSteps;\n"]}
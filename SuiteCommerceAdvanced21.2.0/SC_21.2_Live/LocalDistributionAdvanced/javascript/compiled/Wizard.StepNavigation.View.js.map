{"version":3,"sources":["Wizard.StepNavigation.View.ts"],"names":[],"mappings":"AAAA;;;;;EAKE;;;IAWF,2DAA2D;IAC3D,IAAM,wBAAwB,GAAQ,YAAY,CAAC,MAAM,CAAC;QACtD,QAAQ,EAAE,0BAA0B;QAEpC,kEAAkE;QAClE,UAAU,EAAE;YACR,IAAM,WAAW,GAAG,EAAE,CAAC;YACvB,IAAI,iBAAiB,GAAG,EAAE,CAAC;YAC3B,IAAI,OAAO,GAAG,CAAC,CAAC;YAEhB,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAS,UAAqB;gBACjE,IAAI,UAAU,CAAC,aAAa,EAAE,EAAE;oBAC5B,kDAAkD;oBAClD,IAAM,eAAe,GAAG;wBACpB,0BAA0B;wBAC1B,IAAI,EAAE,IAAI,GAAG,UAAU,CAAC,IAAI;wBAC5B,mCAAmC;wBACnC,aAAa,EAAE,EAAE;wBACjB,6BAA6B;wBAC7B,OAAO,EAAE,EAAE;wBACX,6BAA6B;wBAC7B,OAAO,EAAE,CAAC;qBACb,CAAC;oBACF,IAAI,aAAa,GAAG,EAAE,CAAC;oBACvB,IAAM,iBAAiB,GAAG,UAAU,CAAC,SAAS,EAAE,CAAC;oBAEjD,IAAU,UAAW,CAAC,KAAK,KAAK,SAAS,EAAE;wBACvC,aAAa,IAAI,gCAAgC,CAAC;qBACrD;yBAAM,IAAU,UAAW,CAAC,KAAK,KAAK,QAAQ,EAAE;wBAC7C,aAAa,IAAI,kCAAkC,CAAC;qBACvD;oBAED,IAAI,iBAAiB,IAAI,iBAAiB,CAAC,MAAM,EAAE;wBAC/C,aAAa,IAAI,+BAA+B,CAAC;qBACpD;oBACD,eAAe,CAAC,aAAa,GAAG,aAAa,CAAC;oBAE9C,eAAe,CAAC,OAAO;wBACb,UAAW,CAAC,KAAK,KAAK,QAAQ;4BAChC,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ;4BAC3B,CAAC,CAAC,UAAU,CAAC,MAAM,EAAE,GAAG,aAAa,CAAC;oBAE9C,iBAAiB,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,iBAAiB,EAAE,iBAAiB,CAAC,EAAE,UACtE,IAAI;wBAEJ,OAAO,IAAI,CAAC,SAAS,CAAC;oBAC1B,CAAC,CAAC,CAAC;oBAEH,eAAe,CAAC,OAAO,GAAG,EAAE,OAAO,CAAC;oBAEpC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;iBACrC;YACL,CAAC,CAAC,CAAC;YAEH,4CAA4C;YAC5C,OAAO;gBACH,yEAAyE;gBACzE,UAAU,EAAE,WAAW;gBACvB,mCAAmC;gBACnC,MAAM,EAAE,iBAAiB;gBACzB,qCAAqC;gBACrC,cAAc,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,kBAAkB,EAAE;aAC5D,CAAC;YACF,oCAAoC;QACxC,CAAC;KACJ,CAAC,CAAC;IAEH,OAAS,wBAAwB,CAAC","file":"Wizard.StepNavigation.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Wizard.StepNavigation.View\"/>\n\nimport * as _ from 'underscore';\nimport * as wizard_step_navigation_tpl from 'wizard_step_navigation.tpl';\n\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\nimport StepGroup = require('./Wizard.StepGroup');\n\n// @class Wizard.StepNavigation.View @extends Backbone.View\nconst WizardStepNavigationView: any = BackboneView.extend({\n    template: wizard_step_navigation_tpl,\n\n    // @method getContext @return {Wizard.StepNavigation.View.Context}\n    getContext: function() {\n        const step_groups = [];\n        let errors_to_display = [];\n        let counter = 0;\n\n        _(this.options.wizard.stepGroups).each(function(step_group: StepGroup) {\n            if (step_group.showStepGroup()) {\n                // @class Wizard.StepNavigation.View.StepGroupData\n                const step_group_data = {\n                    // @property {String} name\n                    name: '. ' + step_group.name,\n                    // @property {String} listItemClass\n                    listItemClass: '',\n                    // @property {String} linkUrl\n                    linkUrl: '',\n                    // @property {Number} counter\n                    counter: 0\n                };\n                let listItemClass = '';\n                const step_group_errors = step_group.getErrors();\n\n                if ((<any>step_group).state === 'present') {\n                    listItemClass += ' wizard-step-navigation-active';\n                } else if ((<any>step_group).state === 'future') {\n                    listItemClass += ' wizard-step-navigation-disabled';\n                }\n\n                if (step_group_errors && step_group_errors.length) {\n                    listItemClass += ' wizard-step-navigation-error';\n                }\n                step_group_data.listItemClass = listItemClass;\n\n                step_group_data.linkUrl =\n                    (<any>step_group).state === 'future'\n                        ? Backbone.history.fragment\n                        : step_group.getURL() + '?force=true';\n\n                errors_to_display = _.uniq(_.union(errors_to_display, step_group_errors), function(\n                    item\n                ) {\n                    return item.errorCode;\n                });\n\n                step_group_data.counter = ++counter;\n\n                step_groups.push(step_group_data);\n            }\n        });\n\n        // @class Wizard.StepNavigation.View.Context\n        return {\n            // @property {Array<Wizard.StepNavigation.View.StepGroupData>} stepGroups\n            stepGroups: step_groups,\n            // @property {Array<String>} errors\n            errors: errors_to_display,\n            // @property {Boolean} showBackButton\n            showBackButton: !this.options.wizard.isCurrentStepFirst()\n        };\n        // @class Wizard.StepNavigation.View\n    }\n});\n\nexport = WizardStepNavigationView;\n"]}
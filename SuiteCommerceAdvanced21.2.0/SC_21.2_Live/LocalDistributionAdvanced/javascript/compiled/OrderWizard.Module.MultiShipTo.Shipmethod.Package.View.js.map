{"version":3,"sources":["OrderWizard.Module.MultiShipTo.Shipmethod.Package.View.ts"],"names":[],"mappings":"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","file":"OrderWizard.Module.MultiShipTo.Shipmethod.Package.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"OrderWizard.Module.MultiShipTo.Shipmethod.Package.View\"/>\n/// <reference path=\"../../../Commons/Utilities/JavaScript/UnderscoreExtended.d.ts\" />\n\nimport * as _ from 'underscore';\nimport * as order_wizard_msr_shipmethod_package_tpl from 'order_wizard_msr_shipmethod_package.tpl';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\n\nimport BackboneCollectionView = require('../../../Commons/Backbone.CollectionView/JavaScript/Backbone.CollectionView');\nimport { AddressDetailsView } from '../../../Commons/Address/JavaScript/Address.Details.View';\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\nimport { TransactionLineViewsCellNavigableView } from '../../../Commons/Transaction.Line.Views/JavaScript/Transaction.Line.Views.Cell.Navigable.View';\nimport LiveOrderModel = require('../../../Commons/LiveOrder/JavaScript/LiveOrder.Model');\n\nexport = BackboneView.extend({\n    template: order_wizard_msr_shipmethod_package_tpl,\n\n    childViews: {\n        'Shipping.Address': function() {\n            return new AddressDetailsView({\n                model: this.model.get('address'),\n                hideActions: true,\n                hideDefaults: true,\n                manage: 'shipaddress',\n                hideSelector: true\n            });\n        },\n        'Items.Collection': function() {\n            return new BackboneCollectionView({\n                collection: this.model.get('lines'),\n                childView: TransactionLineViewsCellNavigableView,\n                viewsPerRow: 1,\n                childViewOptions: {\n                    navigable: !this.options.hide_item_link,\n\n                    detail1Title: Utils.translate('Qty:'),\n                    detail1: 'quantity',\n\n                    detail2Title: Utils.translate('Unit price'),\n                    detail2: 'rate_formatted',\n\n                    detail3Title: Utils.translate('Amount:'),\n                    detail3: 'total_formatted'\n                }\n            });\n        }\n    },\n\n    getContext: function() {\n        /* var packages = view.getPackages()\n\t\t,\tnon_shippable_lines = view.wizard.model.getNonShippableLines()\n\t\t,\tgeneral_collapse_elements =  view.getDefaultCollapseItem()\n\t\t,\tshow_edit_address_url = !!view.options.show_edit_address_url\n\t\t,\tshow_combo = view.options.show_combo\n\t\t,\tis_read_only = view.is_read_only\n\t\t,\thide_accordion = view.options.hide_accordion\n\t\t,\tshow_items = !view.options.hide_items\n\t\t,\tapplication = view.wizard.application;\n\n\t\tvar items = package.lines\n\t\t,\tselected_address = package.address\n\t\t,\tdelivery_methods = package.deliveryMethods\n\t\t,\tcollapse_elements = _.isUndefined(package.collapse_elements) ? general_collapse_elements : package.collapse_elements;\n\t\t*/\n\n        const shipping_methods = this.model.get('deliveryMethods').map(function(shipmethod) {\n            return {\n                name: shipmethod.get('name'),\n                rate_formatted: shipmethod.get('rate_formatted'),\n                internalid: shipmethod.get('internalid'),\n                isActive: shipmethod.get('check')\n            };\n        });\n        const selected_shipmethod = _.findWhere(shipping_methods, { isActive: true });\n        const lines = this.model.get('lines');\n        const total_items = LiveOrderModel.countItems(lines);\n\n        return {\n            // @property {String} addressId\n            addressId: this.model.get('address').get('internalid'),\n            // @property {Boolean} showEditButton\n            showEditAddressButton: !!this.options.show_edit_address_url,\n            // @property {String} editUrl\n            editUrl: this.options.edit_url,\n            // @property {Boolean} showDeliveryMethods\n            showDeliveryMethods: !!shipping_methods.length,\n            // @property {Boolean} showCombo\n            showCombo: this.options.show_combo,\n            // @property {Array} shippingMethods\n            shippingMethods: shipping_methods,\n            // @property {Object} selectedShipmethod\n            selectedShipmethod: selected_shipmethod,\n            // @property {Boolean} showSelectedShipmethod\n            showSelectedShipmethod: !!selected_shipmethod,\n            // @property {Boolean} showActions\n            showActions: !this.options.is_read_only,\n            // @property {Boolean} showAccordion\n            showAccordion: !this.options.hide_accordion,\n            // @property {Boolean} showItems\n            showItems: !this.options.hide_items,\n            // @property {Boolean} showLines\n            showLines: !!lines.length,\n            // @property {Orderline.Collection} lines\n            lines: lines,\n            // @property {Number} totalItems\n            totalItems: total_items,\n            // @property {Boolean} linesLengthGreaterThan1\n            totalItemsGreaterThan1: total_items > 1,\n            // @property {Boolean} collapseElements\n            collapseElements: _.isUndefined(this.model.get('collapse_elements'))\n                ? !!this.options.general_collapse_elements\n                : !!this.model.get('collapse_elements'),\n            // @property {Boolean} showEditShipment\n            showEditShipmentButton: !!this.options.edit_shipment_url,\n            // @property {String} editShipmentUrl\n            editShipmentUrl: this.options.edit_shipment_url\n        };\n    }\n});\n"]}
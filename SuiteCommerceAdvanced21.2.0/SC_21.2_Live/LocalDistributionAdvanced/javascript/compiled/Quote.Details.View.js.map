{"version":3,"sources":["Quote.Details.View.ts"],"names":[],"mappings":"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","file":"Quote.Details.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"Quote.Details.View\"/>\n// @Typescript-partial\n\nimport * as _ from 'underscore';\nimport * as quote_details_tpl from 'quote_details.tpl';\nimport * as Utils from '../../Utilities/JavaScript/Utils';\nimport { QuoteToSalesOrderWizardConfiguration } from '../../../Advanced/QuoteToSalesOrderWizard/JavaScript/QuoteToSalesOrderWizard.Configuration';\nimport { QuoteModel, QuoteLine, Quote } from './Quote.Model';\nimport { TransactionLineViewsCellNavigableView } from '../../Transaction.Line.Views/JavaScript/Transaction.Line.Views.Cell.Navigable.View';\nimport { Configuration } from '../../ApplicationSkeleton/JavaScript/Application';\nimport { AddressDetailsView } from '../../Address/JavaScript/Address.Details.View';\nimport { AjaxRequestsKiller } from '../../AjaxRequestsKiller/JavaScript/AjaxRequestsKiller';\nimport { UrlHelper } from '../../UrlHelper/JavaScript/UrlHelper';\nimport { ChildViews } from '../../Core/JavaScript/View';\nimport {\n    PageTypeView,\n    PageTypeViewOptions,\n    BreadCrumbPage\n} from '../../Core/JavaScript/PageTypeView';\nimport { ApplicationOnline } from '../../../Advanced/SCA/JavaScript/ApplicationOnline';\n// Remove this once Item.Collection migrated to use CollectionView instead of Backbone.Collection\nimport BackboneCollectionView = require('../../Backbone.CollectionView/JavaScript/Backbone.CollectionView');\n\ninterface QuoteDetailsContext {\n    tranid: string;\n    model: QuoteModel;\n    lineItemsLength: number;\n    entityStatusName: string;\n    pdfUrl: string;\n    reviewQuoteURL: string;\n    showPromocode: boolean;\n    showDiscount: boolean;\n    showBillingAddress: boolean;\n    showMessage: boolean;\n    message: string;\n    showMemo: boolean;\n    memo: string;\n    collapseElements: boolean;\n    summary: Summary;\n    duedate: string;\n    hasDuedate: boolean;\n    hasSalesrep: boolean;\n    salesrepName: string;\n    salesrepPhone: string;\n    salesrepEmail: string;\n    disclaimerSummary: string;\n    disclaimer: string;\n    purchaseValidationErrors: string[];\n    isOpen: boolean;\n    showOpenedAccordion: boolean;\n    hasPermission: boolean;\n    showHandlingCost: boolean;\n    showGiftCertificateMessage: boolean;\n    hasPermissionAndHasErrors: boolean;\n    showQuoteStatus: boolean;\n    hasItemsWithHiddenPrice: boolean;\n    disableDownloadAsPDF: boolean;\n    quoteTotalFormatted: string;\n}\n\ninterface StatusTranslationKey {\n    INVALIDPERMISSION: string;\n    INVALIDENTITYSTATUS: string;\n    MISSINGSHIPMETHOD: string;\n    MISSINGSHIPADDRESS: string;\n    GIFTCERTIFICATENOTALLOWED: string;\n    MISSINGSALESREP: string;\n}\n\ninterface Summary {\n    total_formatted: string;\n    subtotal_formatted: string;\n    discounttotal_formatted: string;\n    discountrate_formatted: string;\n    taxtotal_formatted: string;\n    handlingcost: string;\n}\n\ninterface Currency {\n    symbol: string;\n}\n\nexport class QuoteDetailsView extends PageTypeView<QuoteDetailsContext, {}> {\n    private model: QuoteModel;\n\n    private readonly statusTranslationKeys: StatusTranslationKey;\n\n    private billaddress: string;\n\n    private shipaddress: string;\n\n    private reviewQuoteURL: string;\n\n    private summary: Summary;\n\n    private currency: Currency;\n\n    private showGiftCertificateMessage: boolean;\n\n    private configuration: Configuration;\n\n    private quoteTotalFormatted: string;\n\n    public attributes = {\n        id: 'QuotesDetail',\n        class: 'QuoteDetails'\n    };\n\n    protected template = quote_details_tpl;\n\n    protected title = Utils.translate('Quote Details');\n\n    public constructor(options: PageTypeViewOptions) {\n        super(options);\n\n        this.configuration = options.application.getConfig();\n\n        this.model = new QuoteModel({\n            internalid: options.routerArguments[0]\n        });\n\n        this.statusTranslationKeys = {\n            INVALIDPERMISSION: Utils.translate('Not allowed'),\n            INVALIDENTITYSTATUS: Utils.translate('Sales representative approval'),\n            MISSINGSHIPMETHOD: Utils.translate('Shipping information'),\n            MISSINGSHIPADDRESS: Utils.translate('Shipping information'),\n            GIFTCERTIFICATENOTALLOWED: Utils.translate('Gift Certificate not allowed'),\n            MISSINGSALESREP: Utils.translate('Sales Representative assigned')\n        };\n    }\n\n    public beforeShowContent<Quote>(): JQuery.Deferred<Quote> {\n        return this.model.fetch({\n            killerId: AjaxRequestsKiller.getKillerId()\n        });\n    }\n\n    public getSelectedMenu(): string {\n        return 'quotes';\n    }\n\n    public readonly getBreadcrumbPages = (): BreadCrumbPage[] => {\n        return [\n            {\n                text: Utils.translate('Quotes'),\n                href: '/quotes'\n            },\n            {\n                text: Utils.translate('Quote #$(0)', this.model.get('tranid') || ''),\n                href: '/quotes'\n            }\n        ];\n    };\n\n    private itemsWithHiddenPrice(): boolean {\n        const lines = this.model.get('lines') ? this.model.get('lines').models : [];\n\n        const itemsWithHiddenPrice = _.filter(\n            lines,\n            (line: QuoteLine): boolean => {\n                return line.get('item').get('ispricevisible') === false;\n            }\n        );\n\n        return !!itemsWithHiddenPrice.length;\n    }\n\n    public showContent(): JQuery.Promise<this> {\n        this.billaddress = this.model.get('addresses').get(this.model.get('billaddress'));\n        this.shipaddress = this.model.get('addresses').get(this.model.get('shipaddress'));\n\n        const first_step = _.first(\n            _.flatten(_.pluck(QuoteToSalesOrderWizardConfiguration.steps || [], 'steps'))\n        );\n        this.reviewQuoteURL = (first_step && first_step.url) || '';\n        this.reviewQuoteURL = UrlHelper.setUrlParameter(\n            this.reviewQuoteURL,\n            'quoteid',\n            this.model.id\n        );\n\n        this.model.get('purchasablestatus').validationErrors = _.reject(\n            this.model.get('purchasablestatus').validationErrors,\n            (error_code): boolean => {\n                if (error_code === 'GIFTCERTIFICATENOTALLOWED') {\n                    this.showGiftCertificateMessage = true;\n                    return true;\n                }\n                return false;\n            }\n        );\n\n        return this.options.application && this.options.application.getLayout().showContent(this);\n    }\n\n    public getChildViews(): ChildViews {\n        return {\n            'Items.Collection': () => {\n                // TODO: Migrate to use CollectionView once that component is integrated to ML\n                return new BackboneCollectionView({\n                    collection: this.model.get('lines'),\n                    childView: TransactionLineViewsCellNavigableView,\n                    viewsPerRow: 1,\n                    childViewOptions: {\n                        navigable:\n                            this.options.application instanceof ApplicationOnline\n                                ? !this.options.application.isStandalone()\n                                : false,\n\n                        detail1Title: Utils.translate('Qty:'),\n                        detail1: 'quantity',\n\n                        detail2Title: Utils.translate('List price:'),\n                        detail2: 'rate_formatted',\n\n                        detail3Title: Utils.translate('Amount:'),\n                        detail3: 'total_formatted',\n\n                        isEstimateDone:\n                            (this.model.get('purchasablestatus') &&\n                                this.model.get('purchasablestatus').isPurchasable) ||\n                            this.model.get('status').internalid !== 'Open'\n                    }\n                });\n            },\n            'Billing.Address': (): AddressDetailsView => {\n                return new AddressDetailsView({\n                    model: this.billaddress,\n                    hideDefaults: true,\n                    hideActions: true,\n                    hideSelector: true\n                });\n            }\n        };\n    }\n\n    private generateErrorMessages(): string[] {\n        const results = _.map(\n            this.model.get('purchasablestatus').validationErrors,\n            (error_key: string): string => {\n                return this.statusTranslationKeys[error_key] || Utils.translate('Unknown error');\n            }\n        );\n\n        if (this.itemsWithHiddenPrice()) {\n            const priceNotVisibleMessage = Utils.translate(\n                'Missing price details for one or more items updated'\n            );\n            results.push(priceNotVisibleMessage);\n        }\n\n        // If there two or more messages equal, this make a unique message\n        return _.uniq(results);\n    }\n\n    private hideSummaryPrices(): void {\n        const currencySymbol: string = this.currency ? this.currency.symbol : '';\n\n        this.summary.total_formatted = currencySymbol;\n        this.summary.subtotal_formatted = currencySymbol;\n        this.summary.discounttotal_formatted = currencySymbol;\n        this.summary.discountrate_formatted = currencySymbol;\n        this.summary.taxtotal_formatted = currencySymbol;\n        this.quoteTotalFormatted = '';\n    }\n\n    public getContext(): QuoteDetailsContext {\n        const lineItemsLength = _.reduce(\n            this.model.get('lines').pluck('quantity'),\n            function(accum: number, quantity: number): number {\n                return accum + quantity;\n            },\n            0\n        );\n\n        this.currency = Utils.getCurrencyByName(\n            this.model.get('currency') ? this.model.get('currency').name : ''\n        );\n        this.summary = this.model.get('summary');\n        this.quoteTotalFormatted = this.summary.total_formatted;\n\n        const allowToPurchase = this.model.get('allowToPurchase');\n        const itemsWithHiddenPrice = this.itemsWithHiddenPrice();\n        const priceVisible: boolean =\n            (allowToPurchase && this.model.get('purchasablestatus').isPurchasable) ||\n            !itemsWithHiddenPrice ||\n            this.model.get('entitystatus').name !== '';\n\n        if (!priceVisible) {\n            this.hideSummaryPrices();\n        }\n\n        return {\n            tranid: this.model.get('tranid') || '',\n            model: this.model,\n            lineItemsLength: lineItemsLength,\n            entityStatusName:\n                (this.model.get('entitystatus') && this.model.get('entitystatus').name) ||\n                (this.model.get('status') && this.model.get('status').internalid) ||\n                '',\n            pdfUrl: Utils.getDownloadPdfUrl({\n                asset: 'quote-details',\n                id: this.model.get('internalid')\n            }),\n            reviewQuoteURL: this.reviewQuoteURL,\n            showPromocode: !!this.model.get('promocode'),\n            showDiscount: !!this.model.get('discount'),\n            showBillingAddress: !!this.billaddress,\n            showMessage: !!this.model.get('message'),\n            message: this.model.get('message'),\n            showMemo: !!this.model.get('memo'),\n            memo: this.model.get('memo'),\n            collapseElements: this.configuration.sca.collapseElements,\n            summary: this.summary,\n            duedate: this.model.get('duedate') || '',\n            hasDuedate: !!this.model.get('duedate'),\n            hasSalesrep: !!(this.model.get('salesrep') && this.model.get('salesrep').fullname),\n            salesrepName: this.model.get('salesrep') && this.model.get('salesrep').fullname,\n            salesrepPhone:\n                (this.model.get('salesrep') && this.model.get('salesrep').phone) ||\n                this.configuration.quote.defaultPhone,\n            salesrepEmail:\n                (this.model.get('salesrep') && this.model.get('salesrep').email) ||\n                this.configuration.quote.defaultEmail,\n            disclaimerSummary: Utils.translate(this.configuration.quote.disclaimerSummary || ''),\n            disclaimer: Utils.translate(this.configuration.quote.disclaimer || ''),\n            purchaseValidationErrors: this.generateErrorMessages(),\n            isOpen: this.model.get('isOpen') && !this.configuration.isBasic,\n            showOpenedAccordion: Utils.isTabletDevice() || Utils.isDesktopDevice(),\n            hasPermission: allowToPurchase,\n            showHandlingCost: !!this.summary.handlingcost,\n            showGiftCertificateMessage: this.showGiftCertificateMessage,\n            hasPermissionAndHasErrors: allowToPurchase && !!this.generateErrorMessages().length,\n            showQuoteStatus: !!(this.model.get('status') && this.model.get('status').internalid),\n            hasItemsWithHiddenPrice: itemsWithHiddenPrice,\n            disableDownloadAsPDF:\n                this.model.get('entitystatus').name === '' && itemsWithHiddenPrice,\n            quoteTotalFormatted: this.quoteTotalFormatted\n        };\n    }\n}\n"]}
{"version":3,"sources":["PaymentInstrument.CreditCard.View.ts"],"names":[],"mappings":"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","file":"PaymentInstrument.CreditCard.View.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"PaymentInstrument.CreditCard.View\"/>\n\nimport '../../Utilities/JavaScript/Utils';\nimport * as paymentinstrument_creditcard_tpl from 'paymentinstrument_creditcard.tpl';\n\nimport CreditCardEditFormSecurityCodeView = require('../../CreditCard/JavaScript/CreditCard.Edit.Form.SecurityCode.View');\nimport BackboneView = require('../../BackboneExtras/JavaScript/Backbone.View');\nimport BackboneFormView = require('../../Backbone.FormView/JavaScript/Backbone.FormView');\n\n// @class PaymentInstrument.CreditCard.View @extends Backbone.View\nconst PaymentInstrumentCreditCardView: any = BackboneView.extend({\n    template: paymentinstrument_creditcard_tpl,\n\n    initialize: function(options) {\n        this.options = options;\n\n        if (this.options.showSecurityCodeForm) {\n            this.model.set('hasSecurityCode', true);\n\n            this.bindings = {\n                '[name=\"ccsecuritycode\"]': 'ccsecuritycode'\n            };\n\n            this.events = {\n                'submit form': 'doNothing'\n            };\n\n            BackboneFormView.add(this);\n        }\n    },\n\n    childViews: {\n        'CreditCard.Edit.Form.SecurityCode': function() {\n            return new CreditCardEditFormSecurityCodeView({\n                error: this.options.securityNumberError,\n                showCreditCardHelp: this.options.showCreditCardHelp,\n                creditCardHelpTitle: this.options.creditCardHelpTitle\n            });\n        }\n    },\n\n    doNothing: function(e) {\n        e.preventDefault();\n    },\n\n    // @method getContext @return CreditCard.View\n    getContext: function() {\n        const icon =\n            this.model.get('paymentmethod').imagesrc && this.model.get('paymentmethod').imagesrc[0];\n        const isSelected =\n            this.options.hideSelector ||\n            this.model.get('internalid') === this.options.selectedCreditCardId;\n\n        // @class CreditCard.View\n        return {\n            // @property {String} creditCartId\n            creditCartId: this.model.get('internalid'),\n            // @property {Boolean} showSecurityCodeForm\n            showSecurityCodeForm: !!this.options.showSecurityCodeForm && isSelected,\n            // @property {String} showCreditCardImage\n            showCreditCardImage: !!icon,\n            // @property {String} paymentMethodImageUrl\n            paymentMethodImageUrl: icon || '',\n            // @property {String} paymentName\n            paymentName: this.model.get('paymentmethod').name,\n            // @property {String} lastfourdigits\n            lastfourdigits:\n                this.model.get('cardlastfourdigits') ||\n                (this.model.get('ccnumber') &&\n                    this.model.get('ccnumber').substring(this.model.get('ccnumber').length - 4)),\n            // @property {String} ccname\n            ccname: this.model.get('ccname') || '',\n            // @property {String} expirationDate\n            expirationDate:\n                this.model.get('cardexpirationdate') ||\n                this.model.get('expirationdate') ||\n                this.model.get('ccexpiredate'),\n            // @property {Boolean} showDefaults\n            showDefaults: !!this.options.showDefaults,\n            // @property {Boolean} isDefaultCreditCard\n            isDefaultCreditCard: this.model.get('ccdefault') === 'T',\n            // @property {Boolean} showSelect\n            showSelect: !!this.options.showSelect,\n            // @property {String} selectMessage\n            selectMessage: this.options.selectMessage,\n            // @property {Boolean} showActions\n            showActions: !!this.options.showActions,\n            // @property {Boolean} isSelected\n            isSelected: isSelected,\n            // @property {Boolean} showSelector\n            showSelector: !this.options.hideSelector,\n            // @property {Boolean} isNewPaymentMethod\n            isNewPaymentMethod: this.model.get('internalid') < 0\n        };\n    }\n});\n\nexport = PaymentInstrumentCreditCardView;\n"]}